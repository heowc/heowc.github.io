"use strict";(self.webpackChunkdocusaurus_blog=self.webpackChunkdocusaurus_blog||[]).push([[6692],{98357:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var i=t(74848),r=t(28453);const a={title:"Spring Boot - Validation",slug:"2018/01/14/spring-boot-hibernate-validation",date:new Date("2018-01-14T22:26:30.000Z"),category:["spring-boot"],tags:["spring","spring-boot","hibernate-validation"]},o=void 0,l={permalink:"/en/2018/01/14/spring-boot-hibernate-validation",source:"@site/blog/spring-boot-hibernate-validation.md",title:"Spring Boot - Validation",description:"\ub370\uc774\ud130\uc5d0 \ub300\ud55c \uc720\ud6a8\uc131 \uac80\uc99d\uc744 \ud6a8\uacfc\uc801\uc73c\ub85c \ub3c4\uc640\uc904 \uc218 \uc788\ub2e4.",date:"2018-01-14T22:26:30.000Z",tags:[{inline:!0,label:"spring",permalink:"/en/tags/spring"},{inline:!0,label:"spring-boot",permalink:"/en/tags/spring-boot"},{inline:!0,label:"hibernate-validation",permalink:"/en/tags/hibernate-validation"}],readingTime:2.67,hasTruncateMarker:!0,authors:[],frontMatter:{title:"Spring Boot - Validation",slug:"2018/01/14/spring-boot-hibernate-validation",date:"2018-01-14T22:26:30.000Z",category:["spring-boot"],tags:["spring","spring-boot","hibernate-validation"]},unlisted:!1,prevItem:{title:"Spring Boot - Cache",permalink:"/en/2018/02/05/spring-boot-cache"},nextItem:{title:"Spring Boot - Data JPA",permalink:"/en/2018/01/09/spring-boot-data-jpa"}},s={authorsImageUrls:[]},d=[{value:"bean-validation? hibernate-validator?",id:"bean-validation-hibernate-validator",level:3},{value:"Dependency",id:"dependency",level:3},{value:"Entity",id:"entity",level:3},{value:"Controller",id:"controller",level:3},{value:"Custom Validation",id:"custom-validation",level:3},{value:"@interface \uc815\uc758",id:"interface-\uc815\uc758",level:4},{value:"ConstraintValidator \uad6c\ud604",id:"constraintvalidator-\uad6c\ud604",level:4},{value:"\ud65c\uc6a9",id:"\ud65c\uc6a9",level:4},{value:"Test Code",id:"test-code",level:3},{value:"\ucc38\uace0",id:"\ucc38\uace0",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\ub370\uc774\ud130\uc5d0 \ub300\ud55c \uc720\ud6a8\uc131 \uac80\uc99d\uc744 \ud6a8\uacfc\uc801\uc73c\ub85c \ub3c4\uc640\uc904 \uc218 \uc788\ub2e4."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"bean-validation-hibernate-validator",children:"bean-validation? hibernate-validator?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Bean-validation"}),": ",(0,i.jsx)(n.a,{href:"https://jcp.org/en/jsr/detail?id=380",children:"JSR-380"}),", \uc560\ub178\ud14c\uc774\uc158\uc744 \uc774\uc6a9\ud558\uc5ec bean \uc720\ud6a8\uc131 \uac80\uc0ac\ub97c \uc704\ud55c Java API \uc2a4\ud399"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Hibernate-validator"}),": Bean Validation\uc744 \uad6c\ud604\ud55c Java API"]}),"\n",(0,i.jsx)(n.h3,{id:"dependency",children:"Dependency"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"dependencies { \n    compile('org.springframework.boot:spring-boot-starter-web') \n    compile('org.springframework.boot:spring-boot-starter-validation') \n    compile('org.projectlombok:lombok')\n    runtime('com.h2database:h2')\n    testCompile('org.springframework.boot:spring-boot-starter-test')\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"entity",children:"Entity"}),"\n",(0,i.jsx)(n.p,{children:"\uc560\ub178\ud14c\uc774\uc158\uc744 \uc0ac\uc6a9\ud558\uba74 \uc27d\uac8c Entity\uc5d0 \ub300\ud55c \uc720\ud6a8\uc131 \uac80\uc0ac\ub97c \ud560 \uc218 \uc788\ub2e4. \ud574\ub2f9 \uc560\ub178\ud14c\uc774\uc158\uc740 javax.validation.constraints\ud328\ud0a4\uc9c0\uc5d0 \uc815\uc758\ub418\uc5b4 \uc788\uc73c\uba70, \uc774\ub97c \uc544\ub798\uc640 \uac19\uc774 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Data\npublic class Member {\n\n\tprivate Long idx;\n\t\n\t@NotNull(message="name null")\n\tprivate String name;\n\t\n\t@Min(value=14, message="min 14")\n\tprivate Integer age;\n\t\n\t@NotNull(message="tel null")\n\tprivate String tel;\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@NotNull"}),": null \uac80\uc99d\n",(0,i.jsx)(n.code,{children:"@Min"}),", ",(0,i.jsx)(n.code,{children:"@Max"}),": \ucd5c\uc18c\uac12, \ucd5c\ub300\uac12 \uac80\uc99d\n",(0,i.jsx)(n.code,{children:"@Size"}),": \ubc94\uc704 \uac80\uc99d\n",(0,i.jsx)(n.code,{children:"@Email"}),": e-mail \uac80\uc99d\n",(0,i.jsx)(n.code,{children:"@AssertTrue"}),": true \uac80\uc99d"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@NotEmpty"}),": null\uc774\ub098 size\uac00 0 \uac80\uc99d (String, Collection)\n",(0,i.jsx)(n.code,{children:"@NotBlank"}),": null\uc774\ub098 whitespace \uac80\uc99d (String)\n",(0,i.jsx)(n.code,{children:"@Positive"}),", ",(0,i.jsx)(n.code,{children:"@PositiveOrZero"}),": \uc22b\uc790 \uac80\uc99d\n",(0,i.jsx)(n.code,{children:"@Negative"}),", ",(0,i.jsx)(n.code,{children:"@NegativeOrZero"}),": \uc22b\uc790 \uac80\uc99d\n",(0,i.jsx)(n.code,{children:"@Past"}),", ",(0,i.jsx)(n.code,{children:"@PastOrPresent"}),": \ub0a0\uc9dc \uac80\uc99d\n",(0,i.jsx)(n.code,{children:"@Future"}),", ",(0,i.jsx)(n.code,{children:"@FutureOrPresent"}),": \ub0a0\uc9dc \uac80\uc99d"]}),"\n",(0,i.jsx)(n.h3,{id:"controller",children:"Controller"}),"\n",(0,i.jsx)(n.p,{children:"\uac80\uc99d\ud558\uace0\uc790 \ud558\ub294 Entity\uc5d0 @Valid\ub97c \ubd99\uc774\uba70, \uc774\uc5d0 \ub300\ud55c \uacb0\uacfc\ub97c \ubc1b\uae30 \uc704\ud574 BindingResult\ub97c \ucd94\uac00\ud558\uc5ec \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@RestController\n@RequestMapping("member")\npublic class MemberController {\n\n    private final static Logger logger = Logger.getLogger(MemberController.class);\n    private final static int ZERO = 0;\n    \n    //...\n    \t\n    @PostMapping\n    public ResponseEntity<?> add(@Valid @RequestBody Member member, BindingResult bindingResult){\n        if(bindingResult.hasErrors()){\n            String errorMessage = bindingResult.getAllErrors().get(ZERO).getDefaultMessage();\n            return new ResponseEntity<>(errorMessage, HttpStatus.BAD_REQUEST); \n        }\n        return new ResponseEntity<>(member, HttpStatus.OK);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"custom-validation",children:"Custom Validation"}),"\n",(0,i.jsx)(n.p,{children:"\uc81c\uacf5\ud574\uc8fc\ub294 \uc560\ub178\ud14c\uc774\uc158\ub3c4 \ub9ce\uc9c0\ub9cc \uc0ac\uc6a9\uc790 \uc815\uc758 \uac80\uc99d \uc560\ub178\ud14c\uc774\uc158\uc744 \ub9cc\ub4e4\uc5b4\uc57c \ud558\ub294 \uc0c1\ud669\uc774 \uc788\uc744 \uc218 \uc788\ub2e4."}),"\n",(0,i.jsx)(n.h4,{id:"interface-\uc815\uc758",children:"@interface \uc815\uc758"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Documented\n@Constraint(validatedBy = PhoneValidator.class)\n@Target( { ElementType.METHOD, ElementType.FIELD })\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface Phone {\n    String message() default "Invalid phone number";\n    Class<?>[] groups() default {};\n    Class<? extends Payload>[] payload() default {};\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"constraintvalidator-\uad6c\ud604",children:"ConstraintValidator \uad6c\ud604"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public class PhoneValidator implements ConstraintValidator<Phone, String> {\n\n    @Override\n    public void initialize(Phone phone) {\n    \n    }\n \n    @Override\n    public boolean isValid(String field, ConstraintValidatorContext cxt) {\n        return field != null && field.matches("[0-9]+")\n                && (field.length() > 8) && (field.length() < 14);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\ud65c\uc6a9",children:"\ud65c\uc6a9"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@Phone\nprivate String phone;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"test-code",children:"Test Code"}),"\n",(0,i.jsxs)(n.p,{children:["\uc790\uc138\ud55c \ucf54\ub4dc\ub294 ",(0,i.jsx)(n.a,{href:"https://github.com/heowc/SpringBootSample/blob/master/SpringBootValidator/src/test/java/com/example/web/MemberControllerTest.java",children:"GitHub"}),"\uc744 \ucc38\uace0"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@RunWith(SpringRunner.class)\n@WebMvcTest(MemberController.class)\npublic class MemberControllerTest {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    // ...\n\n    @Test\n    public void test_success() throws Exception {\n        Member member = new Member(TEST_NAME, TEST_AGE, TEST_PHONE);\n        String memberToJson = objectMapper.writeValueAsString(member);\n\n        mockRequest(memberToJson, status().isOk(), memberToJson);\n    }\n\n    // ...\n\n    private void mockRequest(String memberToJson, ResultMatcher matcher, String result) throws Exception {\n        mvc.perform(post(TEST_END_POINT)\n                .content(memberToJson)\n                .contentType(MediaType.APPLICATION_JSON_UTF8)\n                .accept(MediaType.APPLICATION_JSON_UTF8))\n                .andExpect(matcher)\n                .andExpect(content().json(result));\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\ucc38\uace0",children:"\ucc38\uace0"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://github.com/heowc/SpringBootSample/tree/master/SpringBootValidator",children:"SpringBootSample / SpringBootValidator"}),"\n",(0,i.jsx)(n.a,{href:"http://www.baeldung.com/spring-mvc-custom-validator",children:"Baeldung / spring-mvc-custom-validator"})]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var i=t(96540);const r={},a=i.createContext(r);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);