<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>허원철의 개발 블로그 Blog</title>
        <link>https://heowc.dev/en/</link>
        <description>허원철의 개발 블로그 Blog</description>
        <lastBuildDate>Sat, 01 Apr 2023 20:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[SpringBoot 테스트 개선해보기 (feat. mock)]]></title>
            <link>https://heowc.dev/en/2023/04/01/improve-spring-integration-test-for-mock</link>
            <guid>2023/04/01/improve-spring-integration-test-for-mock</guid>
            <pubDate>Sat, 01 Apr 2023 20:00:00 GMT</pubDate>
            <description><![CDATA[지금하고 있는 프로젝트에서 초기에는 테스트가 거의 없는 수준이였지만, 지금은 어느덧 약 800 여개의 테스트 케이스가 CI를 통해 검증되고 있는데요. 이렇게 테스트 케이스가 나날이 많아지면서 여기서 생긴 문제점과 이를 어떻게 해결했는지 공유해보고자 합니다.]]></description>
            <content:encoded><![CDATA[<p>지금하고 있는 프로젝트에서 초기에는 테스트가 거의 없는 수준이였지만, 지금은 어느덧 약 800 여개의 테스트 케이스가 CI를 통해 검증되고 있는데요. 이렇게 테스트 케이스가 나날이 많아지면서 여기서 생긴 문제점과 이를 어떻게 해결했는지 공유해보고자 합니다. </p><p>(아직 Line Coverage가 16% 정도 밖에 되지 않아 갈 길이 머네요... 😵‍💫)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="짧디짧은-서비스-구조-설명">짧디짧은 서비스 구조 설명<a class="hash-link" href="#짧디짧은-서비스-구조-설명" title="Direct link to heading">​</a></h3><p>서비스는 그레이들 멀티 모듈을 활용한 여러 서비스를 모듈화해두었습니다.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gradle-multi-module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ㄴㅡ a-service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ㄴㅡ b-service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ㄴㅡ c-service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ㄴㅡ d-service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ㄴㅡ ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="시작은-작은-구멍에-불과했다">시작은 작은 구멍에 불과했다.<a class="hash-link" href="#시작은-작은-구멍에-불과했다" title="Direct link to heading">​</a></h3><p>시작은 테스트 3~400개가 되었을 무렵부터 였습니다. 평소와 다름 없이 기능 개발을 위해 별도의 feature 브랜치를 만들고 비즈니스 로직과 테스트 코드를 추가했는데 개발 장비에서 잘 돌던 테스트가 CI가 실패하기 시작했습니다. 로그를 보니 OOM이 발생하는 것이였는데요. 여기서 테스트 케이스가 많아져서 그런가 보다... 라는 짧은 생각으로 다음과 같은 처리를 했습니다. 😅</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">test {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxHeapSize = "1G"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="그리고-구멍은-더-커지기-시작했다">그리고 구멍은 더 커지기 시작했다.<a class="hash-link" href="#그리고-구멍은-더-커지기-시작했다" title="Direct link to heading">​</a></h3><p>그리고 다시 700개가 넘어갈 무렵 문제는 다시 시작되었습니다. 이 글을 작성하는 시점에는 이 문제에 대한 원인을 알고 있기 때문에 다시 시작되었다기보다는 고이 덮어둔 문제(?)가 커질때로 커진 것이죠. CI 로그를 확인해보았고, 이는 역시나 OOM이 발생해 있었습니다.</p><p>여기서 여러가지 생각이 들었습니다.</p><ul><li>메모리가 1G가 넘어갈 만큼 테스트가 많은가?</li><li>무거운 테스트가 있는가?</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="메모리가-1g가-넘어갈-만큼-테스트가-많은가">메모리가 1G가 넘어갈 만큼 테스트가 많은가?<a class="hash-link" href="#메모리가-1g가-넘어갈-만큼-테스트가-많은가" title="Direct link to heading">​</a></h4><p>테스트가 수천개, 수만개를 가진 오픈소스들을 보면 1000개도 안된 테린이(?) 수준이였기 때문에 사실상 결코 많은 수준이 아니였습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="무거운-테스트가-있는가">무거운 테스트가 있는가?<a class="hash-link" href="#무거운-테스트가-있는가" title="Direct link to heading">​</a></h4><p>물론, 주로 통합 테스트 <code>@SpringBootTest</code>를 활용한 통합테스트를 작성하고 있습니다. 하지만, 주기적으로 데이터베이스 초기화 등으로 상태를 가지는 객체들을 일괄적으로 비워주고 있기 때문에 문제가 된다고 생각되진 않았습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="어디가-문제인가">어디가 문제인가?<a class="hash-link" href="#어디가-문제인가" title="Direct link to heading">​</a></h3><p>다행스럽게도 로컬 환경에서도 손쉽게 재현이 가능했기 때문에 특정 모듈에 대한 전체 테스트 실행하여 힙 덤프를 떠보았습니다.</p><p><img loading="lazy" alt="Alt as-is" src="/en/assets/images/as-is-fe4a3cbda4e7bd273adc949f1d393477.png" width="1686" height="1494" class="img_ev3q">
(tool: <a href="https://www.eclipse.org/mat/" target="_blank" rel="noopener noreferrer">https://www.eclipse.org/mat/</a>)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="거대한-defaultlistablebeanfactory-수십개">거대한 <code>DefaultListableBeanFactory</code> 수십개...<a class="hash-link" href="#거대한-defaultlistablebeanfactory-수십개" title="Direct link to heading">​</a></h4><p>스크린샷에 전부 표현되지 않았지만, 상당히 많은 빈 팩토리가 여러개 생긴 것을 볼 수 있습니다. 대략 <code>50MB</code> 사이즈의 빈 팩토리가 20개만 생겨도 <code>1000MB</code>이기 때문에 상당히 비정상적인 경우라고 볼 수 있을 것 같습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="defaultlistablebeanfactory는-왜-많아지는가"><code>DefaultListableBeanFactory</code>는 왜 많아지는가?<a class="hash-link" href="#defaultlistablebeanfactory는-왜-많아지는가" title="Direct link to heading">​</a></h4><p>공식문서를 확인해본 결과, 다음과 같은 목차가 있는 것을 알 수 있습니다.
(목차만 봐도 느낌이 쌔합니다...)</p><blockquote><p><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-ctx-management-caching" target="_blank" rel="noopener noreferrer">Context Caching</a></p></blockquote><p><img loading="lazy" alt="Alt test-context-cache" src="/en/assets/images/test-context-cache-94d30c681c6ad9ae0e04ad5a44677743.png" width="1876" height="708" class="img_ev3q">
(참고: <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-ctx-management-caching" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-ctx-management-caching</a>)</p><p>대략 요약을 해보자면, 테스트에서 <code>ApplicationContext</code>를 재사용하기 위해 테스트에 적용된 설정들을 참고하여 이를 결정합니다. 여기서 문제가 되었던 부분은 <code>@MockBean</code>이였습니다. 지금 생각해보면, 스프링 빈을 자연스럽게 mock으로 만들어주는데 이게 어떻게 동작하는걸까를 깊게 생각해보지 않는 것이 결정적인 문제였던 것 같습니다. 🤣</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="우리는-왜-mockbean를-사용하는가">우리는 왜 <code>@MockBean</code>를 사용하는가?<a class="hash-link" href="#우리는-왜-mockbean를-사용하는가" title="Direct link to heading">​</a></h4><p>우선 <code>@MockBean</code>은 mockito에서 제공해주는 mock을 스프링부트에서 테스트시에 스프링 빈을 만들때 mock으로 만들어주는 애노테이션입니다. (보다 자세한 내용은 <code>MockitoPostProcessor</code>, <code>MockitoTestExecutionListener</code>를 찾아보시면 더욱 도움이 될 것 같습니다.)</p><p>저도 그렇지만, 프로젝트 대부분의 테스트 코드의 <code>@MockBean</code>을 사용하는 부분이 특정되어 있습니다. 이 부분은 서비스 구조와 연관이 있는데요. 모듈로 분리된 여러 서비스는 다양하게 서로의 정보를 주고 받는데, 이 중 <strong>서로 http 요청을 하는 부분</strong>이 있습니다. </p><div class="mermaid" data-mermaid-src="graph LR
    U[User] --> GW[API Gateway]
    GW --> AS[A Service]
    GW --> BS[B Service]
    GW --> CS[C Service]
    GW --> DS[D Service]
    AS --> BS
    DS --> BS">graph LR
    U[User] --&gt; GW[API Gateway]
    GW --&gt; AS[A Service]
    GW --&gt; BS[B Service]
    GW --&gt; CS[C Service]
    GW --&gt; DS[D Service]
    AS --&gt; BS
    DS --&gt; BS</div><p>Classicist 측면에서 접근해보자면 테스트에 활용할 각각의 테스트 서버들을 준비해두고 이를 활용하면 됩니다. 하지만, 아직 테스트 숙련도가 높지도 않고, 비용/시간/우선순위면에서도 그렇게 해야할 만큼 고도화가 필요한 상황이 아니였기에 적절한 해결책은 아니였습니다.</p><p>그렇디면 이를 어떻게 해야할까요? <strong>API 요청에 대한 클래스들을 미리 mock으로 만들 순 없을까요?</strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="beanpostprocessor"><code>BeanPostProcessor</code><a class="hash-link" href="#beanpostprocessor" title="Direct link to heading">​</a></h4><p>스프링에는 <code>BeanPostProcessor</code>라는 것이 있습니다. 이에 대한 자세한 내용은 <a href="/en/2020/07/04/how-does-autowired-work">Spring - @Autowired는 어떻게 동작하는 걸까?</a>을 참고하시면 됩니다.</p><p>정말 다행스럽게도 우리는 공통적으로 <code>open-feign</code>을 활용하여 API 요청을 하고 있습니다. 그렇기에 별도의 <code>BeanPostProcessor</code>를 만들고 만들어진 <code>open-feign</code>을 선별하여 mock으로 바꿔주면 테스트마다 별도의 mock을 만들지 않고 다음과 같이 사용할 수 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//@MockBean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 👈 👈</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">AServiceFeign</span><span class="token plain"> feign</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>물론, 팀에 이 사실을 전파하지 않는다면 어떻게 이게 되지? 라고 할 수 있겠네요...</p><p align="center"><img loading="lazy" src="/img/improve-spring-integration-test/why.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="결과는">결과는...?<a class="hash-link" href="#결과는" title="Direct link to heading">​</a></h3><p>결과는 성공적이였습니다.</p><p><img loading="lazy" alt="Alt to-be" src="/en/assets/images/to-be-c33b91d481e8cde2798bf3af246888c4.png" width="1712" height="1308" class="img_ev3q"></p><p><code>maxHeapSize</code>을 더 늘려보고 테스트해보면 정확한 heap 차이를 알 수 있겠지만, <code>1G</code>이라고 볼 때 <strong>약 5배이상 메모리 절감</strong>을 보여줬고, <code>ApplicationContext</code> 또한 새로 만들지 않았기 때문에 <strong>속도 측면에서도 약 2배 가량 빨라진 것</strong>을 볼 수 있었습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="as-is">AS-IS<a class="hash-link" href="#as-is" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="Alt speed-as-is" src="/en/assets/images/speed-as-is-a9d2b638c27967a25f0a20805d8e5f6c.png" width="1970" height="262" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="to-be">TO-BE<a class="hash-link" href="#to-be" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="Alt speed-to-be" src="/en/assets/images/speed-to-be-02b1330ebcd571f9db9b1ad054f9faa1.png" width="1970" height="262" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="배운점">배운점<a class="hash-link" href="#배운점" title="Direct link to heading">​</a></h3><ol><li>테스트 코드도 비즈니스 코드 작성하듯이 더 많은 고민을 해보자</li><li>부가적인 설정은 그냥 따라오지 않는다 </li><li>보다 나은 테스트 환경을 만들자</li></ol>]]></content:encoded>
            <category>spring-boot</category>
            <category>test</category>
            <category>mock</category>
        </item>
        <item>
            <title><![CDATA[serverless-image-handler]]></title>
            <link>https://heowc.dev/en/2022/04/11/serverless-image-handler</link>
            <guid>2022/04/11/serverless-image-handler</guid>
            <pubDate>Mon, 11 Apr 2022 20:00:00 GMT</pubDate>
            <description><![CDATA[Serverless Image Handler는 AWS에서 제공하는 다양하고 검증된 서비스들을 조합하여 만들어진 솔루션(?)입니다.]]></description>
            <content:encoded><![CDATA[<p>Serverless Image Handler는 AWS에서 제공하는 다양하고 검증된 서비스들을 조합하여 만들어진 솔루션(?)입니다.</p><p>운영하는 서비스에 종속적인 기능들이 아니라면 한번 찾아보면 이미 만들어져 있을 법한 것들이 있기 때문에 한번 서칭해보면 좋을 듯 한데요.
그 예로, 로깅 중앙화, 제가 사용해본 서버리스 이미지 핸들러 등등이 존재합니다.</p><p><a href="https://github.com/aws-solutions/" target="_blank" rel="noopener noreferrer">https://github.com/aws-solutions/</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="아키텍처">아키텍처<a class="hash-link" href="#아키텍처" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="https://raw.githubusercontent.com/aws-solutions/serverless-image-handler/main/architecture.png" alt="Overview" class="img_ev3q">
&lt; 출처: <a href="https://github.com/aws-solutions/serverless-image-handler" target="_blank" rel="noopener noreferrer">https://github.com/aws-solutions/serverless-image-handler</a> &gt;</p><p>해당 기능은 말그대로 <strong>서버리스 환경에서 이미지를 요청시에 즉시 핸들링해주는 솔루션</strong>입니다. 제가 맡고 있는 서비스는 원본 이미지를 다양한 크기로 이미지를 노출시킬 수 있어야 했는데요.
미리 만드는 방법도 있지만 이는 정적이고, 마이그레이션이 다소 불편하며, 관리하는 측면에서 만족스럽지 못 했습니다.</p><p>이것 이외에도 CloudFront + Lambda@Edge를 사용하는 방법도 있으니 참고하시기 바랍니다.</p><ul><li><a href="https://aws.amazon.com/blogs/networking-and-content-delivery/resizing-images-with-amazon-cloudfront-lambdaedge-aws-cdn-blog/" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/blogs/networking-and-content-delivery/resizing-images-with-amazon-cloudfront-lambdaedge-aws-cdn-blog/</a></li><li><a href="https://medium.com/daangn/lambda-edge%EB%A1%9C-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-on-the-fly-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%A6%AC%EC%82%AC%EC%9D%B4%EC%A7%95-f4e5052d49f3" target="_blank" rel="noopener noreferrer">https://medium.com/daangn/lambda-edge%EB%A1%9C-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-on-the-fly-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%A6%AC%EC%82%AC%EC%9D%B4%EC%A7%95-f4e5052d49f3</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="기능">기능<a class="hash-link" href="#기능" title="Direct link to heading">​</a></h3><ol><li>이미지를 다양한 형태로 핸들링할 수 있습니다.<ul><li>해당 기능은 런타임 환경이 Nodejs에서 이루어지며, Nodejs에서 이미지 처리하는 라이브러리인 <code>sharp</code>를 사용하고 있습니다.</li><li>리사이징</li><li>포맷 변경</li><li>퀄리티 변경</li><li>...</li></ul></li><li>이미지 URL 변조<ul><li>만약 우리가 300x300 사이즈의 이미지를 제공하고 이를 어느 누구나 변경해서 요청할 수 있다면 어뷰징 대상이 될 수 있을 것 입니다.</li><li>300x301, 300x302, 300x303, 300x... 😱</li><li><code>signature</code> 라는 파라미터를 받아서 이를 변조하지 못하도록 제공하고 있습니다. (해당 기능은 secret-manager를 통해 별도의 키를 만들어서 사용합니다.)</li></ul></li><li>이미지 자르기, Amazone Rekognition을 활용한 분석 등등을 제공합니다.</li><li>...</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용방법">사용방법<a class="hash-link" href="#사용방법" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="default-방식">Default 방식<a class="hash-link" href="#default-방식" title="Direct link to heading">​</a></h4><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const imageRequest = JSON.stringify({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bucket: "</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">myImageBucket</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key: "</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">myObjectKey</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    edits: { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resize: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            width: ...,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            height: ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const url = `${CloudFrontUrl}/${btoa(imageRequest)}`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value" style="color:#e3116c">`${url}`</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 방식은 url을 json문자열을 base64으로 인코딩해서 전달하는 방식으로 json 안에는 bucket, object key, sharp 정보(?) 등을 포함되어 있습니다.
sharp 관련된 내용은 관련 문서를 참고해서 적용하면 손쉽게 적용할 수 있습니다.</p><ul><li><a href="https://sharp.pixelplumbing.com/" target="_blank" rel="noopener noreferrer">https://sharp.pixelplumbing.com/</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="thumbor-방식">Thumbor 방식<a class="hash-link" href="#thumbor-방식" title="Direct link to heading">​</a></h4><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const url = `${CloudFrontUrl}/filter:format(webp)/${object_key}`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value" style="color:#e3116c">`${url}`</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 방식은 기존 url과 비슷하게 유지하면서 사용할 수 있는 방법 중에 하나로, path 중간에 <code>filters:~~~</code>를 넣어 옵션을 적용할 수 있습니다.</p><ul><li>스펙 참고: <a href="https://docs.aws.amazon.com/solutions/latest/serverless-image-handler/thumbor-filters.html" target="_blank" rel="noopener noreferrer">https://docs.aws.amazon.com/solutions/latest/serverless-image-handler/thumbor-filters.html</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용-후기">사용 후기<a class="hash-link" href="#사용-후기" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="장점">장점<a class="hash-link" href="#장점" title="Direct link to heading">​</a></h4><ol><li><p>CloudFormation으로 제공되기 때문에 손쉽게 구축할 수 있습니다.</p><ul><li>AWS 솔루션의 공통적인 장점이겠지만, cdk를 활용해 CloudFormation으로 빌드하여 제공하고 있습니다.</li></ul></li><li><p>CloudFront를 사용하기 때문에 한번 요청되면 캐시되어 비용 절감이 가능하다.</p><ul><li>CloudFront라는 CDN 서비스를 사용하고 있기 떄문에(사실 누가 CloudFront없이 S3를 바로 붙이겠냐만은...) 응답이 캐싱되어 첫 요청이외에는 비용이 많이 절감됩니다.</li></ul></li><li><p>On the fly 방식이기 때문에 관리가 용이합니다.</p></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="단점">단점<a class="hash-link" href="#단점" title="Direct link to heading">​</a></h4><ol><li><p>람다 자체가 요청/응답에 대한 페이로드가 6MB 제한이 있기 때문에 큰 이미지를 전달할 수 없습니다.</p><ul><li>base64로 인코딩해서 전달하기 때문에 6MB보다 더 작아야 합니다. 😥</li></ul></li><li><p>다소 과할 수 있다.</p><ul><li>어느 것이나 그렇지만 단순하게 쓰고자한다면 조금 과할 수 있다.</li></ul></li><li><p>6.0.0 버전까진 gif 대응이 안된다.</p><ul><li><code>sharp</code>가 <code>0.30.0</code> 버전부터 gif를 지원하기 시작했지만, <code>0.27.0</code> 버전을 사용하고 있기 때문에 대응이 안된다.</li><li>gif를 지원하려면 결국엔 별도 빌드를 거쳐서 사용해야함</li></ul></li></ol><p>결국, 1,3번 단점 때문에 나의 서비스는 api gateway에 별도 path를 추가 및 직접 S3 서비스를 연결해서 사용하고 있습니다.</p>]]></content:encoded>
            <category>aws</category>
            <category>aws-solution</category>
            <category>serverless</category>
            <category>on-the-fly</category>
            <category>image</category>
        </item>
        <item>
            <title><![CDATA[블로그 마이그레이션 (feat. docusaurus)]]></title>
            <link>https://heowc.dev/en/2022/02/22/blog-migrate-to-docusaurus-from-hexo</link>
            <guid>2022/02/22/blog-migrate-to-docusaurus-from-hexo</guid>
            <pubDate>Tue, 22 Feb 2022 13:00:00 GMT</pubDate>
            <description><![CDATA[기존에 사용하던 SSG(Static Site Generator)를 hexo에서 docusaurus으로 변경한 작업을 공유해봅니다.]]></description>
            <content:encoded><![CDATA[<p>기존에 사용하던 SSG(Static Site Generator)를 <a href="https://hexo.io/" target="_blank" rel="noopener noreferrer">hexo</a>에서 <a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">docusaurus</a>으로 변경한 작업을 공유해봅니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="왜-변경했는가">왜 변경했는가?<a class="hash-link" href="#왜-변경했는가" title="Direct link to heading">​</a></h3><p>사실 큰 이유는 없습니다. (잉...?😓) 단지, 테마를 변경하고 싶었으나, 사용하던 기존 테마에 의존성이 강하다 보니 이를 다른 테마로 변경하는 비용과 다른 SSG로 변경하는 비용이 비슷하다고 생각했고 그렇게 다른 SSG 도구(?)들을 찾아보게 되었습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="다른-ssg-도구들">다른 SSG 도구들<a class="hash-link" href="#다른-ssg-도구들" title="Direct link to heading">​</a></h3><p>대표적으로 <a href="https://jamstack.org/generators/" target="_blank" rel="noopener noreferrer">https://jamstack.org/generators/</a> 를 참고하시면 여러 도구들을 찾아볼 수 있는데요. 이왕, 바꾸는김에 jvm 계열 언어로 변경해볼까도 생각했지만 관련 플러그인이나 테마가 너무 적었기에 결국에는 javascript 쪽으로 다시 찾아보게 되었습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="gatsby">Gatsby<a class="hash-link" href="#gatsby" title="Direct link to heading">​</a></h4><blockquote><p><a href="https://www.gatsbyjs.com/" target="_blank" rel="noopener noreferrer">https://www.gatsbyjs.com/</a></p></blockquote><p>요즘 이 도구가 가장 많이 보여 한번 시도를 해봤습니다. 결과적으로 사용하지 않았지만, 다음과 같은 이유로 <code>Gatsby</code>를 사용하지 않았습니다.</p><ol><li><code>React</code>를 깊게 알지 못하기 때문에 오히려 불편함</li><li>단순히 블로그만 원했던 나에겐 커스텀 요소가 많았음</li><li>결국 커스텀을 하기 되면 <code>Gatsby</code> 의존성이 강해질 것이라고 판단</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="docusaurus">Docusaurus<a class="hash-link" href="#docusaurus" title="Direct link to heading">​</a></h4><blockquote><p><a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">https://docusaurus.io/</a></p></blockquote><p>facebook에서 만든 SSG 도구로 개인적으로는 커스텀이 그나마 적었고 쉬웠습니다. 그리고 또 다른 개인적인 이유로는 초록색을 좋아하기 때문에 vue 공식 홈페이지를 모방한(?) <a href="https://github.com/yanm1ng/hexo-theme-vexo" target="_blank" rel="noopener noreferrer">hexo-theme-vexo</a>를 사용했었는데요. docusaurus는 기본적으로 초록색이기 때문에(?) 별다른 테마를 적용하지 않아도 될 만큼 만족스러운 테마였습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="만들어보기">만들어보기<a class="hash-link" href="#만들어보기" title="Direct link to heading">​</a></h3><p><a href="https://docusaurus.io/docs/installation" target="_blank" rel="noopener noreferrer">https://docusaurus.io/docs/installation</a> 를 참고하시면 명령어 한줄로 손쉽게 만들 수 있는데요. 만들어진 기본구조는 공식 홈페이지를 참고하시면 자세히 설명되어 있습니다. </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx create-docusaurus@latest </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">template</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx create-docusaurus@latest website classic</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="변경한-부분">변경한 부분<a class="hash-link" href="#변경한-부분" title="Direct link to heading">​</a></h3><p>hexo로 사용하던 기능은 그대로 옮겨가는게 최종 목표였는데요.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="seo">SEO<a class="hash-link" href="#seo" title="Direct link to heading">​</a></h4><p>대부분의 SSG도구들과 마찬가지로 기본적으로 해주기 때문에 따로 설정하지 않았습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="google-adsense">Google Adsense<a class="hash-link" href="#google-adsense" title="Direct link to heading">​</a></h4><p>플러그인이 존재하긴 했지만, 간단한 기능이였기 때문에 local plugin을 만들었습니다.</p><p>참고) <a href="https://docusaurus.io/docs/api/plugin-methods" target="_blank" rel="noopener noreferrer">https://docusaurus.io/docs/api/plugin-methods</a> / <code>injectHtmlTags</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="google-analytics">Google Analytics<a class="hash-link" href="#google-analytics" title="Direct link to heading">​</a></h4><p>Google Analytics 4 경우에는 <code>gtag</code>를 사용한다고 하여, gtag로 변경했습니다.</p><p>참고) 보다 많은 기능을 제공하며, 기존에 <code>UA-</code>로 시작하는 ID로도 매핑되니 문제없이 적용할 수 있습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="검색-노출">검색 노출<a class="hash-link" href="#검색-노출" title="Direct link to heading">​</a></h4><p>Google, Naver 같은 검색 서비스에 잘 노출이 되도록 meta tag를 추가해야하는데요. <a href="https://docusaurus.io/docs/api/themes/configuration#metadata" target="_blank" rel="noopener noreferrer">themeConfig#metadata</a>를 활용하면 손쉽게 추가할 수 있습니다.</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token literal-property property" style="color:#36acaa">metadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'google-site-verification'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">content</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'XXXXXXX'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'naver-site-verification'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">content</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'XXXXXXX'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="github-action">GitHub Action<a class="hash-link" href="#github-action" title="Direct link to heading">​</a></h4><p>공식 홈페이지를 참고하시면 손쉽게 해결할 수 있습니다. (<a href="https://docusaurus.io/docs/deployment" target="_blank" rel="noopener noreferrer">deployment</a>)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="algolia-검색창">Algolia 검색창<a class="hash-link" href="#algolia-검색창" title="Direct link to heading">​</a></h4><p><code>Docusaurus</code> 문서를 보면서 알게된 사실은 <a href="https://docsearch.algolia.com/" target="_blank" rel="noopener noreferrer">DocSearch</a>라는게 존재하는데 이게 sitemap을 크롤링해서 인덱싱을 해주고 UI까지 만들어줍니다. hexo를 사용할 땐 html, css, script를 전부 직접 만들었었는데... 그럴 필요가 없어졌습니다. 👍 </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="hexo-tag-gdemo"><code>hexo-tag-gdemo</code><a class="hash-link" href="#hexo-tag-gdemo" title="Direct link to heading">​</a></h4><p>제일 난감했던 부분인데요. hexo에서는 <a href="https://hexo.io/docs/tag-plugins" target="_blank" rel="noopener noreferrer">tag</a>라는 기능이 있어 별도의 문법을 통해 커스텀 기능을 추가할 수 있었습니다. 그래서 이를 활용해서 <a href="/en/2018/11/14/introduction-hexo-tag-gdemo"><code>hexo-tag-gdemo</code></a>라는걸 만들었는데... 이를 다른 방법으로 해결해야했습니다. (군데군데 사용하고 있었습니다. 🥲)</p><p>처음에는 plugable하게 <code>remark</code>, <code>reshape</code> 개념을 좀 더 공부해보고 적용해볼까 했지만, 아직은 너무 과하단 생각이들어서 React로 간단하게 <a href="https://docusaurus.io/docs/markdown-features/react" target="_blank" rel="noopener noreferrer">컴포넌트</a>를 만들어 마무리 했습니다.</p><ul><li><a href="https://docusaurus.io/docs/markdown-features/plugins" target="_blank" rel="noopener noreferrer">https://docusaurus.io/docs/markdown-features/plugins</a></li><li><a href="https://docusaurus.io/docs/markdown-features/react" target="_blank" rel="noopener noreferrer">https://docusaurus.io/docs/markdown-features/react</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="그-외">그 외<a class="hash-link" href="#그-외" title="Direct link to heading">​</a></h4><p>그 외에도, disqus 연동이나 경로를 동일하게 잡아주는 등의 자잘한 작업도 있었습니다. 경로 같은 경우는 hexo를 사용할때 년/월/일/prelink를 적용했었는데 docusaurus에서는 아직 관련 기능을 제공하지 않아, slug를 이용하거나 디렉토리 구조를 변경하면 동일하게 가능합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="남은-것">남은 것...<a class="hash-link" href="#남은-것" title="Direct link to heading">​</a></h3><p>사실 필요없기도 한데, docusaurus에서는 블로그 기능 이외에도 doc 기능이 있어 별도의 문서 페이지를 만들 수 있습니다. 이를 활용해 자기소개라거나 포트폴리오나 등등 별도 페이지를 구성해볼 생각입니다.</p>]]></content:encoded>
            <category>blog</category>
            <category>migration</category>
            <category>SSG</category>
            <category>hexo</category>
            <category>docusaurus</category>
        </item>
        <item>
            <title><![CDATA[2021년 개발 회고]]></title>
            <link>https://heowc.dev/en/2021/12/28/2021-develop-retrospection</link>
            <guid>2021/12/28/2021-develop-retrospection</guid>
            <pubDate>Wed, 29 Dec 2021 01:00:00 GMT</pubDate>
            <description><![CDATA[2020년 회고에 이어 2021년에 대한 회고를 하려고 한다.]]></description>
            <content:encoded><![CDATA[<p>2020년 회고에 이어 2021년에 대한 회고를 하려고 한다. </p><p>올해는 상당히 많은 일들이 있었다. 개인적인 일들과 공적인 일들, 좋은 일들과 나쁜 일들... 전부 언급할 순 없지만 개발 관련된 내용만 언급해보고자한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="오픈소스">오픈소스<a class="hash-link" href="#오픈소스" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="Alt 2021-github" src="/en/assets/images/2021-github-55b3bd9aef0993583f4d26ba1c9bffc3.png" width="1528" height="1462" class="img_ev3q"></p><p>사실 전부 다 기여한 것도 아니고, 기여했어도 대부분 typo 수정 정도다... 😆</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="스프링-프로젝트-컨트리뷰션">스프링 프로젝트 컨트리뷰션<a class="hash-link" href="#스프링-프로젝트-컨트리뷰션" title="Direct link to heading">​</a></h4><p>올해는 작년보다 꽤나 많은 오픈소스에 기여를 해왔다. 개인적으로 좋았던 점은 드디어 <strong>스프링 프로젝트에 내 이름 한줄을 넣어보았다는 것이다.</strong> 단순한 기능 추가였기에 살짝(?) 아쉽지만, 그래도 (언제였는지 기억은 안나지만...) 목표로했던 스프링 프로젝트에 이름을 올려본 셈이다.</p><p><a href="https://github.com/spring-projects/spring-security/pull/10278" target="_blank" rel="noopener noreferrer">https://github.com/spring-projects/spring-security/pull/10278</a>
(빨리 5.7.0 GA 됐으면 좋겠네요 🙏🙏)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="아르메리아-컨트리뷰션">아르메리아 컨트리뷰션<a class="hash-link" href="#아르메리아-컨트리뷰션" title="Direct link to heading">​</a></h4><p>그리고 어김없이 아르메리아에 지속적인 기여도 해왔다. 횟수를 거듭할 수록 발전해나가야 하는데... 그런 모습은 보이지 않아서 개인적으로 많이 노력해야겠다고 다짐했다. 그 와중에 조금 나아진게 있다면, 바로, <strong>테스트 작성하기</strong>이다. 메인테이너분들이 항상 테스트를 작성해달라는 needs가 있었고, 덕분에 계속 작성하다보니 그래도 이전보다는 '테스트 좀 작성해본 사람이다' 라고 얘기할 수 있을 것 같다.</p><p>테스트를 작성하면서 느낀 것은 <strong>테스트는 다다익선</strong>이다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="젯브레인-all-product-pack">젯브레인 all-product pack<a class="hash-link" href="#젯브레인-all-product-pack" title="Direct link to heading">​</a></h4><p>이러한 오픈소스 활동 덕분인지, 젯브레인에 오픈소스로서 라이센스를 받을 수 없냐고 문의를 넣자마자 답변으로 라이센스를 받을 수 있었다. 오픈 소스 기여를 장려하기 위해 이와 같은 라이센스가 있다는 걸 알고 있었기에, 어떻게 신청하는지 내가 해온 이력과 함께 문의를 넣었는데, 스피드하게 줘서 굉장히 당황스럽고, 놀랍고, 기뻤다..! 😍</p><p><img loading="lazy" alt="Alt jetbrain-allproduct-pack" src="/en/assets/images/jetbrain-allproduct-pack-d0cf6357e3c725f41d9f8899aa4a5432.png" width="2480" height="1158" class="img_ev3q"></p><p><strong>(사랑해요~ 젯브레인 😍)</strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="hackoberfest">hackoberfest<a class="hash-link" href="#hackoberfest" title="Direct link to heading">​</a></h4><p><img loading="lazy" alt="Alt hacktoberfest-completed" src="/en/assets/images/hacktoberfest-completed-d0bb8baecb97e4d0629794c0e69743b1.png" width="720" height="593" class="img_ev3q"></p><p>19년에 달성하고 20년에는 달성하지 못한 hackoberfest를 올해는 달성했다. 올해는 상품 중에 약간 특이하게 내 이름으로 기증하는(?) 나무를 심을 수 있다고 하여 나무를 선택했다. 🌳</p><p><img loading="lazy" alt="Alt hacktoberfest-gift" src="/en/assets/images/hacktoberfest-gift-123f2bfa0c869591175cdca837b6bfb0.png" width="1998" height="690" class="img_ev3q"></p><p>그리곤 아직까지 연락이 없는데... 뭐 언젠가 연락주지 않을까 싶은... </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="스터디">스터디<a class="hash-link" href="#스터디" title="Direct link to heading">​</a></h3><p>올해는 그토록 바랬던 사내 스터디도 해보았고, 색다른 스터디도 이것저것 해보았다. 현재진행형으로 이펙티브자바 3판을 하고 있는데, 항상 느끼는거지만 이펙티브자바는 여러번 읽어야할 정도로 너무 어려운 책인 것 같다. </p><p>스터디를 해오면서 아쉬운 점이 있다면, 바쁠때 하던 '블로깅하기'를 제대로 참여하지 못했다. 이를 계기로 소홀했던 블로그도 보다 더 작성해보고, 이를 발표(?), 공유(?)하면서 말하는 연습도 하고 싶었지만, 시기가 적절하지 못 했던지, 마음가짐이 삐뚤었던 것 인지...(음?) </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="독서">독서<a class="hash-link" href="#독서" title="Direct link to heading">​</a></h3><p>JPA 프로그래밍, 함께 자라기, 테스트 관련 도서들... (분명 더 읽은 것 같은데 기억이 잘 나질 않는다...🤣)</p><p><strong>가장 좋았던 책은 '함께 자라기' 이다.</strong> 평소의 나의 태도를 다시 돌아보게 되고, 내가 앞으로 어떤 개발자가 되어야할지 고민을 하게된 책이다. 이제 시니어로 넘어가게 되는 년차이다보니 더더욱 와닿았던 책이였음이 분명하다... 👍</p><ul><li><a href="http://www.yes24.com/Product/Goods/67350256" target="_blank" rel="noopener noreferrer">함께자라기</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="블로그">블로그<a class="hash-link" href="#블로그" title="Direct link to heading">​</a></h3><p>올해는 대략 5,6개의 블로그를 작성해보았다. 대다수는 서비스를 개발하면서, 운영하면서 분석해보고, 이를 기록한 것들인데 내년에는 이 보다 디테일하고 면밀히 살펴보며 보다 나은 개발자가 되어야 겠다...! 끝!</p>]]></content:encoded>
            <category>2021</category>
            <category>develop</category>
            <category>retrospection</category>
        </item>
        <item>
            <title><![CDATA[Hibernate NativeQuery HHH-14778 issue (with Postgres)]]></title>
            <link>https://heowc.dev/en/2021/11/27/hibernate-nativequery-bug-with-postgres</link>
            <guid>2021/11/27/hibernate-nativequery-bug-with-postgres</guid>
            <pubDate>Sat, 27 Nov 2021 22:00:00 GMT</pubDate>
            <description><![CDATA[Postgres 환경에서 Hibernate NativeQuery를 사용할 때 생기는 버그를 디버깅해본 나름의 결과(?)를 공유해봅니다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>Postgres 환경에서 Hibernate NativeQuery를 사용할 때 생기는 버그를 디버깅해본 나름의 결과(?)를 공유해봅니다.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="버그-재현">버그 재현<a class="hash-link" href="#버그-재현" title="Direct link to heading">​</a></h4><p>우선, 다음과 같은 테이블이 존재한다고 가정해보자.</p><div class="language-postgresql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-postgresql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">create table message (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id int8 generated by default as identity,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body varchar(255), </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count int8, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    primary key (id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>그리고 다음과 같은 hibernate 네이티브 쿼리를 실행하면 테스트는 실패합니다. 이 버그는 Postgres에서만 발생하는데요.
보다 자세한 내용을 아래서 설명하도록 하겠습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ApplicationTests</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">EntityManager</span><span class="token plain"> entityManager</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">nativeQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">assertThatThrownBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1L</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entityManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createNativeQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"UPDATE message SET count = :count WHERE id = :id"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"count"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hasCauseInstanceOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SQLGrammarException</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hasRootCauseMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">"ERROR: column \"count\" is of type bigint but expression is of type bytea\n"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">"  Hint: You will need to rewrite or cast the expression.\n"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">"  Position: 28"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>위 버그는 하이버네이트 이슈로 몇 달전에 리포팅되어 있으니 참고바랍니다.
(참고: <a href="https://hibernate.atlassian.net/browse/HHH-14778" target="_blank" rel="noopener noreferrer">https://hibernate.atlassian.net/browse/HHH-14778</a>)</p></blockquote><p>위 에러는 <code>query.executeUpdate()</code> 시점에 발생합니다. 어디가 어떻게 문제일까요? 🤔</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="분석">분석<a class="hash-link" href="#분석" title="Direct link to heading">​</a></h4><blockquote><p>ERROR: column \"count\" is of type bigint but expression is of type bytea</p></blockquote><p>메시지를 보면 <code>bytea</code>으로 <code>bigint</code>를 표현할 수 없다(?)고 합니다. 결국 하이버네이트에서 count 파라미터를 <code>bytea</code>으로 인식하여 쿼리를 실행한다고 볼 수 있습니다. (<code>PrepareStatement</code>를 만들게 되는 것이지요.)</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="queryparameterbindingsimpl"><code>QueryParameterBindingsImpl</code><a class="hash-link" href="#queryparameterbindingsimpl" title="Direct link to heading">​</a></h5><p>그렇게 하이버네이트를 분석해보면서 다음과 같은 코드를 찾았습니다.</p><p><img loading="lazy" alt="Alt QueryParameterBindingsImpl" src="/en/assets/images/QueryParameterBindingsImpl-a988bd1cf1d026efde9dd43b62016ff9.png" width="600" height="367" class="img_ev3q"></p><p>쿼리를 분석하고 적절한 타입을 바인딩하기 위해 추론하고 적절한 바인더를 만들기 위해 <code>bindType</code>을 정의하는데요. 결국 적절한 <code>bindType</code>을 찾지 못할 경우, <code>SerializableType.INSTANCE</code>로 초기화하게 됩니다. <code>SerializableType.INSTANCE</code>은 아래와 같은 타입을 갖게됩니다.</p><ul><li>java type: <code>Serializable</code></li><li>sql type: <code>Types.VARBINARY</code> (bytea)</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="varbinarytypedescriptor-basicbinder"><code>VarbinaryTypeDescriptor</code> (<code>BasicBinder</code>)<a class="hash-link" href="#varbinarytypedescriptor-basicbinder" title="Direct link to heading">​</a></h5><p>실제 쿼리에 파라미터들을 바인딩하기 위해 <code>PrepareStatement</code>에 다음과 같이 셋팅을 합니다. 인자로 넘어가는 <code>sqlDescriptor</code>가 <code>VarbinaryTypeDescriptor</code>인 것을 알 수 있습니다.</p><p><img loading="lazy" alt="Alt VarbinaryTypeDescriptor" src="/en/assets/images/VarbinaryTypeDescriptor-19d58cae80c49c6295fc77e1532aa966.png" width="600" height="353" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="pgpreparestatement"><code>PgPrepareStatement</code><a class="hash-link" href="#pgpreparestatement" title="Direct link to heading">​</a></h5><p><a href="https://github.com/pgjdbc/pgjdbc/blob/release/42.2/pgjdbc/src/main/java/org/postgresql/jdbc/PgPreparedStatement.java#L189...L268" target="_blank" rel="noopener noreferrer">PgPrepareStatement</a>는 전달받은 <code>sqlType</code>으로 케이스별로 파라미터에 반영합니다. 이러한 과정때문에 테스트가 깨진 것인데요.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setNull</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> parameterIndex</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> sqlType</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">SQLException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> oid</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sqlType</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token class-name">Types</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SQLXML</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        oid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Oid</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">XML</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token class-name">Types</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">INTEGER</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        oid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Oid</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">INT4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>그렇다면, mysql에서는 어떻게 처리하길래 문제가 되지 않을까요?</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setNull</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> parameterIndex</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> sqlType</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">SQLException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">checkClosed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getConnectionMutex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">PreparedQuery</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getQueryBindings</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setNull</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">getCoreParameterIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">parameterIndex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// MySQL ignores sqlType</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>mysql의 <a href="https://github.com/mysql/mysql-connector-j/blob/release/8.0/src/main/user-impl/java/com/mysql/cj/jdbc/ClientPreparedStatement.java#L1671...L1676" target="_blank" rel="noopener noreferrer">ClientPreparedStatement</a>를 살펴보면 다음과 같이 <code>sqlType</code>을 무시하는 것을 알 수 있었습니다. 🤔</p><blockquote><p>참고로 <code>ServerPreparedStatement</code>도 <code>ClientPreparedStatement</code>를 상속받았기 때문에 동일한 동작을 합니다.</p></blockquote><h5 class="anchor anchorWithStickyNavbar_LWe7" id="분석-정리">분석 정리<a class="hash-link" href="#분석-정리" title="Direct link to heading">​</a></h5><p>결국, 하이버네이트에서 <strong>각 드라이버의 호환성 문제로 인한 버그</strong>라고 볼 수 있을 것 같습니다. (개인적으로는 postgres가 더 정교한 것 같습니다만...) 그런데 한편으로는 HQL같은 엔티티로 쿼리를 작성하면 타입 추론이 가능하지만, 네이티브 쿼리는 어떻게 가능할까 라는 생각이 들기도 합니다.</p><p>이렇더라도 우리는 버그를 퇴치(?)를 해야하니 해결방법에 대해 알아보도록 하겠습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="해결방법">해결방법<a class="hash-link" href="#해결방법" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-namedquery로-변경">1. NamedQuery로 변경<a class="hash-link" href="#1-namedquery로-변경" title="Direct link to heading">​</a></h5><p>우리는 다음과 같이 <code>NamedQuery</code>로 변경하여, 이를 해결할 수 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@NamedQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"fixedCount"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"UPDATE Message m SET m.count = :count WHERE m.id = :id"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Message</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1L</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> entityManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createNamedQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"fixedCount"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &lt;--</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"count"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-네이티브-쿼리를-사용하되-파라미터를-typedparametervalue를-사용하여-타입-추론이-가능하도록-변경">2. 네이티브 쿼리를 사용하되, 파라미터를 <code>TypedParameterValue</code>를 사용하여 타입 추론이 가능하도록 변경<a class="hash-link" href="#2-네이티브-쿼리를-사용하되-파라미터를-typedparametervalue를-사용하여-타입-추론이-가능하도록-변경" title="Direct link to heading">​</a></h5><p><code>setParameter</code>를 살펴보다가 <code>TypedParameterValue</code>를 사용하면 타입을 추론이 가능하다는 것을 알게되었습니다. (<a href="https://github.com/hibernate/hibernate-orm/blob/5.5/hibernate-core/src/main/java/org/hibernate/query/internal/AbstractProducedQuery.java#L449...L462" target="_blank" rel="noopener noreferrer">AbstractProducedQuery</a>)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1L</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entityManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createNativeQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"UPDATE message SET count = :count WHERE id = :id"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"count"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">TypedParameterValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">LongType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">INSTANCE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &lt;--</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-네이티브-쿼리를-사용하되-쿼리에서-강제-캐스팅을-한다">3. 네이티브 쿼리를 사용하되, 쿼리에서 강제 캐스팅을 한다.<a class="hash-link" href="#3-네이티브-쿼리를-사용하되-쿼리에서-강제-캐스팅을-한다" title="Direct link to heading">​</a></h5><p>이미 우리는 <code>bytea</code>로 바인딩되다는 것을 알고 있습니다. 이를 인지하고 있다면 <code>cast()</code>함수를 통해 해결할 수 있습니다. 하지만, 이는 버그가 수정되거나 하이버네이트 내부 로직에 의존하는 것이기 때문에 <strong>좋은 방법은 아닌 듯 합니다.</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1L</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Query</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        entityManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createNativeQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"UPDATE message SET count = cast(cast(:count as text) as bigint) WHERE id = :id"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"count"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">TypedParameterValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">LongType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">INSTANCE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="4-preparestatement에-직접-액세스하기">4. <code>PrepareStatement</code>에 직접 액세스하기<a class="hash-link" href="#4-preparestatement에-직접-액세스하기" title="Direct link to heading">​</a></h5><p>하이버네이트를 사용하는 경우, <code>EntityManager</code>에서 <code>Session</code>을 꺼내어 <code>Connection</code>을 직접 핸들링할 수 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Session</span><span class="token plain"> session </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> entityManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">unwrap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">doWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">connection</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>그러므로 우리는 <code>PrepareStatement</code>에 직접 타입을 기입할 수 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">doWork</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">connection </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">PreparedStatement</span><span class="token plain"> ps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">prepareStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"UPDATE message SET count = ? WHERE id = ?"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setNull</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Types</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">INTEGER</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLong</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>해당 코드들은 <a href="https://github.com/heowc-scratch/hibernate_postgres_HHH-14778" target="_blank" rel="noopener noreferrer">hibernate_postgres_HHH-14778</a>에서 확인할 수 있습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h4><ul><li><a href="https://hibernate.atlassian.net/browse/HHH-14778" target="_blank" rel="noopener noreferrer">https://hibernate.atlassian.net/browse/HHH-14778</a></li><li><a href="https://github.com/heowc-scratch/hibernate_postgres_HHH-14778" target="_blank" rel="noopener noreferrer">https://github.com/heowc-scratch/hibernate_postgres_HHH-14778</a></li><li><a href="https://github.com/hibernate/hibernate-orm" target="_blank" rel="noopener noreferrer">https://github.com/hibernate/hibernate-orm</a></li><li><a href="https://github.com/mysql/mysql-connector-j" target="_blank" rel="noopener noreferrer">https://github.com/mysql/mysql-connector-j</a></li><li><a href="https://github.com/pgjdbc/pgjdbc" target="_blank" rel="noopener noreferrer">https://github.com/pgjdbc/pgjdbc</a></li></ul>]]></content:encoded>
            <category>hibernate</category>
            <category>native-query</category>
            <category>postgres</category>
            <category>orm</category>
            <category>bug</category>
        </item>
        <item>
            <title><![CDATA[ElastiCache Maintenance]]></title>
            <link>https://heowc.dev/en/2021/07/22/elasticache-maintenance</link>
            <guid>2021/07/22/elasticache-maintenance</guid>
            <pubDate>Thu, 22 Jul 2021 18:00:00 GMT</pubDate>
            <description><![CDATA[최근 AWS의 Redis Service인 ElastiCache를 사용하면서 겪었던 유지관리 기간(Maintenance)에 대한 이슈 해결과정을 적어보고자 합니다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>최근 AWS의 Redis Service인 ElastiCache를 사용하면서 겪었던 유지관리 기간(Maintenance)에 대한 이슈 해결과정을 적어보고자 합니다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maintenance-이란">Maintenance 이란?<a class="hash-link" href="#maintenance-이란" title="Direct link to heading">​</a></h3><blockquote><p><a href="https://aws.amazon.com/ko/elasticache/elasticache-maintenance/" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/ko/elasticache/elasticache-maintenance/</a></p></blockquote><p>보안 패치나 안정성을 위해 이용자가 지정한 시기에 노드를 교체하거나 클러스터가 다운되거나 특정 샤드의 노드들이 변경됩니다. 문서상에선 몇 초의 다운타임이 발생한다고 하는데요.</p><p><em>제가 경험한 바로는 약간 틀린 점(?)이 있었습니다.</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="환경">환경<a class="hash-link" href="#환경" title="Direct link to heading">​</a></h3><ul><li>Redis Server: AWS ElastiCache Cluster</li><li>Redis Client: lettuce <code>5.3.7</code></li></ul><p>※ lettuce의 경우, 사용하고 있는 버전(<code>5.1.1</code>)에서 버그가 있어 <code>5.3.7</code>으로 변경했었는데요. 자세한 내용은 아래서 다시 설명드리겠습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="maintenance-대응하기">Maintenance 대응하기<a class="hash-link" href="#maintenance-대응하기" title="Direct link to heading">​</a></h3><p>Maintenance는 요일과 시간대(1시간 간격)를 지정해두면, AWS에서 event 알림과 함께 Maintenance 스케줄을 잡습니다. (물론, 갑작스럽게 스케줄이 잡히고 그러진 않습니다.) 이 때, 클러스터가 내려가거나 샤드의 노드들이 변경되거나 재배치하게 되는데요. lettuce client에서는 <a href="https://lettuce.io/core/release/api/io/lettuce/core/cluster/models/partitions/Partitions.html" target="_blank" rel="noopener noreferrer">각 노드들을 캐싱하고 있는 정보들(Partitions)</a>을 리로드해야 하기 때문에 이에 맞는 <a href="https://lettuce.io/core/release/reference/#redis-cluster.refreshing-the-cluster-topology-view" target="_blank" rel="noopener noreferrer">추가 옵션</a>이 필요합니다.</p><p><code>spring-data-redis</code>를 사용한다면, 다음과 같이 적용할 수 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">LettuceClientConfiguration</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">lettuceClientConfiguration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">ClusterClientOption</span><span class="token plain"> clientOptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">ClusterClientOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">topologyRefreshOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                    </span><span class="token class-name">ClusterTopologyRefreshOptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">enablePeriodicRefresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &lt;--</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">enableAllAdaptiveRefreshTriggers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &lt;--</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">timeoutOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">LettuceClientConfiguration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">commandTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shutdownTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">clientOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">clientOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="enableperiodicrefresh">enablePeriodicRefresh(...)<a class="hash-link" href="#enableperiodicrefresh" title="Direct link to heading">​</a></h4><p>주기적으로 connection을 갱신해주는 옵션 활성화와 기간을 지정할 수 있습니다. 기간은 기본 60초입니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="enablealladaptiverefreshtriggers">enableAllAdaptiveRefreshTriggers()<a class="hash-link" href="#enablealladaptiverefreshtriggers" title="Direct link to heading">​</a></h4><p><a href="https://lettuce.io/core/release/api/io/lettuce/core/cluster/ClusterTopologyRefreshOptions.RefreshTrigger.html" target="_blank" rel="noopener noreferrer">문제가 될만한 operation</a>이 발생한다면 즉시 connection을 갱신해주는 이벤트를 트리거 시켜주는 설정입니다. 해당 기능은 rate-limit 같은(?) 처리가 되어 있어서 퍼포먼스에 문제가 되지 않습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="재현해보기">재현해보기<a class="hash-link" href="#재현해보기" title="Direct link to heading">​</a></h3><p>aws에서는 <code>aws-cli</code>를 통해 <a href="https://docs.aws.amazon.com/cli/latest/reference/elasticache/test-failover.html" target="_blank" rel="noopener noreferrer"><code>test-failover</code></a>라는 커맨드를 제공해주고 있으며, 이를 통해 위 현상을 재현해볼 수 있습니다.</p><blockquote><p>해당 기능은 첫 시도 기준 5회의 제한을 두고 있기 때문에 무분별한 시도는 안하는게 좋습니다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="깔끔하지-않은-결론">깔끔하지 않은 결론...<a class="hash-link" href="#깔끔하지-않은-결론" title="Direct link to heading">​</a></h3><p><code>aws-cli</code>를 통해 <code>test-failover</code>를 실행하면 클러스터가 내려갑니다. 해당 갭은 1분 정도 되는데요. 위 문서에서 얘기한 <strong>몇 초의 다운타임보다 많은 시간이 소요</strong>됨을 알 수 있습니다. 이를 해결할 방법은 딱히 없는 걸로 보여 '서비스 운영에서 있어 다운타임을 최소화 했다'라는 것에 의의를 두고 해당 이슈를 마무리 짓기로 했습니다. 기존에서는 10분정도의 다운타임이 발생했습니다.</p><p>다만, 클러스터가 내려가는게 아닌 샤드의 노드들이 변경되거나 재배치되는 것은 다운타임이 아예 없었습니다.</p><blockquote><p>혹시 다른 방법이 있으면 공유해주시면 감사하겠습니다 :)</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="마무리">마무리...?!<a class="hash-link" href="#마무리" title="Direct link to heading">​</a></h3><p>옵션을 추가하고 배포를 몇 번 해보니, 배포 중 다음 에러로그와 함께 애플리케이션 서버가 내려가지 않는 현상이 발생합니다. 해당 버전은 lettuce <code>5.1.1</code>에서 발생했습니다.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: Failed to submit a listener notification task. Event loop shut down?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">java.util.concurrent.RejectedExecutionException: event executor terminated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.util.concurrent.SingleThreadEventExecutor.reject(SingleThreadEventExecutor.java:845)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.util.concurrent.SingleThreadEventExecutor.offerTask(SingleThreadEventExecutor.java:328)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.util.concurrent.SingleThreadEventExecutor.addTask(SingleThreadEventExecutor.java:321)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.util.concurrent.SingleThreadEventExecutor.execute(SingleThreadEventExecutor.java:756)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.util.concurrent.DefaultPromise.safeExecute(DefaultPromise.java:768)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:432)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.util.concurrent.DefaultPromise.addListener(DefaultPromise.java:162)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.DefaultChannelPromise.addListener(DefaultChannelPromise.java:95)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at io.netty.channel.DefaultChannelPromise.addListener(DefaultChannelPromise.java:30)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>jstack</code>을 확인해보니, 해당 애플리케이션 서버에 thread 중 <code>WAITING</code>이 존재하는 것을 알 수 있었습니다. 해당 stack은 shutdown시에 쓰레드 경합이 발생하면서 생긴 문제로 보였는데요. (아쉽게도... 로그가 유실되어 첨부하지 못 했습니다.) 이는 lettuce 저장소 <a href="https://github.com/lettuce-io/lettuce-core/issues/989" target="_blank" rel="noopener noreferrer">issue#989</a>를 통해 바로 해결할 수 있었습니다. </p><p>해당 이슈의 커밋 로그를 잠깐 살펴보자면, eventloop가 활성화되어 있는지 여부를 판단하는 <a href="https://github.com/lettuce-io/lettuce-core/commit/75506b8489094b7ad584a3da7e5e7c9eaec5bd39#diff-786974f002247796101b7c31ad0a26c363adc3c02df789d8981c4e2455c52ebaR262" target="_blank" rel="noopener noreferrer">방어코드</a>가 추가된 것을 알 수 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isEventLoopActive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">EventExecutorGroup</span><span class="token plain"> eventExecutors </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> clientResources</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">eventExecutorGroup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">eventExecutors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isShuttingDown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>저희는 이것을 <code>5.2.0</code>에 해결된 것으로 보였으나, 그냥 마이너 최신버전(<code>5.3.7</code>)까지 올려서 테스트 해보기로 했습니다. 다행히 배포시에 위 현상이 해결되어 안정적인 스무스하게(?) 배포할 수 있었습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><ul><li><a href="https://aws.amazon.com/ko/elasticache/elasticache-maintenance/" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/ko/elasticache/elasticache-maintenance/</a></li><li><a href="https://lettuce.io/core/release/reference/#redis-cluster.refreshing-the-cluster-topology-view" target="_blank" rel="noopener noreferrer">https://lettuce.io/core/release/reference/#redis-cluster.refreshing-the-cluster-topology-view</a></li><li><a href="https://docs.aws.amazon.com/cli/latest/reference/elasticache/test-failover.html" target="_blank" rel="noopener noreferrer">https://docs.aws.amazon.com/cli/latest/reference/elasticache/test-failover.html</a></li><li><a href="https://github.com/lettuce-io/lettuce-core/issues/989" target="_blank" rel="noopener noreferrer">https://github.com/lettuce-io/lettuce-core/issues/989</a></li></ul>]]></content:encoded>
            <category>elasticache</category>
            <category>redis</category>
            <category>maintenance</category>
            <category>aws</category>
        </item>
        <item>
            <title><![CDATA[Spring WebSocket (with STOMP)]]></title>
            <link>https://heowc.dev/en/2021/07/15/spring-websocket-with-stomp</link>
            <guid>2021/07/15/spring-websocket-with-stomp</guid>
            <pubDate>Thu, 15 Jul 2021 18:00:00 GMT</pubDate>
            <description><![CDATA[최근 웹소켓을 활용한 서비스를 개발하면서 알게된 내용을 간략하게나마 적어봅니다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>최근 웹소켓을 활용한 서비스를 개발하면서 알게된 내용을 간략하게나마 적어봅니다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="websocket-이란">WebSocket 이란?<a class="hash-link" href="#websocket-이란" title="Direct link to heading">​</a></h3><p>웹소켓은 보통 http, long polling, sse와 비교되어 언급되는 기술 중 하나입니다. <code>WebSocket</code>을 검색해보면 위키피디아에 다음과 같이 기록되어 있습니다.</p><blockquote><p>웹소켓(WebSocket)은 하나의 TCP 접속에 전이중 통신 채널을 제공하는 컴퓨터 통신 프로토콜이다.
<a href="https://ko.wikipedia.org/wiki/%EC%9B%B9%EC%86%8C%EC%BC%93" target="_blank" rel="noopener noreferrer">https://ko.wikipedia.org/wiki/%EC%9B%B9%EC%86%8C%EC%BC%93</a></p></blockquote><p>전이중 통신 채널을 제공한다는 말은 무엇일까요? 조금 더 읽어보면 다음과 같은 문장이 있습니다. </p><blockquote><p>웹소켓 프로토콜은 HTTP 폴링과 같은 반이중방식에 비해 더 낮은 부하를 사용하여 웹 브라우저(또는 다른 클라이언트 애플리케이션)과 웹 서버 간의 통신을 가능케...</p></blockquote><p>단순 HTTP 통신은 반이중방식이라고 적혀있는데요. 우리가 흔히 사용하는 HTTP 통신은 요청을 해야 그것에 대한 응답을 전달받을 수 있습니다. 이를 단방향통신이라고도 부르기도 하지요. 반면에 <strong>WebSocket은 양방향 통신으로 요청을 하지 않아도 서버에서 응답을 전달할 수 있습니다.</strong> 뿐만 아니라, 서버와 클라이언트는 양방향 통신을 하기 위해 서로 연결을 유지하고 있기 때문에 여러가지 장점이 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-websocket-with-stomp">Spring WebSocket with Stomp<a class="hash-link" href="#spring-websocket-with-stomp" title="Direct link to heading">​</a></h3><p><strong>웹소켓은 현재 텍스트와 바이너리 형태의 메시지를 지원합니다.</strong> (이외에도 확장성을 염두해두고 있기도 합니다.) <a href="https://datatracker.ietf.org/doc/html/rfc6455#section-1.2" target="_blank" rel="noopener noreferrer">RFC 6455#section-1.2</a> 문서를 보면 TCP frame에 Opcode라는 값으로 메시지 타입을 결정하는데요. Spring에서는 이를 사용자가 처리할 수 있도록 <code>WebSocketHandler</code> 인터페이스 하위에 <code>TextWebSocketHandler</code>, <code>BinaryWebSocketHandler</code>를 제공합니다. 하지만, 본문에 대한 포맷이라던지(plain text? json? xml?) 정의된 것이 하나도 없습니다. 다르게 말하면 자유롭게 정의할 수 있다는 뜻이죠. </p><p>그렇기때문에 때로는 이러한 정의를 내리는데 상당히 많은 시간을 소비하기도 합니다. (이러한 과정은 우리가 이벤트기반 시스템을 설계할 때 메시지를 정의하는 것과 비슷하다고 볼 수 있을 것 같네요.) <strong>Spring에서는 공식적으로 Stomp를 상위 레벨의 프로토콜로 사용할 수 있도록 지원하고 있습니다.</strong> Stomp란 텍스트 지향 메시징 프로토콜로 여러 방면에서 이를 사용하고 있습니다.</p><ul><li><a href="https://stomp.github.io" target="_blank" rel="noopener noreferrer">https://stomp.github.io</a></li><li><a href="https://stomp.github.io/implementations.html" target="_blank" rel="noopener noreferrer">https://stomp.github.io/implementations.html</a></li></ul><p>Stomp는 very simple 이라는 강점을 내세울 수 있을 정도로 단순하며 사용하가 쉽습니다. 형태는 다음과 같습니다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">COMMAND</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">header1:value1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">header2:value2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Body^@</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="메세지-처리-흐름">메세지 처리 흐름<a class="hash-link" href="#메세지-처리-흐름" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/images/message-flow-simple-broker.png" alt="img message-flow" class="img_ev3q"></p><p><em><a href="https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/websocket.html#websocket-stomp-message-flow" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/websocket.html#websocket-stomp-message-flow</a></em></p><p>공식 문서에 있는 그림으로, 한 방(?)에 정리할 수 있습니다. </p><ol><li>클라이언트로 부터 header와 payload 담은 메시지를 전달받으면</li><li>request channel (InboundChannel)에서 이를 알맞은 MessageHandler에 전달합니다.</li><li>애노테이션 기반의 로직 처리가 포함되는 경우, <code>SimpAnnotationMethodMessageHandler</code>를 통해 <code>@Controller</code>를 호출합니다.</li><li>로직 처리 후, 반환된 값을 기반으로 메시지를 만들어 broker channel에 전달합니다.</li><li>broker channel은 <code>SimpleBrokerMessageHandler</code>를 통해 구독자들을 가져옵니다.</li><li>그리고 각각의 구독자들에게 response channel (OutboundChannel)로 메시지를 전달합니다.</li></ol><p>하면서 편했던 점은 날 것(?)에 경우, 별도 처리해줘야 할 부분이 상당히 많았겠지만 이를 프레임워크 레벨에서 Stomp와 결합해 상당히 많은 것을 지원해주고있어 단순 command만으로 손쉽게 처리할 수 있다는 점입니다.</p><blockquote><p>CONNECT, DISCONNECT, SUBSCRIBE, SEND, ....</p><ul><li>커넥션 연결/끊기,</li><li>구독을 하게된 유저들을 별도로 관리할 필요가 없다는 점, (물론 필요할 수도 있음)</li><li>메시지 전송</li></ul></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="튜닝-포인트">튜닝 포인트<a class="hash-link" href="#튜닝-포인트" title="Direct link to heading">​</a></h3><p>각 채널에는 <strong>(cpu processor * 2) 갯수 만큼의 쓰레드를 가진 쓰레드풀</strong>을 기본적으로 가집니다. blocking IO가 거의 없는 경우라면 기본설정으로도 충분하다고 생각합니다만, <a href="https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/websocket.html#websocket-stomp-configuration-performance" target="_blank" rel="noopener noreferrer">문서에도 나와있듯이</a> blocking io가 많은 경우에는 적절한 설정을 해야합니다. 이번에 개발한 서비스의 경우는 거의 모든 메시지마다 외부 api를 호출하기 때문에 stress test를 통해 적정 수치를 맞추어 사용하고 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="배포전략">배포전략<a class="hash-link" href="#배포전략" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="https://www.redhat.com/cms/managed-files/blue-green-deployment-model.gif" alt="img blue-green-deployment" class="img_ev3q"></p><p>본 서비스를 기존 서비스랑 다르게(rolling 배포) 약간 변형된 <a href="https://www.redhat.com/ko/topics/devops/what-is-blue-green-deployment" target="_blank" rel="noopener noreferrer">blue/green 배포전략</a>을 사용하고 있습니다. 웹소켓은 결국 커넥션을 연결하고 있고 배포를 하게되면 기존 애플리케이션이 내려가면서 커넥션이 끊기게 됩니다. 그럼 중간 로드밸런서를 통해 다른 애플리케이션에 다시 커넥션을 맺고자 시도할텐데요. 이를 rolling 배포로 하게되면 최악의 경우, 서버 댓수만큼 커넥션을 연결/끊기를 반복할 것 입니다. 그렇기 떄문에 새배포 버전에 트래픽을 스위칭하는 방식의 배포 전략인 <strong>blue/green을 사용하는 것이 사용자 경험 측면에서 좋을 수 있습니다.</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><ul><li><a href="https://ko.wikipedia.org/wiki/%EC%9B%B9%EC%86%8C%EC%BC%93" target="_blank" rel="noopener noreferrer">https://ko.wikipedia.org/wiki/%EC%9B%B9%EC%86%8C%EC%BC%93</a></li><li><a href="https://datatracker.ietf.org/doc/html/rfc6455" target="_blank" rel="noopener noreferrer">https://datatracker.ietf.org/doc/html/rfc6455</a></li><li><a href="https://stomp.github.io/implementations.html" target="_blank" rel="noopener noreferrer">https://stomp.github.io/implementations.html</a></li><li><a href="https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/websocket.html" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-framework/docs/4.3.x/spring-framework-reference/html/websocket.html</a></li><li><a href="https://www.redhat.com/ko/topics/devops/what-is-blue-green-deployment" target="_blank" rel="noopener noreferrer">https://www.redhat.com/ko/topics/devops/what-is-blue-green-deployment</a></li></ul>]]></content:encoded>
            <category>spring</category>
            <category>websocket</category>
            <category>stomp</category>
        </item>
        <item>
            <title><![CDATA[MySQL 인덱스 통계]]></title>
            <link>https://heowc.dev/en/2021/06/17/mysql-index-statistics</link>
            <guid>2021/06/17/mysql-index-statistics</guid>
            <pubDate>Thu, 17 Jun 2021 13:00:00 GMT</pubDate>
            <description><![CDATA[쿼리를 실행시에 예상했던 인덱스를 타지 않는 현상을 알아보고자 합니다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>쿼리를 실행시에 예상했던 인덱스를 타지 않는 현상을 알아보고자 합니다.</p></blockquote><p>다음과 같은 테이블이 있다고 가정해보자.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="테이블-생성">테이블 생성<a class="hash-link" href="#테이블-생성" title="Direct link to heading">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">payment_history</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">bigint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">unsigned</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AUTO_INCREMENT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- 결제 id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">user_id</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">varchar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- 유저 정보</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">status</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">varchar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- 결제 상태</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">idx_user_id</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">user_id</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">idx_user_id_status</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">user_id</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">status</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="explain">explain<a class="hash-link" href="#explain" title="Direct link to heading">​</a></h3><p>그리고 다음과 같은 쿼리를 실행한다면 어떤 인덱스를 타게 될까요?</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain">    </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">payment_history</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain">   </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">user_id</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'AAAAAAA'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">AND</span><span class="token plain">     </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">status</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Completed'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>다음과 같은 실행 계획을 예상해볼 수 있습니다.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">... | possible_keys                   | key                | ... | rows  | ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | idx_user_id, idx_user_id_status | idx_user_id_status | ... | 17714 | ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>하지만 경우에 따라, 이는 다른 실행 계획 결과가 도출될 수 있습니다. </p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">... | possible_keys                   | key                | ... | rows  | ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | idx_user_id, idx_user_id_status | idx_user_id        | ... | 16670 | ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>그 이유는 <strong>옵티마이저가 예상과 다른 인덱스를 탐색</strong>했기 때문입니다. 옵티마이저는 최적의 실행계획을 세우기 위해 인덱스 통계 정보를 의존하게 되는데, MySQL 같은 경우는 <a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-persistent-stats.html#innodb-index-stats-table" target="_blank" rel="noopener noreferrer"><code>mysql.innodb_index_stats</code></a> 라는 테이블에서 해당 정보를 얻을 수 있습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="innodb_index_stats">innodb_index_stats<a class="hash-link" href="#innodb_index_stats" title="Direct link to heading">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain">    </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">mysql.innodb_index_stats</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain">   </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">database_name</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'test'</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">AND</span><span class="token plain">     </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">table_name</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'payment_history'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">... | table_name      | index_name         | ... | stat_name    | stat_value | ... | stat_description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------------------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | PRIMARY            | ... | n_diff_pfx01 |        ... | ... | id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | PRIMARY            | ... | n_leaf_pages |        ... | ... | Number of leaf pages in the index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | PRIMARY            | ... | size         |        ... | ... | Number of pages in the index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | idx_user_id        | ... | n_diff_pfx01 |  1,360,401 | ... | id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | idx_user_id        | ... | n_diff_pfx02 | 17,432,752 | ... | user_id,id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | idx_user_id        | ... | n_leaf_pages |     66,084 | ... | Number of leaf pages in the index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | idx_user_id        | ... | size         |     75,904 | ... | Number of pages in the index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | idx_user_id_status | ... | n_diff_pfx01 |  1,566,677 | ... | user_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | idx_user_id_status | ... | n_diff_pfx02 |  1,660,688 | ... | user_id,status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | idx_user_id_status | ... | n_diff_pfx03 | 15,970,551 | ... | user_id,status,id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | idx_user_id_status | ... | n_leaf_pages |     81,288 | ... | Number of leaf pages in the index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... | payment_history | idx_user_id_status | ... | size         |     93,540 | ... | Number of pages in the index</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>여기서 각 인덱스에 대한 <code>stat_value</code>를 보고 대략적으로 판단할 수 있는건, 위 쿼리에서 <code>idx_user_id</code>를 탐색하는 것이 보다 빠르다는 것을 기대할 수 있을 것 같습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="인덱스-통계-구성법">인덱스 통계 구성법<a class="hash-link" href="#인덱스-통계-구성법" title="Direct link to heading">​</a></h3><ul><li><a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-performance-optimizer-statistics.html" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/refman/5.6/en/innodb-performance-optimizer-statistics.html</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-innodb_stats_persistenton">1. innodb_stats_persistent=ON<a class="hash-link" href="#1-innodb_stats_persistenton" title="Direct link to heading">​</a></h4><p><a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_stats_persistent" target="_blank" rel="noopener noreferrer">innodb_stats_persistent</a>은 MySQL 5.6.2에서 생겼으며, 5.6.6부터 기본값이 ON입니다.</p><p><a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_stats_auto_recalc" target="_blank" rel="noopener noreferrer">innodb_stats_auto_recalc</a>은 자동 계산 여부를 지정하는 옵션입니다. (기본값은 ON) 테이블의 10% 변경이 있을 때 재계산을 하는데, 아쉽게도 이 값은 하드코딩 되어있어 변경할 수 없습니다. (<a href="https://github.com/mysql/mysql-server/blob/5.6/storage/innobase/row/row0mysql.cc#L1106" target="_blank" rel="noopener noreferrer">mysql/mysql-server</a>)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-innodb_stats_persistentoff">2. innodb_stats_persistent=OFF<a class="hash-link" href="#2-innodb_stats_persistentoff" title="Direct link to heading">​</a></h4><p><a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_stats_on_metadata" target="_blank" rel="noopener noreferrer">innodb_stats_on_metadata</a>을 ON하면 다음 쿼리시 재계산을 할 수 있습니다. (기본값은 OFF)</p><ul><li>SHOW TABLE STATUS</li><li>SHOW INDEX</li><li>INFORMATION_SCHEMA.TABLES</li><li>INFORMATION_SCHEMA.STATISTICS</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-analyze-table-table_name">3. ANALYZE TABLE {table_name}<a class="hash-link" href="#3-analyze-table-table_name" title="Direct link to heading">​</a></h4><p><a href="https://dev.mysql.com/doc/refman/5.6/en/analyze-table.html" target="_blank" rel="noopener noreferrer">ANALYZE TABLE {table_name}</a></p><ul><li><p>인덱스 통계 테이블을 재계산합니다.</p></li><li><p>하지만 역시 막쓰는게 아닌 것이... 너무 느리기도 하고 테이블 read lock이 걸리기 때문에 조심해서 사용해야 합니다</p><blockquote><p>During the analysis, the table is locked with a read lock for InnoDB and MyISAM.</p></blockquote></li><li><p>또한 재계산한다고 좋아진다는 보장이 없습니다. 결국 랜덤으로 샘플링을 하기 때문에 좋아질 수도, 나빠질 수도 있습니다.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="그렇다면-어떻게-해야할까">그렇다면 어떻게 해야할까?<a class="hash-link" href="#그렇다면-어떻게-해야할까" title="Direct link to heading">​</a></h3><ul><li>테이블 별로 <code>innodb_stats_persistent_sample_pages</code>를 조절하자</li><li>적절히 <code>ANALYZE TABLE</code>를 사용하자</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><ul><li><a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-performance-optimizer-statistics.html" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/refman/5.6/en/innodb-performance-optimizer-statistics.html</a></li><li><a href="https://dev.mysql.com/doc/refman/5.6/en/innodb-analyze-table-complexity.html" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/refman/5.6/en/innodb-analyze-table-complexity.html</a></li></ul>]]></content:encoded>
            <category>mysql</category>
            <category>index</category>
            <category>index-statistics</category>
        </item>
        <item>
            <title><![CDATA[Amazon Linux에서 /var/log가 꽉차는 이슈]]></title>
            <link>https://heowc.dev/en/2021/05/23/amazone-linux-log-issue</link>
            <guid>2021/05/23/amazone-linux-log-issue</guid>
            <pubDate>Sun, 23 May 2021 18:00:00 GMT</pubDate>
            <description><![CDATA[개발 초기, 개발서버에서 /var/log에 상당히 많은 데이터가 쌓이면서 골치가 아픈 적이 있다. 리눅스에 대해 많은 지식이 없는 상황에서 다행히 팀원의 도움으로 빨리 해결 방법을 알게 되었지만, 모르는 내용이 있어 이를 블로깅하여 기록해두려 한다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>개발 초기, 개발서버에서 <code>/var/log</code>에 상당히 많은 데이터가 쌓이면서 골치가 아픈 적이 있다. 리눅스에 대해 많은 지식이 없는 상황에서 다행히 팀원의 도움으로 빨리 해결 방법을 알게 되었지만, 모르는 내용이 있어 이를 블로깅하여 기록해두려 한다.</p></blockquote><p>리눅스에서는 내부에서 발생하는 이벤트에 대한 로그를 관리하는 시스템이 존재한다. 일단 한 놈(?)만 파보고자 회사에서 사용하는 <code>amazon linux2</code>의 로깅 시스템에 대해서 알아보고자 한다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="amazone-linux2">Amazone Linux2<a class="hash-link" href="#amazone-linux2" title="Direct link to heading">​</a></h2><p>공식문서는 <a href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/amazon-linux-ami-basics.html" target="_blank" rel="noopener noreferrer">여기</a>서 확인할 수 있다.</p><blockquote><p>Amazon Linux는 CentOS처럼 RedHat계열의 리눅스이다.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="systemd">systemd<a class="hash-link" href="#systemd" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="systemd-이란"><code>systemd</code> 이란?<a class="hash-link" href="#systemd-이란" title="Direct link to heading">​</a></h3><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span><mdxadmonitiontitle>위키피디아 - <a href="https://ko.wikipedia.org/wiki/Systemd" target="_blank" rel="noopener noreferrer">https://ko.wikipedia.org/wiki/Systemd</a></mdxadmonitiontitle></div><div class="admonitionContent_S0QG"><p>systemd는 일부 리눅스 배포판에서 유닉스 시스템 V나 BSD init 시스템 대신 사용자 공간을 부트스트래핑하고 최종적으로 모든 프로세스들을 관리하는 init 시스템이다.</p></div></div><p><code>Amazone Linux2</code>는 systemd를 <a href="https://ko.wikipedia.org/wiki/Init" target="_blank" rel="noopener noreferrer">init 시스템</a>으로 채택하여 사용하고 있다. 여기서 <strong>init 시스템이란 컴퓨터 시스템의 부팅 과정 중 최초의 프로세스</strong>이다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="systemd-구조"><code>systemd</code> 구조<a class="hash-link" href="#systemd-구조" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="alt systemd-components" src="/en/assets/images/Systemd_components-10de7e9713e740ba7c3d0ee25eb6bfcb.png" width="720" height="405" class="img_ev3q"></p><p>위 그림과 같은 구조를 가지고 있다. 이 글에서 모두 언급하기 어렵기도 하고 이슈를 해결하기 위해 봐야했던 부분만 언급해보고자 한다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="systemd-로깅-시스템"><code>systemd</code> 로깅 시스템<a class="hash-link" href="#systemd-로깅-시스템" title="Direct link to heading">​</a></h2><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span><mdxadmonitiontitle>위키피디아(Systemd#journald) - <a href="https://en.wikipedia.org/wiki/Systemd#journald" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Systemd#journald</a></mdxadmonitiontitle></div><div class="admonitionContent_S0QG"><p>systemd-journald is a daemon responsible for event logging, with append-only binary files serving as its logfiles. The system administrator may choose whether to log system events with systemd-journald, syslog-ng or rsyslog. The potential for corruption of the binary format has led to much heated debate</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용하고-있는-로깅-서비스-확인해보기">사용하고 있는 로깅 서비스 확인해보기<a class="hash-link" href="#사용하고-있는-로깅-서비스-확인해보기" title="Direct link to heading">​</a></h3><div id="demo-systemctl" style="min-height:240px"></div><br><br><p>현재 실행 중인 <strong>systemd-journald</strong>, <strong>rsyslog</strong>를 찾아보자!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="systemd-journald">systemd-journald<a class="hash-link" href="#systemd-journald" title="Direct link to heading">​</a></h3><ul><li><a href="https://www.freedesktop.org/software/systemd/man/systemd-journald.service.html" target="_blank" rel="noopener noreferrer">https://www.freedesktop.org/software/systemd/man/systemd-journald.service.html</a></li><li>시스템의 전반적인 로그를 수집 및 저장하는 데몬 서비스</li><li><code>/var/log/journal</code> 하위에 바이너리 형태로 쌓임</li><li>설정 파일: <code>/etc/systemd/journald.conf</code></li><li>관련된 서비스 및 도구<ul><li><code>systemd-journald.service</code></li><li><code>systemd-journal-flush.service</code></li><li><code>journalctl</code></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rsyslog">rsyslog<a class="hash-link" href="#rsyslog" title="Direct link to heading">​</a></h3><blockquote><p><a href="https://www.fluentd.org/" target="_blank" rel="noopener noreferrer">fluentd</a>와 흡사한 도구라고 느껴짐</p></blockquote><ul><li><a href="https://www.rsyslog.com" target="_blank" rel="noopener noreferrer">https://www.rsyslog.com</a></li><li>설정 파일: <code>/etc/rsyslog.conf</code></li><li>input/output/parser 모듈을 설정하여 로깅할 수 있음<ul><li><a href="https://www.rsyslog.com/plugins/" target="_blank" rel="noopener noreferrer">https://www.rsyslog.com/plugins/</a></li></ul></li><li><code>amazonlinux2</code>에는 다음과 같은 input 설정이 기본으로 되어 있음 (<code>uxsock</code>,<code>journal</code>)<ul><li>GitHub에서 <a href="https://github.com/rsyslog/rsyslog/blob/91885676001c9df1c2c91514d144cf71755d5d14/platform/redhat/centos/rsyslog.conf" target="_blank" rel="noopener noreferrer">rsyslog/rsyslog - rsyslog.conf</a>를 찾아보니 기본 설정 파일인 것으로 보임</li><li><a href="https://www.rsyslog.com/doc/v8-stable/configuration/modules/imuxsock.html" target="_blank" rel="noopener noreferrer">https://www.rsyslog.com/doc/v8-stable/configuration/modules/imuxsock.html</a></li><li><a href="https://www.rsyslog.com/doc/v8-stable/configuration/modules/imjournal.html" target="_blank" rel="noopener noreferrer">https://www.rsyslog.com/doc/v8-stable/configuration/modules/imjournal.html</a></li></ul></li></ul><div id="demo-rsyslog_conf" style="min-height:220px"></div><br><br><ul><li>전부 찾아보진 않았지만 Output Module에는 기본 내장 모듈이 존재 (<code>omusrmsg</code>, <code>omfile</code>)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="input-moduleimjournal">Input Module(imjournal)<a class="hash-link" href="#input-moduleimjournal" title="Direct link to heading">​</a></h4><ul><li>imjournal으로도 imklog와 동일하게 커널 로그를 읽을 수 있다고 함</li></ul><div id="demo-logger" style="min-height:60px"></div><br><br><div id="demo-tail" style="min-height:80px"></div><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="logrotate">logrotate<a class="hash-link" href="#logrotate" title="Direct link to heading">​</a></h2><p>그런데 <code>/var/log/messages</code> 를 검색해보면 날짜별로 rotate되는 것으로 보인다. 또 이건 어떤 서비스가 이를 처리하는 것 일까?</p><div id="demo-ls-message" style="min-height:100px"></div><br><br><p>그것이 바로 <a href="https://linux.die.net/man/8/logrotate" target="_blank" rel="noopener noreferrer">logrotate</a>라는 녀석이다. 요약하자면, <code>/etc/cron.daily/logrotate</code> 이 스크립트가 매일 실행되면서 <code>/etc/logrotate.conf</code>과 <code>/etc/logrotate.d/</code> 하위에 파일들의 설정으로 rotate가 되는 것인데, 자세한 설명은 <a href="https://server-talk.tistory.com/271" target="_blank" rel="noopener noreferrer">이 블로그</a>에 자세히 설명되어 있어 이를 대신한다.</p><blockquote><p>실제로 <code>/etc/logrotate.d/syslog</code> 설정을 확인 해보면 <code>/var/log/messages</code>가 rotate 되는 목록에 포함되어 있는 것을 알 수 있다.</p></blockquote><div id="demo-cat" style="min-height:200px"></div><br><br><h2 class="anchor anchorWithStickyNavbar_LWe7" id="결론">결론<a class="hash-link" href="#결론" title="Direct link to heading">​</a></h2><ol><li>시스템 이벤트가 발생하면 systemd-journald가 이를 수집</li><li>systemd-journald에서 바이너리 형태로 로그 파일을 만듬</li><li>rsyslog(input module=imjournal)으로 systemd-journald에서 syslog로 구조화된 로그를 가져옴</li><li><strong>/var/log</strong> 하위에 rule에 맞는 로그로 출력</li><li><strong>/var/log</strong> 하위 로그들은 logrotate로 인해 매일 rotate</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="느낀점">느낀점<a class="hash-link" href="#느낀점" title="Direct link to heading">​</a></h2><ul><li><code>/var/log</code>에 굉장히 다양한 로그가 쌓이는 것을 알게되었다. (부팅, 메일, 메시지, ... 등등)</li><li><code>systemd</code>에 기본적인 로그 시스템만으로도 다양한 로그를 가공 및 처리를 할 수 있다. 그렇기 떄문에 이를 생각하지 않고 별도의 로그를 가공한다고 작업을 추가하면, 이중으로 작업하게 되는 것이라고 판단된다.</li><li><code>systemd-journald</code>을 사용하면 <code>/var/log/journal</code>에 바이너리 형태로 로그가 쌓이는데 이게 맞는 것일까? 🤔<ul><li><code>journalctl</code>으로도 볼 수 있지만, <code>/var/log/messages</code>에 쌓이는 것만으로도 충분하지 않나라는 생각이 든다. (이것도 이중 작업이지 않나...? 🤔)</li></ul></li><li>(java) 무심코 logback의 console appender으로 설정해두고 서버에 반영하면, <code>/var/log/messages</code>에 쌓이는 것을 경험했다. 🤣</li><li>현재 서비스의 애플리케이션 로그를 <code>crontab</code>으로 별도의 스크립트를 등록하여 rotate하고 있는데 <code>logrotate</code>으로 처리하면 보다 깔끔한 처리가 되지 않을까 싶다.</li></ul>]]></content:encoded>
            <category>linux</category>
            <category>amazonelinux</category>
            <category>systemd</category>
            <category>systemd-journald</category>
            <category>rsyslog</category>
            <category>log</category>
        </item>
        <item>
            <title><![CDATA[AWS Aurora DB Cluster - FailOver 대응하기]]></title>
            <link>https://heowc.dev/en/2021/02/13/aurora-cluster-failover</link>
            <guid>2021/02/13/aurora-cluster-failover</guid>
            <pubDate>Sat, 13 Feb 2021 17:19:00 GMT</pubDate>
            <description><![CDATA[최근 회사에서 오로라디비를 스케일 업하기 위해서 failover 테스트를 하다가 있었던 이슈를 공유합니다.]]></description>
            <content:encoded><![CDATA[<p>최근 회사에서 오로라디비를 스케일 업하기 위해서 failover 테스트를 하다가 있었던 이슈를 공유합니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="진행-플로우">진행 플로우<a class="hash-link" href="#진행-플로우" title="Direct link to heading">​</a></h4><p>진행했던 플로우는 다음과 같습니다.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">slave 스케일 업</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slave를 master로 승격(failover)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slave 스케일 업</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="에러-발생">에러 발생<a class="hash-link" href="#에러-발생" title="Direct link to heading">​</a></h4><p><strong>1번의 경우,</strong> 인스턴스가 내려갔다 올라오기 때문에 잠시 동안 slave를 사용할 수 없게 됩니다. 하지만, cluster end-point를 사용하게 되면 자동적으로 slave로 가던 트래픽이 master를 바라보게 됩니다.
<strong>2번의 경우,</strong> master와 slave가 바뀌니 아주 잠깐의 순단이 있겠지만 이는 내부적으로 커넥션이 다시 맺어 정상 동작할것이라고 생각했습니다.</p><p>하지만... 2번을 진행함과 동시에 서버에서는 다음과 같은 예외가 출력되고 있었습니다.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The MySQL server is running with the --read-only option so it cannot execute this statement</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>자동으로 커낵션을 다시 맺어줄꺼란 생각이 틀렸고, 구글링을 통해 다음과 같은 게시물을 찾을 수 있었습니다.
(참고: <a href="https://aws.amazon.com/ko/premiumsupport/knowledge-center/aurora-mysql-db-cluser-read-only-error/" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/ko/premiumsupport/knowledge-center/aurora-mysql-db-cluser-read-only-error/</a>)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="해결방법">해결방법<a class="hash-link" href="#해결방법" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-클러스터-라이터-엔드포인트-활용">1. 클러스터 라이터 엔드포인트 활용<a class="hash-link" href="#1-클러스터-라이터-엔드포인트-활용" title="Direct link to heading">​</a></h5><p>우리 서비스에서는 이미 cluster endpoint를 사용하고 있기 때문에 해당이 안되는 내용이였습니다. 혹시 instance endpoint를 사용하고 있다면 cluster endpoint를 사용하길 권장드립니다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-dns를-과도하게-캐시하지-않음">2. DNS를 과도하게 캐시하지 않음<a class="hash-link" href="#2-dns를-과도하게-캐시하지-않음" title="Direct link to heading">​</a></h5><p>이번에 알게된 사실이지만 JVM 애플리케이션이 실행된 이우에 DNS 캐시하게 됩니다. 이는 jdk 구현체 마다 옵션이 다르다고 알고 있지만 오라클 jdk를 사용하는 경우는 이를 무기한으로 가지게 됩니다. 변경이 되지 않는다는 얘기죠. 그래서 우리는 <code>networkaddress.cache.ttl</code>를 추가하여 테스트 해보기로 했습니다만... 동일한 예외가 발생했습니다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-스마트-드라이버-사용">3. 스마트 드라이버 사용<a class="hash-link" href="#3-스마트-드라이버-사용" title="Direct link to heading">​</a></h5><p>마지막 방법으로 커넥터를 변경하는 것입니다. 현재 사용 중인 커넥터는 <code>mysql-connector</code>였고, 이를 <code>mariadb-connector</code>로 변경하는 것이였습니다. 조금 더 찾아보니 <code>mariadb-connector</code>에는 <code>mysql-connector</code>와 달리 failover에 대한 대응이 가능한 옵션을 제공해주고 있었습니다.
(참고: <a href="https://mariadb.com/kb/en/failover-and-high-availability-with-mariadb-connector-j/#specifics-for-amazon-aurora" target="_blank" rel="noopener noreferrer">https://mariadb.com/kb/en/failover-and-high-availability-with-mariadb-connector-j/#specifics-for-amazon-aurora</a>)</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">jdbc:mysql:aurora:.....</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>AWS 커뮤니티에도 질문을 남겼지만 대다수의 분들이 <code>mariadb-connector</code>로 변경해서 해결했다는 것을 알 수 있었습니다.</p><p>그리고 이제는 마지막일거라고 생각하고 테스트를 했고 성공했습니다..! 조금 더 코드를 살펴보니 실패 시에 내부적으로 커낵션을 다시 맺는 과정이 포함되어 있는 것을 알 수 있었습니다. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="또-다른-이슈">또 다른 이슈<a class="hash-link" href="#또-다른-이슈" title="Direct link to heading">​</a></h4><p>커낵션에 대한 부분은 해결했지만... 다른 예외가 발생합니다. connector를 변경함으로써 발생한 문제인데요. 이런 문제가 발생할 수 있구나 했습니다.</p><p>안타까운 현실이지만 서비스에서 <strong>SQL Mapper인 <code>Mybatis</code>를 사용</strong>하며, <strong>datetime의 컬럼 값을 String으로 받는 케이스</strong>가 있었습니다. 기존 <code>mysql-connector</code>에서는 이 값이 <code>2021-02-07 17:19:00</code>으로 할당 됐었다면, <code>mariadb-connector</code>를 사용하면 <code>2021-02-07 17:19:00.0</code>으로 할당 됩니다.</p><blockquote><p>AS-IS:</p><ul><li>mysql-connector</li><li>2021-02-07 17:19:00</li></ul><p>TO-BE</p><ul><li>mariadb-connector</li><li>2021-02-07 17:19:00.0</li></ul></blockquote><p>어떻게 된 일까요? 잠깐 코드를 디버깅해보니 이는 커넥터 구현체의 차이에서 서로 다른 응답을 주는 것을 알 수 있었습니다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-connector">mysql-connector<a class="hash-link" href="#mysql-connector" title="Direct link to heading">​</a></h5><ul><li><a href="https://github.com/mysql/mysql-connector-j/blob/18bbd5e68195d0da083cbd5bd0d05d76320df7cd/src/main/core-impl/java/com/mysql/cj/result/StringValueFactory.java#L95...L98" target="_blank" rel="noopener noreferrer">https://github.com/mysql/mysql-connector-j/blob/18bbd5e68195d0da083cbd5bd0d05d76320df7cd/src/main/core-impl/java/com/mysql/cj/result/StringValueFactory.java#L95...L98</a></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createFromTimestamp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InternalTimestamp</span><span class="token plain"> its</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"%s %s"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createFromDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">its</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2021-02-07 17:19:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">createFromTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">InternalTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">its</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getHours</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> its</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getMinutes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> its</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> its</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getNanos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> its</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getScale</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="mariadb-connector">mariadb-connector<a class="hash-link" href="#mariadb-connector" title="Direct link to heading">​</a></h5><ul><li><a href="https://github.com/mariadb-corporation/mariadb-connector-j/blob/2.7.1/src/main/java/org/mariadb/jdbc/internal/com/read/resultset/rowprotocol/TextRowProtocol.java#L216...L225" target="_blank" rel="noopener noreferrer">https://github.com/mariadb-corporation/mariadb-connector-j/blob/2.7.1/src/main/java/org/mariadb/jdbc/internal/com/read/resultset/rowprotocol/TextRowProtocol.java#L216...L225</a></li></ul><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DATETIME</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Timestamp</span><span class="token plain"> timestamp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getInternalTimestamp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">columnInfo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timeZone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timestamp </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lastValueNull </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">BIT_LAST_ZERO_DATE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastValueNull </span><span class="token operator" style="color:#393A34">^=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">BIT_LAST_ZERO_DATE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">StandardCharsets</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">UTF_8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> timestamp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2021-02-07 17:19:00.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>대략적으로 정리하자면, <code>mysql-connector</code>는 내부적으로 String.format을 사용하여 <code>YYYY-MM-dd HH:mm:ss</code> 형태를 만들어주는 듯 보입니다. 반면, <code>mariadb-connector</code>는 <code>Timestamp.toString()</code>을 사용합니다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="mybatis---typehandler">mybatis - typeHandler<a class="hash-link" href="#mybatis---typehandler" title="Direct link to heading">​</a></h5><p>우리는 이것 때문에 비즈니스 로직을 건드는 것은 크리티컬한 이슈가 발생할 수 있다고 판단하여 고민 끝에 Mybatis의 <a href="https://mybatis.org/mybatis-3/ko/configuration.html#typeHandlers" target="_blank" rel="noopener noreferrer">TypeHandler</a>를 이용하기로 했습니다. (JPA를 사용하는 경우, <a href="https://www.baeldung.com/jpa-attribute-converters" target="_blank" rel="noopener noreferrer"><code>AttributeConverter</code></a>를 사용할 수 있습니다.)</p><p>이미 기본적인 typeHandler로 구현되어 있는 것을 어느정도 커스텀하면 비즈니스 로직을 수정하지 않고도 간단히 커넥터 변경 이슈를 수정할 수 있었고, 성공적으로 테스트를 완료할 수 있었습니다.</p>]]></content:encoded>
            <category>aws</category>
            <category>aurora</category>
            <category>failover</category>
        </item>
        <item>
            <title><![CDATA[2020년 개발 회고]]></title>
            <link>https://heowc.dev/en/2020/12/27/2020-develop-retrospection</link>
            <guid>2020/12/27/2020-develop-retrospection</guid>
            <pubDate>Sun, 27 Dec 2020 17:19:00 GMT</pubDate>
            <description><![CDATA[2019년 회고에 이어 2020년에 대한 회고를 하려고 한다.]]></description>
            <content:encoded><![CDATA[<p>2019년 회고에 이어 2020년에 대한 회고를 하려고 한다. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2019년에-세웠던-계획과-2020년-일을-되돌아-보며"><em>2019년에 세웠던 계획과 2020년 일을 되돌아 보며...</em><a class="hash-link" href="#2019년에-세웠던-계획과-2020년-일을-되돌아-보며" title="Direct link to heading">​</a></h4><blockquote><p>별다른 일이 없다면, 꾸준히 <strong>Armeria에 컨트리뷰션</strong> 해볼 생각이다. 아직은 부족한게 많으니 부족한 점을 하나씩 채우면서 보다 딥한 이슈를 처리해보는 것이 첫번째 목표 중 하나이다.</p></blockquote><p>2019년에 이어 <a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer">armeria</a>에 십여 개의 다양한 PR을 진행했다. (내가 만들어낸 버그도 수정해보고...) 언제나 그렇듯 덕분에 너무 재밌었고, 많은 인사이트를 얻어 갈 수 있었다. 그리고 뜻 밖의 선물도 받아 내년에도 열심히 기여를 해야겠다는 생각이 든다. (음?)</p><p><img loading="lazy" alt="Alt armeria gift" src="/en/assets/images/armeria_gift-518f0757941adef7a39407dd90e5dc52.png" width="1326" height="672" class="img_ev3q">
<em>(개개인에게 다른 메시지를 보낸 준 것에 또 한 번 감동이다.)</em></p><p>2019년에 이어 2020년에도 컨트리뷰톤에 참여했다. 이번 오픈소스는 <a href="https://github.com/pinpoint-apm/pinpoint" target="_blank" rel="noopener noreferrer">pinpoint</a> 였으며, 개발자로서 APM 개발이라는 색다른 영역의 경험을 할 수 있었다. 다만, 아쉬운 부분이라면 활발히 참여하지 못해 하고자 했던 목표를 달성하지 못 하고 간단한 작업밖에 하지 못 했다.</p><p><em>그리고 장려상을 수상했다.</em></p><p>그 외에도 여러 오픈소스에 다양한 기여를 해보았다.</p><ul><li><a href="https://github.com/Playtika/testcontainers-spring-boot/pull/540" target="_blank" rel="noopener noreferrer">https://github.com/Playtika/testcontainers-spring-boot/pull/540</a> (<code>typo</code>)</li><li><a href="https://github.com/ua-parser/uap-core/pull/451" target="_blank" rel="noopener noreferrer">https://github.com/ua-parser/uap-core/pull/451</a> (<code>new feature</code>)</li><li><a href="https://github.com/LogNet/grpc-spring-boot-starter/issues/169" target="_blank" rel="noopener noreferrer">https://github.com/LogNet/grpc-spring-boot-starter/issues/169</a> (<code>clean up</code>)</li><li><a href="https://github.com/glorious-codes/glorious-demo/issues/77" target="_blank" rel="noopener noreferrer">https://github.com/glorious-codes/glorious-demo/issues/77</a> (<code>suggestion</code>)</li></ul><p>마지막으로 올해는 아쉽게도 Hacktoberfest를 완주하지 못 했다.</p><blockquote><p>현 회사에서 내년에 전체적인 아키텍처 개선을 할 것이라고 하여 <strong>업무에 집중</strong>할 생각이다. 물론, 개선 과정에서 트러블 슈팅이 있다면 이를 명확히 알고 블로깅 해보는 것도 생각하고 있다.</p></blockquote><p><em>결론을 얘기하자면, 아키텍처 개선은 없었다...</em></p><p>하지만 기술적인 큰 변화가 있었다면, 스프링 버전 업그레이드(<code>4.3</code> -&gt; <code>5.1</code>)와 레디스 클라이언트 변경(<code>jedis</code> -&gt; <code>lettuce</code>)을 하였다. <code>lettuce</code>는 적은 커넥션으로 높은 처리량을 자랑하여 많이들 사용하는 라이브러리이다. 하지만 <code>spring-data-redis</code>을 기반으로 사용한다면 특정 버전, 특정 환경에서 문제가 있었고, 이는 <code>2.1.0.RELEASE</code>에서 해결되었다. 혹시 클러스터 환경에서 <code>lettuce</code>를 사용한다면, <code>spring-data-redis</code>를 사용한다면, <code>2.1.0.RELEASE</code> 이상을 사용하고 있는지 확인해보기 바란다.</p><ul><li><a href="https://github.com/lettuce-io/lettuce-core/issues/816" target="_blank" rel="noopener noreferrer">https://github.com/lettuce-io/lettuce-core/issues/816</a></li><li><a href="https://jira.spring.io/browse/DATAREDIS-731" target="_blank" rel="noopener noreferrer">https://jira.spring.io/browse/DATAREDIS-731</a></li></ul><p>그리고 이메일 발송 기능이 필요하여 <a href="https://aws.amazon.com/ko/ses/" target="_blank" rel="noopener noreferrer">AWS SES</a>를 활용해보기도 했다. 처음 경험해보는 도메인이지만, 잘 정리된 문서, 쉬운 인터페이스덕분에 러닝커브가 많이 높지 않았다. 다만, 평판이라는 개념은 아직도 익숙하지 않다... (이것 때문에 꽤 고생을 했다... - <a href="https://heowc.dev/2020/04/11/aws-ses-review/" target="_blank" rel="noopener noreferrer">AWS - SES 사용 후기</a>)</p><blockquote><p>읽기로한 개발 도서 읽는 것에 소홀히 하지 않아야 겠다. <strong>다독이 아닌 정독!</strong> 2020년 첫 도서로는 Netty 관련 내용이 될 것 같은데.. Armeria 컨트리뷰션에 조금 보탬이 되지 않을까싶다.</p></blockquote><p>정독이 목표였지만... 애초에 책을 읽는 것에 소홀해졌다.</p><ul><li><code>스프링 인 액션</code></li><li><code>http 완벽 가이드</code></li></ul><blockquote><p>프로그래밍 관련은 아니지만 그 동안 몸에 너무 소홀히 한 것 같아 <strong>운동</strong>을 할 생각이다. 헬스 정기권 같은 것만 하면 금방 안할게 뻔하니 P.T나 다른 대안책을 찾아보는 중 이다.</p></blockquote><p>상반기까지는 식단 관리도 하고 필라테스도 하며 몸이 건강해졌지는 것을 느낄 수 있었다. 하지만 하반기부터는 여러가지 이유로 못 하게되어 다시 소홀해졌고 원상복구 중 이다...</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2021년-계획">2021년 계획<a class="hash-link" href="#2021년-계획" title="Direct link to heading">​</a></h4><p>2020년은 코로나 19로 인해 몸도 마음도 느러지는 한 해였던 것 같다. 다시 마음을 다 잡고 보다 의미있는 일, 보람찬 일, 재미있는 일을 찾아 2021년에는 뜻깊은 한 해를 보내야겠다.</p><ul><li>꾸준한 식단관리</li><li>독서 4권 이상</li><li>적극적인 오픈소스 참여</li></ul>]]></content:encoded>
            <category>2020</category>
            <category>develop</category>
            <category>retrospection</category>
        </item>
        <item>
            <title><![CDATA[Network JSON Filter 소개 (Chrome Extension)]]></title>
            <link>https://heowc.dev/en/2020/10/21/introduction-network-json-filter-as-chrome-extension</link>
            <guid>2020/10/21/introduction-network-json-filter-as-chrome-extension</guid>
            <pubDate>Wed, 21 Oct 2020 19:00:00 GMT</pubDate>
            <description><![CDATA[소개]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="소개">소개<a class="hash-link" href="#소개" title="Direct link to heading">​</a></h3><p><code>network-json-filter</code>는 주고받는 네트워크 JSON 응답을 필터링하여 보고자 개발한 크롬 익스텐션으로, 다음과 같은 경우에 유용할 수 있다.</p><ul><li>JSON 응답이 긴 경우, 특정 depth만 보고싶을 때</li><li>특정 URL에 대한 JSON 응답만 보고싶은 경우</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설치">설치<a class="hash-link" href="#설치" title="Direct link to heading">​</a></h3><p><a href="https://chrome.google.com/webstore/detail/network-json-filter/flcfiogpdlddkjiekpeiedkeoihppekm" target="_blank" rel="noopener noreferrer">chrome 웹 스토어 - network-json-filter</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용법">사용법<a class="hash-link" href="#사용법" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="https://github.com/heowc/network-json-filter-chrome-extension/blob/main/docs/screenshot.png?raw=true" alt="img screenshot" class="img_ev3q">
※ 해당 스크린샷은 <code>https://httpbin.org</code>를 활용한 예시</p><ol><li>url: 단순히 url에 해당 문자열 포함여부 체크</li><li>expression: JSON Path 표현식을 활용한 응답 변환 (<a href="https://github.com/dchester/jsonpath" target="_blank" rel="noopener noreferrer">참고</a>)</li><li>응답 접기/펼기 (<code>▶/▼</code>)</li><li>응답 내역을 삭제</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="추가될-기능-리스트">추가될 기능 리스트<a class="hash-link" href="#추가될-기능-리스트" title="Direct link to heading">​</a></h3><p><a href="https://github.com/heowc/network-json-filter-chrome-extension/issues" target="_blank" rel="noopener noreferrer">https://github.com/heowc/network-json-filter-chrome-extension/issues</a></p>]]></content:encoded>
            <category>chrome-extension</category>
            <category>json</category>
            <category>network-tool</category>
        </item>
        <item>
            <title><![CDATA[Spring - @Autowired는 어떻게 동작하는 걸까?]]></title>
            <link>https://heowc.dev/en/2020/07/04/how-does-autowired-work</link>
            <guid>2020/07/04/how-does-autowired-work</guid>
            <pubDate>Sat, 04 Jul 2020 18:00:00 GMT</pubDate>
            <description><![CDATA[@Autowired의 동작 원리를 간단하게 이해해보자.]]></description>
            <content:encoded><![CDATA[<blockquote><p><code>@Autowired</code>의 동작 원리를 간단하게 이해해보자.</p></blockquote><p>스프링에서 Bean으로 등록된 객체에 특정 Bean에 대한 의존성을 주입할 때, 스프링에서 제공(<code>@Autowired</code>, <code>@Value</code>)하는 혹은 자바 제공(<code>@Inject</code>, <code>@Resource</code>)하는 애노테이션들이 어떤 원리로 주입이 되는 것?에 대한 궁금증이 생겼다. 그것은 바로 <code>BeanPostProcessor</code> 이라는 클래스에 해답을 얻을 수 있다.</p><p><code>BeanPostProcessor</code>는 스프링 컨테이너 안에서 만든 bean에 전/후처리 작업을 할 수 있도록 만든 인터페이스이다. 여러 구현체들을 보면 <code>AutowiredAnnotationBeanPostProcessor</code>, <code>CommonAnnotationBeanPostProcessor</code> 등등 다양한 BeanPostProcessor들이 존재하며, 서드파티 라이브러리 중에서도 스프링 위에서 동작할 수 있도록 <code>BeanPostProcessor</code>를 추가로 제공하기도 한다. (<code>MeterRegistryBeanPostProcessor</code>, <code>ArmeriaBeanPostProcessor</code>, ...)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">BeanPostProcessor</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 빈 생성 이전에 실행되는 메소드</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Object</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">postProcessBeforeInitialization</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Object</span><span class="token plain"> bean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> beanName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">BeansException</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 빈 생성 이후에 실행되는 메소드</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Object</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">postProcessAfterInitialization</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Object</span><span class="token plain"> bean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> beanName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">BeansException</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>인터페이스는 굉장히 깔끔하고 단순하다. </p><p>그렇다면 <code>BeanPostProcessor</code>의 생성시점은 언제일까? 코드를 들여다 보면 다음과 같다.</p><p><a href="https://github.com/spring-projects/spring-framework/blob/5.2.x/spring-context/src/main/java/org/springframework/context/support/AbstractApplicationContext.java#L535" target="_blank" rel="noopener noreferrer">https://github.com/spring-projects/spring-framework/blob/5.2.x/spring-context/src/main/java/org/springframework/context/support/AbstractApplicationContext.java#L535</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">refresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">BeansException</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">IllegalStateException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">synchronized</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">startupShutdownMonitor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Prepare this context for refreshing.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">prepareRefresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Tell the subclass to refresh the internal bean factory.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">ConfigurableListableBeanFactory</span><span class="token plain"> beanFactory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">obtainFreshBeanFactory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Prepare the bean factory for use in this context.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">prepareBeanFactory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beanFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Allows post-processing of the bean factory in context subclasses.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">postProcessBeanFactory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beanFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Invoke factory processors registered as beans in the context.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">invokeBeanFactoryPostProcessors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beanFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Register bean processors that intercept bean creation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">registerBeanPostProcessors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">beanFactory</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>호출 시점만 놓고 보자면 Bean 작업 이전에 BeanPostProcessor에 대한 작업을 한 후에 Bean 작업이 되는 것을 볼 수 있다. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="커스텀-beanpostprocessor-만들어보기">커스텀 BeanPostProcessor 만들어보기<a class="hash-link" href="#커스텀-beanpostprocessor-만들어보기" title="Direct link to heading">​</a></h4><p>간단한 컴포넌트와 커스텀 BeanPostProcessor를 준비하자.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">MyBeanPostProcessor</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">BeanPostProcessor</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">postProcessBeforeInitialization</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Object</span><span class="token plain"> bean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> beanName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">BeansException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bean </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name">Person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Person</span><span class="token plain"> heowc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> bean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            heowc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"heowc"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> bean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">postProcessAfterInitialization</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Object</span><span class="token plain"> bean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> beanName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">BeansException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> bean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>간단하게 이름을 필드로 갖는 Person이라는 클래스를 만들었다. 그리고 이것이 Bean으로 등록이 된다면, Person 객체 name 필드에 'heowc'를 초기화해주는 코드다. 이를 테스트한 코드는 아래와 같다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@SpringBootTest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyBeanPostProcessorTest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Person</span><span class="token plain"> heowc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test_personInjection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">assertThat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">heowc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isEqualTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"heowc"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>spring</category>
            <category>BeanPostProcessor</category>
            <category>autowired</category>
        </item>
        <item>
            <title><![CDATA[AWS - SES 사용 후기]]></title>
            <link>https://heowc.dev/en/2020/04/11/aws-ses-review</link>
            <guid>2020/04/11/aws-ses-review</guid>
            <pubDate>Sat, 11 Apr 2020 17:30:00 GMT</pubDate>
            <description><![CDATA[AWS SES 사용 후기이다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>AWS SES 사용 후기이다.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="aws-ses란">AWS SES란?<a class="hash-link" href="#aws-ses란" title="Direct link to heading">​</a></h4><p><code>Amazon Simple Email Service(SES)</code>는 AWS에서 제공하는 클라우드 기반 이메일 발송 서비스이다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="사전-준비">사전 준비<a class="hash-link" href="#사전-준비" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="계정-신청">계정 신청<a class="hash-link" href="#계정-신청" title="Direct link to heading">​</a></h5><p>인스턴스를 하나 할당받는 것처럼 SES를 사용하기 위한 신청을 해야 되는데, 정상적으로 신청이 되었다면 이 상태가 <strong>샌드박스</strong> 상태이다. 만약, 실서비스에서 사용하려면 <strong>샌드박스</strong> 상태를 벗어나야한다.</p><blockquote><p>샌드박스 상태는 일일(200건), 초당(1건) 발송 제한이 걸려있고, 등록된 이메일에만 메일 전송이 가능하다.</p></blockquote><h5 class="anchor anchorWithStickyNavbar_LWe7" id="문서">문서<a class="hash-link" href="#문서" title="Direct link to heading">​</a></h5><p>당연할 수 도 있겠지만, SES에 대한 가이드 문서를 꼭 읽어보고 진행하길 권한다. 이메일 도메인 지식이 없는 사람도 이메일 도메인 지식 습득할 수 있을 뿐만 아니라 SES 기능 숙지도할 수 있다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="사용방법">사용방법<a class="hash-link" href="#사용방법" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="전송-api">전송 API<a class="hash-link" href="#전송-api" title="Direct link to heading">​</a></h5><p>SMTP 인터페이스 또는 AWS SDK, HTTP API형태로 제공한다.</p><ul><li><a href="https://docs.aws.amazon.com/ko_kr/ses/latest/DeveloperGuide/send-using-smtp-java.html" target="_blank" rel="noopener noreferrer">SMTP 인터페이스</a></li><li><a href="https://docs.aws.amazon.com/ko_kr/ses/latest/DeveloperGuide/send-using-sdk-java.html" target="_blank" rel="noopener noreferrer">AWS SDK</a></li></ul><p>※ AWS SDK를 사용한다면 이메일 템플릿을 저장해두고 사용하는 방법도 존재한다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="알림">알림<a class="hash-link" href="#알림" title="Direct link to heading">​</a></h5><p>메일은 수신거부, 반송 등의 알림을 받을 수 있다. 이를 받기 위한 수단(방식)으로는 <strong>AWS SNS</strong> 또는 <strong>별도의 email</strong>를 등록하여 받아볼 수 있다.</p><ul><li><a href="https://docs.aws.amazon.com/ko_kr/ses/latest/DeveloperGuide/monitor-sending-activity-using-notifications-email.html" target="_blank" rel="noopener noreferrer">이메일 알림</a></li><li><a href="https://docs.aws.amazon.com/ko_kr/ses/latest/DeveloperGuide/notification-contents.html" target="_blank" rel="noopener noreferrer">AWS SNS 알림</a></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="시뮬레이터">시뮬레이터<a class="hash-link" href="#시뮬레이터" title="Direct link to heading">​</a></h5><p>알림에 대한 후처리기를 빠르게 테스트하기 위해 시뮬레이터를 제공한다. 특정 메일으로 메일을 전송하면 각각의 시나리오를 테스트해볼 수 있다. 예를 들면, <code>bounce@simulator.amazonses.com</code>에 메일을 전송하면 반송 알림을 받을 수 있다.</p><ul><li>참고: <a href="https://docs.aws.amazon.com/ko_kr/ses/latest/DeveloperGuide/send-email-simulator.html" target="_blank" rel="noopener noreferrer">https://docs.aws.amazon.com/ko_kr/ses/latest/DeveloperGuide/send-email-simulator.html</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="주의-해야할-점">주의 해야할 점<a class="hash-link" href="#주의-해야할-점" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="평판">평판<a class="hash-link" href="#평판" title="Direct link to heading">​</a></h5><p>평판이라는 개념이 존재하여, 평판 낮아지면 할당받은 일일/초당 발송 횟수가 낮아질 수 있고 나중에는 계정이 정지될 수 있다. 평판에 대한 관리가 지속적으로 되어야 하며, 이에 대한 대책을 강구해야 한다. 그렇다보니, </p><div>알림에 대한 후처리는 필수</div>라고 볼 수 있다.<p></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="반송율-수신거부율">반송율, 수신거부율<a class="hash-link" href="#반송율-수신거부율" title="Direct link to heading">​</a></h5><p>평판은 반송율과 수신거부율로 인해 정해지는데 권장사항으로는 </p><div>반송율는 5%미만</div>, <div>수신거부율는 0.1%미만</div> 을 유지할 수 있도록 해야 한다. 이를 포함해 <a href="https://docs.aws.amazon.com/ko_kr/ses/latest/DeveloperGuide/best-practices.html" target="_blank" rel="noopener noreferrer">모범 사례</a>는 문서를 참고하면 좋다.<p></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="개발운영하면서-얻는-팁">개발,운영하면서 얻는 팁<a class="hash-link" href="#개발운영하면서-얻는-팁" title="Direct link to heading">​</a></h4><ul><li><p>실서비스로 가기까지 생각보다 <strong>실제 반송/수선거부 처리를 유도하기가 어려웠다.</strong> (방법이 잘 못된 것일 수도 있겟지만) 스팸처리, 자동응답 등등을 설정해도 정상적으로 메일이 전송되는 것으로 처리되었다. 그래서 실서비스 반영까지 시뮬레이터 테스트와 제한된 이메일을 저장해둘 별도의 테이블을 만들어 필터링이 잘되는지 정도의 테스트만 진행했었다. </p></li><li><p>Google Gmail경우, 반송/수선거부 데이터를 제공하지 않는다.</p></li><li><p><strong>Yahoo 이메일에 대한 반송율이 꽤 높았다.</strong> (초반 데이터로만 봤을 때, 50%정도 되었다.) 확실하지는 않지만 <a href="https://blog.zerobounce.net/2019/03/28/yahoo-emails-bouncing-here-is-why-and-what-you-can-do/" target="_blank" rel="noopener noreferrer">2019년 3월쯤 관련 내용</a>을 볼 수 있는데, 장기 미사용 유저에 대해 휴먼계정으로 전환되어 나타난 현상으로 추측된다. 이로 인해, 각종 포럼이나 stackoverflow에도 여러 질의응답이 오가는 것을 볼 수 있다. 그래서 우리가 할 수 있는 처리는 다른 이메일을 등록하도록 유도하거나 유효한 이메일인지, 반송율이 높은 이메일이 알 수 있는 별도 API를 사용하여 반송율을 낮춰야 할 것이다. </p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="아쉬운-점">아쉬운 점<a class="hash-link" href="#아쉬운-점" title="Direct link to heading">​</a></h4><ul><li><strong>평판이 계산되는 날짜 범위 기준이 명확하지 않다.</strong> <code>AWS 콘솔 &gt; SES &gt; 평판 대시보드</code>에서 반송율, 수신거부율을 볼 수 있는데, 기준 날짜도 다르고 언제 기준이 바뀌는지도 알 수가 없다.</li><li>매번 콘솔에 들어가서 보자니 귀차니즘이 생겨서 <strong>반송율, 수신거부율을 알기 위한 API를 찾아봤지만 없었다.</strong> 그나마 2주간에 발송건 수, 반송건 수, 수신거부건 수를 알수 있는 데이터가 있어서 이를 가공하여 주기적으로 슬랙으로 알림을 전송하고 있다.</li></ul><p><img loading="lazy" alt="Alt slack message" src="/en/assets/images/slack-7b475dafce21fb4e1a00255629ddf765.png" width="1146" height="220" class="img_ev3q"></p>]]></content:encoded>
            <category>aws</category>
            <category>ses</category>
            <category>mail</category>
            <category>review</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot 예제 개선하기 (2)]]></title>
            <link>https://heowc.dev/en/2020/02/20/improve-spring-boot-example-2</link>
            <guid>2020/02/20/improve-spring-boot-example-2</guid>
            <pubDate>Thu, 20 Feb 2020 23:30:00 GMT</pubDate>
            <description><![CDATA[GitHub Action을 통해 실행된 테스트가 실패시, test reports를 업로드하는 기능을 소개하고자 합니다.]]></description>
            <content:encoded><![CDATA[<blockquote><p><code>GitHub Action</code>을 통해 실행된 테스트가 실패시, <code>test reports</code>를 업로드하는 기능을 소개하고자 합니다.</p></blockquote><p>이전 글에 이어 보다 개선된 지속적 통합을 하고자 2가지 개선이 있었다.</p><ul><li>캐시 적용</li><li>테스트 보고</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="캐시-적용">캐시 적용<a class="hash-link" href="#캐시-적용" title="Direct link to heading">​</a></h4><p><code>GitHub Action</code>은 특정 경로에 대해서 캐싱할 수 있는 action을 제공하고 있다. 이에 대한 자세한 스펙과 설명은 <a href="https://github.com/actions/cache" target="_blank" rel="noopener noreferrer">actions/cache</a>를 참고해볼 수 있다.</p><p><strong>heowc/SpringBootSample</strong>에 적용할 수 있는 포인트는 두 곳이다. (적용된 코드: <a href="https://github.com/heowc/SpringBootSample/commit/7064ed1381f3dfc7f184cf3d24985828c38f5f9d" target="_blank" rel="noopener noreferrer"><code>7064ed1</code></a>)</p><ol><li><code>gradle-wrapper</code>가 설치된 부분</li><li>각 프로젝트의 <code>build.gradle</code>에 정의된 <code>dependency</code>이 설치된 부분 </li></ol><blockquote><p>꼭 Gradle이 아니더라도 다른 언어와 빌드 툴에 대한 샘플도 나열되어 있으니 <a href="https://github.com/actions/cache#implementation-examples" target="_blank" rel="noopener noreferrer">참고</a>하면 좋다.</p></blockquote><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-gradle-wrapper-설치하는-부분">1. <code>gradle-wrapper</code> 설치하는 부분<a class="hash-link" href="#1-gradle-wrapper-설치하는-부분" title="Direct link to heading">​</a></h5><p><code>gradle-wrapper</code>를 사용하는 경우에는 <code>gradle/wrapper/gradle-wrapper.properties</code> 파일을 참고하면 현재 사용 중인 버전을 알 수 있다. 결국에는 해당 파일이 변경되었다면 버전 변경이 되었다고 판단할 수 있으므로 이를 기준으로 cache-key를 가질 수 있다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-buildgradle-정의된-dependency">2. <code>build.gradle</code> 정의된 <code>dependency</code><a class="hash-link" href="#2-buildgradle-정의된-dependency" title="Direct link to heading">​</a></h5><p>이미 <a href="https://github.com/actions/cache#implementation-examples" target="_blank" rel="noopener noreferrer">action/cache의 예시</a>를 참고했다면 쉽게 알 수 있듯이, 이 또한 <code>build.gradle</code>를 기준으로 cache-key를 가질 수 있다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="그래서-빨라졌나">그래서 빨라졌나?<a class="hash-link" href="#그래서-빨라졌나" title="Direct link to heading">​</a></h5><p>아직 히스토리로 남은 전체 워크플로우 갯수도 적고 테스트 갯수도 적어 (또한, 대부분의 워크플로우가 디펜던시 변경이기 때문에) 단정지을 순 없지만 초기에는 7분대가 보였던 것에 반해 cache를 적용한 이후에는 7분대는 거의 볼 수 없었다. <strong>대략 10퍼센트 정도의 속도 개선이 있었다는 것을 알 수 있다.</strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="테스트-보고">테스트 보고<a class="hash-link" href="#테스트-보고" title="Direct link to heading">​</a></h4><p>워크플로우를 보면 대략적으로 실패했다는 것을 알 수 있지만 자세히는 알 수 없다. 그래서 테스트 결과물로 나온 <code>reports</code>를 어디선가 볼 수 없을까? 라는 생각과 내 주변 프로젝트는 어찌하고 있을까? 싶어 찾아보았다.</p><p><img loading="lazy" alt="Alt local-test" src="/en/assets/images/local-test-809917cf4184097c71a61e32990bf386.png" width="974" height="1302" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-armeria">1. <a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer">Armeria</a><a class="hash-link" href="#1-armeria" title="Direct link to heading">​</a></h5><p>요즘 라인에서 만든 <code>Armeria</code>에 관심이 많아 조금씩 기여도 하고 유용한 코드 조각이 있으면 활용하는 편이다. <code>Armeria</code>는 appveyor라는 CI 도구와 codecov라는 코드 커버리지 도구를 사용하는데, appveyor에서 테스트가 깨지면 <code>file.io</code> 서비스를 이용해 하나의 test-reports로 압축하여 업로드하고 있다. </p><blockquote><p><a href="https://file.io" target="_blank" rel="noopener noreferrer"><code>file.io</code></a>는 무료이고 유효기간을 지정할 수 있어 굉장히 유용한 도구이다.</p></blockquote><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-actionsupload-artifact">2. <a href="https://github.com/actions/upload-artifact" target="_blank" rel="noopener noreferrer">actions/upload-artifact</a><a class="hash-link" href="#2-actionsupload-artifact" title="Direct link to heading">​</a></h5><p>최근 베타 기능으로 GitHub에서 artifact API라는 파일 업로드 기능이 추가되었고, 이 또한 action으로 활용할 수 있었다. 하지만 아쉽게도 몇 가지 문제점이 있다.</p><ol><li>유효기간을 지정할 수 없어 사용량에 제한이 될 수 있다. 수동으로 제거해야한다.</li><li>여러 경로에 대해서 한번에 묶을 수 없다.</li></ol><p><a href="https://github.com/actions/upload-artifact/pull/54" target="_blank" rel="noopener noreferrer">V2 버전</a>에는 2번이 해결될 것으로 보이지만 아직까진 유효기간 설정에 대한 기능이 이슈로만 얘기되고 있어 <code>file.io</code>를 사용하고 나중에 <code>actions/upload-artifact</code>를 변경하기로 마음 먹었다. (적용된 코드: <a href="https://github.com/heowc/SpringBootSample/commit/3d436751e89368bee2ebf71e0a8ba009e622b5b4" target="_blank" rel="noopener noreferrer"><code>3d43675</code></a>)</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="실패하는-테스트-코드-만들어-실행하기">실패하는 테스트 코드 만들어 실행하기<a class="hash-link" href="#실패하는-테스트-코드-만들어-실행하기" title="Direct link to heading">​</a></h5><p>무조건 실패하는 테스트를 만들어보고 workflow를 확인해 보았다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test_failure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">assertThat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isFalse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="alt workflow-log" src="/en/assets/images/workflow-log-c1ecc150913f1dfdba701f8c113b2610.png" width="1984" height="1252" class="img_ev3q"></p><p>실패시, <code>https://file.io/m5KLSY</code>에 <code>test-report</code>가 업로드되고 이를 14일간 다운로드 받을 수 있다.</p><p><img loading="lazy" alt="alt download-report" src="/en/assets/images/download-report-5c3b820cda6eca07b2aa7c6a2a0b0902.png" width="1462" height="1014" class="img_ev3q"></p>]]></content:encoded>
            <category>ci</category>
            <category>github-action</category>
            <category>test-reports</category>
            <category>file.io</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot 예제 개선하기]]></title>
            <link>https://heowc.dev/en/2020/01/24/improve-spring-boot-example</link>
            <guid>2020/01/24/improve-spring-boot-example</guid>
            <pubDate>Fri, 24 Jan 2020 23:30:00 GMT</pubDate>
            <description><![CDATA[Dependabot를 적용하고 GitHub Action을 활용하여 CI까지 적용해 예제 코드를 개선한 내용을 소개하고자 합니다.]]></description>
            <content:encoded><![CDATA[<blockquote><p><code>Dependabot</code>를 적용하고 <code>GitHub Action</code>을 활용하여 CI까지 적용해 예제 코드를 개선한 내용을 소개하고자 합니다.</p></blockquote><p><a href="https://spring.io/projects/spring-boot" target="_blank" rel="noopener noreferrer">spring-boot</a>를 처음 접하고 이에 대한 <a href="https://github.com/heowc/SpringBootSample" target="_blank" rel="noopener noreferrer">간단한 예제</a>를 만든지 꽤 시간이 지났다. 2020년 1월 기준으로는 약 30여개의 예제와 400여개의 커밋으로 이루어진 예제 저장소가 되었는데 처음에는 나만을 위해 나만이 참고하기 위한 공개 저장소 목적으로 만들었다.</p><p> 하지만 해를 거듭하면서 다른 개발자분들이 간접적으로 관심을 가져주시는 표현으로 가끔씩 스타도 눌러주시고 포크도 해가신다. 공개 저장소이니 간단한 예제지만 쓰시는 분들에게 제대로된 예제 코드를 노출시키고 싶고 관리가 잘 되고 있다는 느낌을 들게하고 싶었다. (현재로선 안돌아가는 예제도 있다.)</p><p><img loading="lazy" alt="alt intro" src="/en/assets/images/intro-ab96917d06fabe004c1a636465a55067.png" width="2198" height="372" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="주기적으로-version-갱신을-하자">주기적으로 Version 갱신을 하자<a class="hash-link" href="#주기적으로-version-갱신을-하자" title="Direct link to heading">​</a></h4><p>우선적으로 디펜던시를 최신 버전으로 올리고 싶었다. 처음에는 가끔씩 크게 버전업을 하고 이에 맞게 코드도 수정했으나, 하나하나 알기도 어렵고 귀찮았다.</p><p><strong>그러다가 <code>Dependabot</code>라는 녀석을 알게되었다.</strong> 지정한 주기로 디펜던시를 찾아 추가 버전 릴리즈가 있는지 찾아 pull request를 날려주는 봇이다.</p><p><img loading="lazy" alt="alt dependabot-intro" src="/en/assets/images/dependabot-intro-2bc135c9254475f3481fb8b3c1764649.png" width="2116" height="666" class="img_ev3q"></p><p><img loading="lazy" alt="alt dependabot-setting" src="/en/assets/images/dependabot-setting-49dcd20b956108f69bcdd80c416ad0fc.png" width="2140" height="852" class="img_ev3q"></p><p>해당 방법은 preview 단계의 설정이므로, <a href="https://docs.github.com/en/github/administering-a-repository/about-github-dependabot" target="_blank" rel="noopener noreferrer">다음 문서</a>를 참고하여 <code>.github/dependabot.yml</code>를 작성해보도록 하자. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="version-up에-안정적인-예제코드를-만들자">Version UP에 안정적인 예제코드를 만들자<a class="hash-link" href="#version-up에-안정적인-예제코드를-만들자" title="Direct link to heading">​</a></h4><p>두번째로는 이렇게 머지되는 코드들 혹은 내가 직접 수정하거나 추가 작성한 코드가 정말 문제가 없는지 알고 싶었다. (보통 지속적 통합이라고 하죠.) 최근까지는 <code>Dependabot</code>을 활용해서 손쉽게 많은 디펜던시들을 주기적으로 갱신되거나 (개인적인 판단하에) 굳이 갱신될 필요가 없다고 판단되면 닫고 있었다. </p><p><img loading="lazy" alt="alt dependabot-pr" src="/en/assets/images/dependabot-pr-6246de71cf4999d3504ee6879a31660d.png" width="2198" height="1622" class="img_ev3q"></p><p>그런데 이 많은 디펜던시들이 갱신되면서 '예제가 정상적으로 빌드가 될까' 라는 의문이 생겼고... </p><p>...</p><p>역시나 예제가 정상적으로 안돌아갔다. 이런 코드는 <strong>Revert를 하거나 예제를 수정하기도 했다.</strong></p><p><img loading="lazy" alt="alt revert" src="/en/assets/images/revert-be46dc062d88e088079677953dc4f284.png" width="2198" height="1548" class="img_ev3q"></p><p>그리하여 쓸만한 CI 도구를 찾다가 약 1년 전에 작성한 <a href="/en/2019/02/03/deploy-gh-page-with-github-action/">'GitHub Action을 활용한 GitHub Page 배포'</a>이 생각이나서 <code>github-action</code> 을 적용해보고자 한다. 사실 이를 적용할 생각은 예전부터 있었으나 1년 전에는 베타였고 자료도 많이 없어 꽤나 불편함이 조금 있었다.</p><blockquote><p>다시 찾아보니 <a href="https://github.com/marketplace?type=actions" target="_blank" rel="noopener noreferrer">마켓플레이스</a>에 편리한 많은 액션들이 추가되었다. (거의 2천개정도 되더란다.)</p></blockquote><p>디테일한 작업은 추후작업으로 미루고 우선 <strong>push와 pull request 이벤트를 트리거하여 test를 실행</strong>하는 것이다. <a href="https://github.com/heowc/SpringBootSample/blob/master/.github/workflows/test.yml" target="_blank" rel="noopener noreferrer">코드</a>는 다음과 같다.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">types</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">opened</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> reopened</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">18.04</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Set up JDK 1.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">java@v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">java-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Test task with Gradle Wrapper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># 제일 중요한 부분 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          chmod +x gradlew</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          ./gradlew --version</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          ./gradlew test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="최종-결과">최종 결과<a class="hash-link" href="#최종-결과" title="Direct link to heading">​</a></h4><p><code>Dependabot</code>에는 <code>Bump now</code>이라는 버튼 있어, 이를 클릭하면 주기에 상관없이 즉시 디펜던시를 찾아 pull request를 날려준다. 그러면 반영된 디펜던시로 test가 돌아 코드에 문제가 없는지 확인할 수 있다. 이로써 <strong>목표로 했던 안정적인 예제 만들기에 한 걸음 나아갔다.</strong> (아직 개선할게 많다...) </p><blockquote><p><code>Dependabot</code>, <code>github-action</code>은 완전 무료이기 때문에 간단한 저장소에 부담없이 사용하기 굉장히 좋은 기능인 것 같다.</p></blockquote><p><img loading="lazy" alt="alt github-action" src="/en/assets/images/github-action-7d827541f874e9fd126d51a5d35a7f20.png" width="2140" height="852" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="앞으로-더-개선해야할-부분들">앞으로 더 개선해야할 부분들<a class="hash-link" href="#앞으로-더-개선해야할-부분들" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="테스트-코드-작성">테스트 코드 작성<a class="hash-link" href="#테스트-코드-작성" title="Direct link to heading">​</a></h5><p>여러 프로젝트에는 나름 짜여진 테스트 코드들도 있고 테스트 코드 자체가 없거나 무의미한 테스트 코드가 있다. 정말 안정적인 코드가 되려면 필수적으로 테스트 코드를 작성해야 한다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="cache-적용">cache 적용<a class="hash-link" href="#cache-적용" title="Direct link to heading">​</a></h5><p>트리거될 때마다 grade을 다운로드하는데 <del><a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/about-github-actions#usage-limits" target="_blank" rel="noopener noreferrer">사용량 제한</a>이 있는 github-action,</del> 보다 빠른 피드백을 위해 개선해야 한다. 물론 아직은 넉넉하다. (<code>public repo</code> 는 무료이다.)</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="중복-트리거">중복 트리거<a class="hash-link" href="#중복-트리거" title="Direct link to heading">​</a></h5><p>Dependabot를 적용해보니 push과 pr이 동시에 트리거되어 2배의 소요시간이 걸리고 사용량 또한 2배로 늘어난다. 추후에는 둘 중 하나만 트리거 되게끔 개선해야되지 않을까 싶다.</p><p>...</p>]]></content:encoded>
            <category>ci</category>
            <category>github-action</category>
            <category>dependabot</category>
        </item>
        <item>
            <title><![CDATA[2019년 개발 회고]]></title>
            <link>https://heowc.dev/en/2019/12/29/2019-develop-retrospection</link>
            <guid>2019/12/29/2019-develop-retrospection</guid>
            <pubDate>Sun, 29 Dec 2019 23:19:00 GMT</pubDate>
            <description><![CDATA[2018년 회고에 이어 2019년에 대한 회고를 하려고 한다.]]></description>
            <content:encoded><![CDATA[<p>2018년 회고에 이어 2019년에 대한 회고를 하려고 한다. </p><p><em>2018년에 세웠 계획과 2019년 일을 되돌아 보며...</em></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="컨트리뷰터-되기">컨트리뷰터 되기<a class="hash-link" href="#컨트리뷰터-되기" title="Direct link to heading">​</a></h4><blockquote><p><a href="/en/2019/11/04/2019-contributon-feat-armeria">'2019 컨트리뷰톤 (feat. Armeria)'</a>라는 글을 통해 언급했지만, 이 행사를 통해 Line에서 개발하는 오픈소스인 <code>Armeria</code>에 기여를 해봄으로써, 2018년에 목표로 했던 <strong>'컨트리뷰터 되기'를 달성</strong>했다.</p></blockquote><p>단순히 오타나 문서 수정이 아닌 나를 포함한 다른 개발자들이 직접적으로/간접적으로 사용하는 코드를 수정해 보았다. 전체적인/부분적인 맥락을 이해하고, 복잡하지 않고 읽기 쉬운 코드를 만들어내는데 직접 고민해보고 의견을 나누어 볼 수 있었다. (그 만큼 PR에 많은 코멘트가 달렸다는 의미입니다...ㅎ)  </p><p>이 글을 쓰는 시점에도 여전히 기여하고 있는데, 최근에는 일코딩 이외에 개발 시간을 여기에 투자하는 편이다. 최근에는 코틀린으로 작성한 스프링부트 + 아르메리아 예제를 만들어 컨트리뷰션하기도 했다.(<a href="https://github.com/line/armeria/pull/2335" target="_blank" rel="noopener noreferrer">#2335</a>) 왜 하느냐? 흠... 재밌다. 오픈소스에 기여하는 것은 아직 낯설고 새롭지만, 말로 글로 표현 못할 흥미진진함과 즐거움이 있다. 그 외에도 그 만큼 도전해볼 주제도 많고, 소프트웨어에 변화에 어느정도 따라가기 위한 하나의 수단이 되는 것 같기도 하다는 생각이 든다. </p><p>또, 다른 개발자의 의견이나 코드도 보면서 배우는 점도 많아 많은 인사이트를 얻어갈 수 있다. 그래서인지 요즘 주변 개발자 지인을 만나면 오픈소스하라고 적극! 추천하는 편이다.</p><p>최근에는 Armeria 공식 슬랙 채널에 한국어 채널이 개설되어 언어의 장벽도 많이 낮춰진 셈이다.</p><p><img loading="lazy" alt="img korean channel in armeria slack" src="/en/assets/images/korean_channel_in_armeria_slack-404ecbc2755d12d01549911cd457729e.png" width="1384" height="612" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="일주일에-하나씩-영어-기술-블로그-정독하기">일주일에 하나씩 영어 기술 블로그 정독하기<a class="hash-link" href="#일주일에-하나씩-영어-기술-블로그-정독하기" title="Direct link to heading">​</a></h4><p>정독이란걸... 아예 못 했다. 이런저런 핑계도 많고 귀차니즘으로 인해 안 했다. (역시 안했다라는 표현이 더 적절한...) 물론 아예 안읽는 것은 아니지만, 대강 읽어 읽는둥 마는둥 했다.</p><blockquote><p>이를 반성하며 나에게 어려운 계획이라 판단하고 내년에는 보다 쉽고 계획다운 계획을 만들어 봐야겠다는 생각이 든다.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="기술-서적-6권-이상-읽기">기술 서적 6권 이상 읽기<a class="hash-link" href="#기술-서적-6권-이상-읽기" title="Direct link to heading">​</a></h4><ul><li>함수형 코틀린</li><li>오브젝트</li><li>자바 최적화</li></ul><p>스터디를 하며 주기적으로 책을 읽고 있는데, 올해는 중간에 잠깐 쉬어서 그런지 몇권 읽지 못 했다. 일이 바쁘기도 해서 그랬나..</p><blockquote><p>결과적으로, 많이 읽는 것보다 한권을 읽더라도 제대로 읽어야 했다. 내년에는 많이 읽어야 하는 것에 집착하지 말고 하나를 읽더라도 제대로 읽어야 겠다.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="꾸준히-공부하기">꾸준히 공부하기<a class="hash-link" href="#꾸준히-공부하기" title="Direct link to heading">​</a></h4><p>15분방의 존재 의미는 사실 사라진지 오래됐기도 했고... 깃헙 잔디밭(?)을 보면 커밋량도 거의 절반가량으로 뚝 떨어졌다. <strong>2018년 910 커밋</strong>을 했고, <strong>2019년 503 커밋</strong>을 했다. </p><p><img loading="lazy" alt="img GitHub commit(910) in 2018 years" src="/en/assets/images/2018_github_commit-845e68c14844ba35223b9c4d57c36b6c.png" width="1596" height="390" class="img_ev3q"></p><p>[https://github.com/heowc?from=2018-01-01&amp;to-2018-12-31]</p><p><img loading="lazy" alt="img GitHub commit(503) in 2019 years" src="/en/assets/images/2019_github_commit-380c82644d1945c024c45e523fd9f895.png" width="1596" height="390" class="img_ev3q"></p><p>[https://github.com/heowc?from=2019-01-01&amp;to-2019-12-31]</p><p>그래도 블로깅 수는 좀 늘었다. <strong>2018년 2개, 2019년 10개...</strong> 그래도 <a href="http://heowc.tistory.com/" target="_blank" rel="noopener noreferrer">티스토리</a>에서 했던 거에 비하면 적긴도 하고, 구글 애널리틱스만 보더라도 엄청 심하게 차이가 나기도 한다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="소소한-자랑거리">소소한 자랑거리<a class="hash-link" href="#소소한-자랑거리" title="Direct link to heading">​</a></h4><ul><li>내가 쓰려고 만든 첫 오픈소스인 <a href="https://www.npmjs.com/package/@heowc/hexo-tag-gdemo" target="_blank" rel="noopener noreferrer">hexo-tag-gdemo</a>에 <a href="https://babeljs.io/" target="_blank" rel="noopener noreferrer">바벨</a>을 적용했다 :)</li><li>오픈소스라고 해야할진 모르겠지만 <a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">GitHub Actions</a>으로 깃헙 페이지 배포를 위해 <a href="https://github.com/heowc/action-hexo" target="_blank" rel="noopener noreferrer">GitHub Action for Hexo</a>를 만들었다.</li><li>Digital Ocean와 DEV에서 주최한 오픈소스 커뮤니티 축제인 <a href="https://hacktoberfest.digitalocean.com/" target="_blank" rel="noopener noreferrer">HacktoberFEST</a>에 참여하여 잠옷 두벌을 득 했다 :)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="그-외-활동">그 외 활동<a class="hash-link" href="#그-외-활동" title="Direct link to heading">​</a></h4><p>다양한 세미나 참여하거나 스탭(?)으로 참여했다. </p><ul><li><a href="/en/2019/04/28/spring-camp-2019-review/">2019 스프링 캠프 (일꾼단 참여)</a></li><li><a href="/en/2019/12/19/2019-woowahan-tech-night-review/">우아한 테크의 밤</a></li><li>IT인프라 엔지니어 그룹 밋업</li><li>GDG DevFest Seoul</li><li>Kotlin Night 2019 서울</li><li>... 등등 (자잘한건 기억이 안나는...)</li></ul><p>또한, 여전히 스터디도 하고 있다. 방법론/언어 등등 관심있는 분야의 프로그래밍 서적을 읽고 토론(?)하는 스터디도 있고, 중간에 오픈소스 관련 스터디도 있긴 했으나 점차 취지에 맞는 방향으로 가고있어 스터디장이 파했다. (빠른 결단력 리스펙!)</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2020년-계획">2020년 계획<a class="hash-link" href="#2020년-계획" title="Direct link to heading">​</a></h4><ul><li>별다른 일이 없다면, 꾸준히 <strong>Armeria에 컨트리뷰션</strong> 해볼 생각이다. 아직은 부족한게 많으니 부족한 점을 하나씩 채우면서 보다 딥한 이슈를 처리해보는 것이 첫번째 목표 중 하나이다.</li><li>둘째, 현 회사에서 내년에 전체적인 아키텍처 개선을 할 것이라고 하여 <strong>업무에 집중</strong>할 생각이다. 물론, 개선 과정에서 트러블 슈팅이 있다면 이를 명확히 알고 블로깅 해보는 것도 생각하고 있다.</li><li>셋째, 읽기로한 개발 도서 읽는 것에 소홀히 하지 않아야 겠다. <strong>다독이 아닌 정독!</strong> 2020년 첫 도서로는 Netty 관련 내용이 될 것 같은데.. Armeria 컨트리뷰션에 조금 보탬이 되지 않을까싶다.</li><li>넷째, 프로그래밍 관련은 아니지만 그 동안 몸에 너무 소홀히 한 것 같아 <strong>운동</strong>을 할 생각이다. 헬스 정기권 같은 것만 하면 금방 안할게 뻔하니 P.T나 다른 대안책을 찾아보는 중 이다.</li></ul>]]></content:encoded>
            <category>2019</category>
            <category>develop</category>
            <category>retrospection</category>
        </item>
        <item>
            <title><![CDATA[2019 우아한 테크의 밤 - 요약]]></title>
            <link>https://heowc.dev/en/2019/12/19/2019-woowahan-tech-night-review</link>
            <guid>2019/12/19/2019-woowahan-tech-night-review</guid>
            <pubDate>Thu, 19 Dec 2019 11:30:00 GMT</pubDate>
            <description><![CDATA[alt intro]]></description>
            <content:encoded><![CDATA[<h1>우아한 테크의 밤 - 요약</h1><p><img loading="lazy" alt="alt intro" src="/en/assets/images/intro-2f0b827f09ff0887683d739b73a7f8c7.png" width="4032" height="3024" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="우아한형제들에선-무슨-일을-하나---김범준-ctoceo님">우아한형제들에선 무슨 일을 하나..? - 김범준 CTO/CEO님<a class="hash-link" href="#우아한형제들에선-무슨-일을-하나---김범준-ctoceo님" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="소개">소개<a class="hash-link" href="#소개" title="Direct link to heading">​</a></h4><ul><li>내년부터는 CTO가 아닌 CEO로써 활동을 하게 된다.</li><li>회사 서비스에 대한 소개</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-배달의민족">1. 배달의민족<a class="hash-link" href="#1-배달의민족" title="Direct link to heading">​</a></h4><ul><li>다른 이커머스와 견주어도 튼튼하고 견고한 서비스</li><li>WHY?<ul><li>최대 300만 쓰기 트랜잭션도 버텨냄<ul><li><a href="https://microservices.io/patterns/data/cqrs.html" target="_blank" rel="noopener noreferrer">CQRS</a>와 <a href="https://microservices.io/patterns/data/event-sourcing.html" target="_blank" rel="noopener noreferrer">EventSourcing</a> 도입</li></ul></li><li>오프라인 모드 지원<ul><li>AS-IS: 별도의 오류페이지</li><li>TO-BE: 노출되어 있던 로컬 캐싱(번호, 메뉴, 주문 등등..)</li></ul></li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-배민라이더스-배민커넥트">2. 배민라이더스, 배민커넥트<a class="hash-link" href="#2-배민라이더스-배민커넥트" title="Direct link to heading">​</a></h4><ul><li>(풀, 파트) 타임의 배달원</li><li>약 10,000명</li><li>주문이 들어오면 근처 라이더에게 타겟팅<ul><li>타다와 같은 방식(<em>타다는 약 1,000대가량 된다고 함</em>)</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-b마트">3. B마트<a class="hash-link" href="#3-b마트" title="Direct link to heading">​</a></h4><ul><li>배민라이더스, 배민커넥트분들이 마트 물건을 배달</li><li>편의점 보다 싸고 간편함 (일부 지역 서비스 중)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-로봇-딜리버리">4. 로봇 딜리버리<a class="hash-link" href="#4-로봇-딜리버리" title="Direct link to heading">​</a></h4><ul><li>로봇으로 배달</li><li>건국에서 베타 테스트<ul><li>실제로 로봇 딜리버리로 주문되는 양이 더 많음</li><li>그 외에도 몇 군데 있음(<em>까먹...</em>)</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="그-외">그 외<a class="hash-link" href="#그-외" title="Direct link to heading">​</a></h4><ul><li>만화경, 띠잉, 등등등..</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="회사-개발-조직">회사 개발 조직<a class="hash-link" href="#회사-개발-조직" title="Direct link to heading">​</a></h4><ul><li>다양항 기술 세미나 진행 중<ul><li>우아한 테크 코스</li><li>우아한 테크 러닝</li><li>우아한 테크 세미나</li></ul></li><li>개발 조직 비전: <strong>코드 덩어리가 아닌 가치를 만들고 스스로의 가치를 높이며 일한다.</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="우아한-아키텍처---김영한님">우아한 아키텍처 - 김영한님<a class="hash-link" href="#우아한-아키텍처---김영한님" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="소개-1">소개<a class="hash-link" href="#소개-1" title="Direct link to heading">​</a></h4><ul><li>4년간의 마이크로 서비스 전환기</li><li>하게 된 이유? 매년 2배의 주문량 증가로 기존 시스템(모놀리식)으로 감당이 안됨</li><li>(<em>시간이 없어 후다닥 넘어가느라 조금 아쉽...</em>)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2015">2015<a class="hash-link" href="#2015" title="Direct link to heading">​</a></h4><ul><li><strong>하루 주문 5만</strong></li><li>PHP, MS-SQL(수천 개의 프로시저), ASP</li><li>모놀리식</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2016">2016<a class="hash-link" href="#2016" title="Direct link to heading">​</a></h4><ul><li><strong>하루 주문 10만</strong></li><li>PHP에서 Java로 전환 시작</li><li>마이크로 서비스 도전<ul><li>결제, 주문 중계</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2017">2017<a class="hash-link" href="#2017" title="Direct link to heading">​</a></h4><ul><li><strong>하루 주문 20만</strong></li><li>대 장애의 시대<ul><li>매주 장애</li><li>CEO님이 그만 좀 장애내라고 메일 썻다함 (<em>주르륵...</em>)</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2018-상반기">2018 상반기<a class="hash-link" href="#2018-상반기" title="Direct link to heading">​</a></h4><ul><li>ms-sql 제거</li><li>가게 상세<ul><li>다이나모 배치 갱신</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2018-하반기">2018 하반기<a class="hash-link" href="#2018-하반기" title="Direct link to heading">​</a></h4><ul><li>포인트, 쿠폰, 리뷰 MSA 전환<ul><li>리뷰 - 이벤트 기반 아키텍처</li><li>광고, 가게/업주 - 프로젝트 먼데이</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="msa-고민">MSA 고민<a class="hash-link" href="#msa-고민" title="Direct link to heading">​</a></h4><ul><li><p>CQRS =&gt; 성능, 장애 격리, 데이터 동기화</p><ul><li>조회, 명령 분리(<em>master, slave 같은 개념이 아닌 별도의 데이터베이스로 분리 가능한 형태</em>)</li><li>명령으로 데이터 변경되면 조회에 이벤트로 전달</li><li>데이터 싱크 1~3초</li><li>zero-payload<ul><li>id만 전달 후, api로 최신 데이터 가져와서 처리</li></ul></li><li>최소 데이터 보관 원칙<ul><li>(<em>뭐더라...</em>)</li></ul></li></ul></li><li><p>데이터 싱크 장애 대응</p><ul><li>이벤트 재발행</li><li>(전체, 부분) 임포트 -&gt; 이벤트 서비스(sqs, sns) 장애 대응</li></ul></li><li><p>캐시</p></li><li><p>서킷 브레이커</p></li><li><p>비동기 논블로킹</p><ul><li>Reactor, WebFlux</li></ul></li><li><p>결과적으로, 크게 16개의 서비스로 분리</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="패널-토크">패널 토크<a class="hash-link" href="#패널-토크" title="Direct link to heading">​</a></h3><ul><li>객체지향 도전?<ul><li>한번에 하려고 하지말자</li></ul></li><li>학습법?<ul><li>책 vs 프로젝트</li><li>나만의 학습법을 찾아라</li><li>기술 공부는 회사에서 쓰는 것, 쓸 것만 공부해도 충분하다</li><li>기술 스킬을 공부하기 보다는 방법론을 공부하자... (TDD 같은)</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="느낀점">느낀점<a class="hash-link" href="#느낀점" title="Direct link to heading">​</a></h3><ul><li>역시나 마이그레이션은 (겁나) 어려운 것이다.</li><li>MSA를 하려면 굉장히 많은 사이드 이펙트에 대한 고려가 필요하다.</li><li>나만의 학습법을 찾아보자...!</li></ul>]]></content:encoded>
            <category>semina</category>
            <category>2019</category>
            <category>woowahan-tech</category>
        </item>
        <item>
            <title><![CDATA[NullAway 알아보기]]></title>
            <link>https://heowc.dev/en/2019/11/29/nullaway-overview</link>
            <guid>2019/11/29/nullaway-overview</guid>
            <pubDate>Fri, 29 Nov 2019 22:00:00 GMT</pubDate>
            <description><![CDATA[프로그래밍을 하다보면 대부분의 언어마다 null 이라는 값이 존재한다. 때로는 이 존재가 문제를 야기시키기도 하는데 자바에서는 null인 객체를 참조하게 되면 NullPointException 이라는 런타임 에러를 던지게 된다.]]></description>
            <content:encoded><![CDATA[<p>프로그래밍을 하다보면 대부분의 언어마다 <code>null</code> 이라는 값이 존재한다. 때로는 이 존재가 문제를 야기시키기도 하는데 자바에서는 <code>null</code>인 객체를 참조하게 되면 <code>NullPointException</code> 이라는 런타임 에러를 던지게 된다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> message </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Hello Would!"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// throw NullPointException</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>물론, 위와 같은 코드를 작성하진 않겠지만 상황에 따라서 휴먼 에러는 언제나 발생할 수 있고 발견하기 어려울 수 있다.</p><blockquote><p>널 레퍼런스를 처음 만든 토니 호어가 '10억 불짜리 실수'(billion dollar mistake)였다고 회고한 적 있다. - 나무위키 中</p></blockquote><p>테스트 코드를 만들면 이를 방지할 수 있겠지만 근본적으로 해결할 수 없는(?) 문제이기 때문에 관련 프레임워크나 대체 언어(ex. <code>kotlin</code>)가 나오고 있다. 그 중 uber에서 만든 <a href="https://github.com/uber/NullAway" target="_blank" rel="noopener noreferrer"><code>NullAway</code></a>를 알아보자.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="nullaway"><a href="https://github.com/uber/NullAway" target="_blank" rel="noopener noreferrer"><code>NullAway</code></a><a class="hash-link" href="#nullaway" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="애노테이션-기반이다-nullable-nonnull-등">애노테이션 기반이다. (<code>@Nullable</code>, <code>@NonNull</code> 등)<a class="hash-link" href="#애노테이션-기반이다-nullable-nonnull-등" title="Direct link to heading">​</a></h5><p>자바의 대표적인 프레임워크인 Spring을 보면 <code>@Nullable</code>가 필드나 파라미터, 반환값 등에 붙은 것을 볼 수 있는데, <a href="https://jcp.org/en/jsr/detail?id=305" target="_blank" rel="noopener noreferrer">js-305</a>에서 제공하는 메타 에노테이션들 중 하나이다. </p><blockquote><p>※ js-305: 자바 소프트웨어 오류 발견 도구를 위한 표준</p></blockquote><h5 class="anchor anchorWithStickyNavbar_LWe7" id="error-prone이-내장되어-있다"><a href="https://github.com/google/error-prone" target="_blank" rel="noopener noreferrer"><code>error-prone</code></a>이 내장되어 있다.<a class="hash-link" href="#error-prone이-내장되어-있다" title="Direct link to heading">​</a></h5><p>error-prone은 구글에서 만든 정적 분석 툴로 프로그래밍에서 흔히 하기 쉬운 패턴을 찾아 알려준다. 해당 패턴은 <a href="http://errorprone.info/bugpatterns" target="_blank" rel="noopener noreferrer">공식문서</a>에서 찾아볼 수 있고, 커스텀하게 추가할 수도 있다. 잠깐 훑어봤는데 이를 참고하여 자신의 잘못된 프로그래밍도 개선될 수 있지 않을까 싶다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="그-외">그 외<a class="hash-link" href="#그-외" title="Direct link to heading">​</a></h5><ul><li>모든 NPE를 방어하지 못한다. (어찌보면 당연한거겠지만...)</li><li>빌드 시간이 더 걸린다. (문서상으로 최대 10% 미만이라고 하니 크게 무리 없지 않을까 싶다.)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="초간단-샘플">초간단 샘플<a class="hash-link" href="#초간단-샘플" title="Direct link to heading">​</a></h4><p>간단히 문자열을 소문자로 만들어주는 메소드가 있다고 가정하자.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> bar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> bar</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>본의 아니게 파라미터에 <code>null</code>을 넣는다면 컴파일 과정에서 다음과 같은 에러 메시지가 출력된다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// error: [NullAway] passing @Nullable parameter 'null' where @NonNull is required</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>설정이나 샘플 코드는 공식 문서나 <a href="https://github.com/heowc/JavaBasePractice/tree/master/NullAway" target="_blank" rel="noopener noreferrer">JavaBasePractice - NullAway</a>를 참고할 수 있다.</p>]]></content:encoded>
            <category>js305</category>
            <category>uber</category>
            <category>nullaway</category>
            <category>null-reference</category>
        </item>
        <item>
            <title><![CDATA[2019 컨트리뷰톤 (feat. Armeria)]]></title>
            <link>https://heowc.dev/en/2019/11/04/2019-contributon-feat-armeria</link>
            <guid>2019/11/04/2019-contributon-feat-armeria</guid>
            <pubDate>Mon, 04 Nov 2019 18:00:00 GMT</pubDate>
            <description><![CDATA[서론]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="서론">서론<a class="hash-link" href="#서론" title="Direct link to heading">​</a></h3><p>올해는 끝나가고 뭔가 해논게 없어서 좌절하고 있을 때 쯤 <a href="https://www.oss.kr/contributhon_notice/show/d5f920a1-648b-4869-8a1a-d042fc263ab1" target="_blank" rel="noopener noreferrer">공개SW컨트리뷰톤</a>을 접했다.</p><p>여러 프로젝트 중에 <a href="https://github.com/line/armeria" target="_blank" rel="noopener noreferrer">아르메리아</a>가 눈에 들어왔다. <strong>아르메리아는 라인에서 만들고 있는 마이크로서비스 프레임워크</strong>로, 최근 자바 진영에서 마이크로서비스 프레임워크가 나와서 서치 중에 보던 프레임워크 중에 하나였던 것으로 기억한다. 그 외에도 여러 프로젝트가 있었지만 내가 할 수 있는 것은 별로없었다. <em>자바스크립트, 파이썬, 딥러닝...</em></p><p><img loading="lazy" alt="alt armeria_logo" src="/en/assets/images/armeria-logo-4dd640a57e9c6515ea1a925662479988.png" width="2212" height="698" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="초기-셋팅--첫-이슈-고르기">초기 셋팅 &amp; 첫 이슈 고르기<a class="hash-link" href="#초기-셋팅--첫-이슈-고르기" title="Direct link to heading">​</a></h3><p>그렇게 아르메리아를 로컬PC에 Clone을 받으며 README를 읽어가며 Project 셋팅을 맞추었다. 이제와서 생각하는거지만 조금 더 꼼꼼히 보았으면 좋았을 것 같다는 후회를 해본다. (PR에 엄청 많은 코멘트가...) 이슈를 해결하기 위해 제안해주신 이슈들을 포함해 총 200 여개의 이슈들을 하나씩 살펴보고, 그 중에서 <a href="https://github.com/line/armeria/issues?q=is%3Aissue+is%3Aopen+label%3Agood-first-issue" target="_blank" rel="noopener noreferrer"><code>good-first-issue</code></a>를 최우선적으로 보았다.</p><blockquote><p>오픈소스에 기여를 해보고 싶다면, 등록된 이슈 중에 <code>good-first-issue</code> 라벨을 찾아보세요. 쉬운 진입점이 될 수 있습니다.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="provide-a-way-to-set-an-example-request-for-annot-1855">Provide a way to set an example request for Annot... (<a href="https://github.com/line/armeria/issues/1855" target="_blank" rel="noopener noreferrer">#1855</a>)<a class="hash-link" href="#provide-a-way-to-set-an-example-request-for-annot-1855" title="Direct link to heading">​</a></h4><p>컨트리뷰톤 기간에 진행했던 첫 이슈이다. 간략히 설명하자면, 아르메리아에서는 <a href="https://swagger.io/" target="_blank" rel="noopener noreferrer">Swagger</a>같은 <a href="https://line.github.io/armeria/server-docservice.html" target="_blank" rel="noopener noreferrer">DocService</a>를 제공한다. 하지만 스프링 부트를 연동하게 되면 특정 기능에서는 예제 요청과 헤더값를 추가하는 기능을 제공하지 않아 이를 추가해야 한다는 이슈였다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="-해결2026">↳ 해결(<a href="https://github.com/line/armeria/pull/2026" target="_blank" rel="noopener noreferrer">#2026</a>)<a class="hash-link" href="#-해결2026" title="Direct link to heading">​</a></h4><p>거의 3주라는 기간이 걸렸고 약 51개의 코멘트를 주고 받았다. 중간에 회사 워크샵과 추석이랑 껴있어서 진행이 더딘감이 있기도 했지만 간단한 기능임에도 많은 시간이 걸렸다. 그 만큼 놓친 부분도 많았고 미숙한 영어로 인한 딜레이도 있었다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="두-번째-세-번째">두 번째, 세 번째...<a class="hash-link" href="#두-번째-세-번째" title="Direct link to heading">​</a></h3><p>그 이후로도 컨튜리뷰톤이 진행되면서 여러가지를 진행했다.</p><p>총 4개의 PR를 마무리하였고,</p><ul><li><a href="https://github.com/line/armeria/pull/2100" target="_blank" rel="noopener noreferrer">https://github.com/line/armeria/pull/2100</a></li><li><a href="https://github.com/line/armeria/pull/2142" target="_blank" rel="noopener noreferrer">https://github.com/line/armeria/pull/2142</a></li><li><a href="https://github.com/line/armeria/pull/2187" target="_blank" rel="noopener noreferrer">https://github.com/line/armeria/pull/2187</a></li></ul><p>1개의 기능 제안을 했으며</p><ul><li><a href="https://github.com/line/armeria/issues/2031" target="_blank" rel="noopener noreferrer">https://github.com/line/armeria/issues/2031</a></li></ul><p>다른 개발자의 코드리뷰도 해보았다.</p><ul><li><a href="https://github.com/line/armeria/pull/2128" target="_blank" rel="noopener noreferrer">https://github.com/line/armeria/pull/2128</a></li><li><a href="https://github.com/line/armeria/pull/2180" target="_blank" rel="noopener noreferrer">https://github.com/line/armeria/pull/2180</a></li></ul><blockquote><p>컨트리뷰톤기간 이외에도 지속적인 관심을 가지며 이슈 제기, 코드 기여를 하고 있다. </p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hacktoberfest-2019">Hacktoberfest 2019<a class="hash-link" href="#hacktoberfest-2019" title="Direct link to heading">​</a></h3><p>Hacktoberfest이라는 국제 개발자 행사(?)도 알게되어 참여했다. 10월 동안 PR 4개가 완료되면 한정판 티셔츠를 준다. <strong>(완료~!)</strong></p><p><img loading="lazy" alt="alt hacktoberfest_2019" src="/en/assets/images/hacktoberfest-2019-a1de18e2a3a4b84c57901001b1c2550d.png" width="1550" height="698" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="느낀점">느낀점<a class="hash-link" href="#느낀점" title="Direct link to heading">​</a></h3><ol><li>영어가 취약하다.</li></ol><ul><li>오픈소스를 하기 위해선 기본적으로 영어가 많이 필요하다는 것을 알게되었다. 이번에는 슬랙을 통해 질의응답을 할 수 있는 상황이였지만, 앞으로 나아가기 위해선 꼭 필요하지 않을까 싶다.</li></ul><ol start="2"><li>앞으로도 힘이 닿는데까지 오픈소스에 기여해보아야겠다.</li></ol><ul><li>이번 컨트리뷰톤을 통해 많은 인사이트를 경험할 수 있었다. <ul><li>평소에 보지 않았던 영역을 보게 된다거나.. </li><li>잊고있던 개념을 다시 되돌아 보게 된다거나.. </li><li>프레임워크 내부를 들여다 보면서 동작원리를 이해해보거나..</li><li>타 프레임워크랑 비교해보기도 하고..</li></ul></li></ul><ol start="3"><li>여러분 컨트리뷰톤 하세요!</li></ol><ul><li>2번이 어렵다면 컨트리뷰톤행사에 참가해보면 좋은 경험이 될 수 있을 것 같다. 엎서 말했듯이 좋은 경험을 할 수 있을 뿐만 아니라 좋은 자극제가 될 수 있다고 생각한다. </li></ul><ol start="4"><li>발표</li></ol><ul><li>Armeria 멘티 중 MVP가 되어 생애 첫 발표를 해보았다. 200명 앞에서 발표를 하는데 잘할리가.. 요즘 바쁜 업무로 마무리가 미흡했고 발표에 신경을 못 써서 아쉬움이 많이 남는다. (사실 원래도 발표를 잘 못 하는...) </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="결과">결과<a class="hash-link" href="#결과" title="Direct link to heading">​</a></h3><p>그리하여 최종적으로 전체 20팀 중 <a href="https://www.oss.kr/contributhon_notice/show/97fbde9f-3854-428d-b6ec-294002463148?page=1" target="_blank" rel="noopener noreferrer">우수상</a>을 차지 했다. 개인적으로 아쉬운 성적인데 내가 발표를 좀 더 잘했더라면.. 이라는 아쉬운 마음이...ㅠ</p>]]></content:encoded>
            <category>contributon</category>
            <category>line</category>
            <category>armeria</category>
            <category>2019</category>
        </item>
        <item>
            <title><![CDATA[Java에서 iOS Push 삽질기]]></title>
            <link>https://heowc.dev/en/2019/05/13/ios-push-to-java</link>
            <guid>2019/05/13/ios-push-to-java</guid>
            <pubDate>Mon, 13 May 2019 19:55:41 GMT</pubDate>
            <description><![CDATA[직접 APNs를 사용하면서 경험한 삽질기이다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>직접 <a href="https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1" target="_blank" rel="noopener noreferrer">APNs</a>를 사용하면서 경험한 삽질기이다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="시작하기-전에">시작하기 전에...<a class="hash-link" href="#시작하기-전에" title="Direct link to heading">​</a></h3><p>Push(Android, iOS 등)를 고려한다면 고민말고 <a href="https://firebase.google.com/docs/cloud-messaging" target="_blank" rel="noopener noreferrer">FCM(Firebase Cloud Messaging)</a>을 사용하자. Android 뿐만 아니라 다른 플랫폼도 지원한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="배경">배경<a class="hash-link" href="#배경" title="Direct link to heading">​</a></h3><p><a href="https://www.otherlevels.com/" target="_blank" rel="noopener noreferrer">OtherLevels</a>이라는 메시징 플랫폼을 사용 중에 있으며, 여러가지 이유(?)로 이를 사용하지 않고 직접 메시징 시스템을 구축하려고 한다. 인수인계 받은바로는 Android, iOS 각각 플랫폼별로 별도로 처리해야 하는 상황이다.</p><blockquote><p>앞에서 언급했던 것 처럼 <strong>APNs</strong>만 다룰 예정이다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="apns-이란">APNs 이란?<a class="hash-link" href="#apns-이란" title="Direct link to heading">​</a></h3><p>APNs(Apple Push Notification Service)는 Apple Device에 Push를 보내줄 수 있는 서비스이다. 지원하는 방식으로는 다음과 같다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-push">Legacy Push<a class="hash-link" href="#legacy-push" title="Direct link to heading">​</a></h4><ul><li>TLS(SSL) 소켓 통신</li><li>Production(gateway.push.apple.com:2195) / Development(gateway.sandbox.push.apple.com:2195)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="push">Push<a class="hash-link" href="#push" title="Direct link to heading">​</a></h4><ul><li>HTTP/2 통신</li><li>Production(api.push.apple.com:443) / Development(api.sandbox.push.apple.com:443)</li></ul><blockquote><p>HTTP/1.1 통신을 지원하지 않는다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-push-이용하기">Legacy Push 이용하기<a class="hash-link" href="#legacy-push-이용하기" title="Direct link to heading">​</a></h3><p><a href="https://github.com/fernandospr/javapns-jdk16" target="_blank" rel="noopener noreferrer">fernandospr/javapns-jdk16</a> 테스트 진행. 하지만 마지막 커밋이 2017-05-17으로 현재 기준(2019-05-14)으로 만 2년이 넘은 상태이다. 이와 같이 <strong>Legacy Push에 대한 오픈소스 관리는 거의 안되는 상태</strong>이다. 또한, Thread Pool 관리가 안되기 때문에 코드의 복잡성이 늘어나거나 리소스 관리가 안될 수 있으니 조심해서 사용하자.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/* fernandospr/javapns-jdk16 샘플 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">PushNotificationBigPayload</span><span class="token plain"> payload </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">PushNotificationBigPayload</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">complex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">payload</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addAlert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Message received from Bob"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* ... */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Push</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">payload</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">payload</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p12File</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> password</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isProduction</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> deviceTokens</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="push-이용하기">Push 이용하기<a class="hash-link" href="#push-이용하기" title="Direct link to heading">​</a></h3><p><a href="https://github.com/CleverTap/apns-http2" target="_blank" rel="noopener noreferrer">CleverTap/apns-http2</a>와 <a href="https://github.com/relayrides/pushy" target="_blank" rel="noopener noreferrer">relayrides/pushy</a>, RestTemplate 테스트 진행. 하지만 지금 서버가 Java 8이기 때문에 HTTP/2을 지원하지 않아 별도의 작업이 필요하다. (사실 <a href="https://github.com/relayrides/pushy" target="_blank" rel="noopener noreferrer">relayrides/pushy</a>는 없어도 된다.)</p><p>※ 참고) <a href="https://www.ibm.com/support/knowledgecenter/ko/SS7K4U_liberty/com.ibm.websphere.wlp.zseries.doc/ae/cwlp_alpnsupport.html" target="_blank" rel="noopener noreferrer">ALPN 지원</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/* CleverTap/apns-http2 샘플 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">FileInputStream</span><span class="token plain"> cert </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">FileInputStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/path/to/certificate.p12"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">ApnsClient</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ApnsClientBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withProductionGateway</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">inSynchronousMode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withCertificate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cert</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withPassword</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"&lt;password&gt;"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Notification</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Notification</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Builder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"&lt;the device token&gt;"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">alertBody</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Hello"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">NotificationResponse</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>그리고... 방법 중에 하나로 <code>alpn-boot-{version}.jar</code> 다운받고, 실행시에 다음 옵션을 추가해야한다.</p><div id="demo-terminal" style="min-height:80px"></div><br><br>]]></content:encoded>
            <category>java</category>
            <category>ios-push</category>
            <category>apns</category>
        </item>
        <item>
            <title><![CDATA[Spring Camp 2019 후기]]></title>
            <link>https://heowc.dev/en/2019/04/28/spring-camp-2019-review</link>
            <guid>2019/04/28/spring-camp-2019-review</guid>
            <pubDate>Sun, 28 Apr 2019 20:00:00 GMT</pubDate>
            <description><![CDATA[2017년을 시작으로 2018년, 2019년, ... 세번째로 참석하게 되는 Spring Camp 후기 이다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>2017년을 시작으로 2018년, 2019년, ... <strong>세번째로 참석하게 되는 Spring Camp 후기</strong> 이다.</p></blockquote><p>첫 Spring Camp를 참석했을 때가 생각나는데, KSUG 10주년 기념을 이틀간 행사를 진행되었던 것으로 기억한다. 그 때가 내 인생에 있어 첫 개발 행사이고 그 만큼 기억에 많이 남는 행사였다. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="일꾼단으로-참석하다">일꾼단으로 참석하다.<a class="hash-link" href="#일꾼단으로-참석하다" title="Direct link to heading">​</a></h3><p>올해는 다른 때와는 다르게 일꾼단으로써 Spring Camp를 참석하게 되었다. 작년 쿠팡에서 할 때도 지원했었으나, 떨어지고 (일꾼단 지원도 빡시네..) 올해도 지원하여 결국에는 일꾼단에 선정되었다. 그렇게 올해의 Spring Camp가 어떻게 만들어지고 모습을 갖춰지는지 지켜볼 수 있었다.</p><p><img loading="lazy" alt="alt image" src="/en/assets/images/spring-camp-ready-e95a17cddf89fd090e107db77e9644ef.jpg" width="4032" height="2268" class="img_ev3q"></p><p>다만 아쉬운 점이 있다면, 업무로 인해서 회의나 리뷰에 거의 참여하지 못했다...</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="세션-시작">세션 시작<a class="hash-link" href="#세션-시작" title="Direct link to heading">​</a></h3><blockquote><p>의자 나르고 배치하고... 기념품 나눠드리고...</p></blockquote><p>다행인지(?) 운이 좋은 탓인지(?) 세션장 보조 역할을 맡게되어 <code>Track 2</code> 대부분의 세션을 들을 수 있었다. 물론 일반 참석자로 오신 개발자분들처럼 열심히 들을 순 없었지만, 한편으로는 작년보다 표 구매가 더 어려웠던 것 같은데 일꾼단이 아니였으면 과연 참석할 수 있었을까? 라는 생각이 들면서 들을 수 있는 상황에 감사했다. (주변 개발자분들은 티켓팅에 전부 실패하심...)</p><p><img loading="lazy" alt="alt image" src="/en/assets/images/2-track-c66192dd96532d1163719f08abb7cd85.jpg" width="4032" height="2268" class="img_ev3q"></p><p>김태완님의 "GraalVM과 스프링, 이상과 현실"을 시작으로 세션이 시작되었다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="김태완님의-graalvm과-스프링-이상과-현실">김태완님의 "GraalVM과 스프링, 이상과 현실"<a class="hash-link" href="#김태완님의-graalvm과-스프링-이상과-현실" title="Direct link to heading">​</a></h4><p><a href="https://en.wikipedia.org/wiki/GraalVM" target="_blank" rel="noopener noreferrer">GraalVM</a>이라는 또 다른 형태의 JVM이 소개되었고 굉장히 새로웠다. 물론 아직 정식 릴리즈가 아니지만 곧 릴리즈 예정이라고 한다. 장점은 하나하나 자세히 설명할 순 없지만 간단히 나열하자면 <strong>High Performance, Polyglot, Native Code, AOT Compiler, Java로 만들어진 JVM 등...</strong>  아쉬운 점이 있다면 Reflection 미지원이다 보니 아직은 스프링에서 사용할 수 없다. 하지만 스프링쪽에서 관심을 가졌는지 <a href="https://spring.io/blog/2018/09/21/spring-framework-5-1-goes-ga" target="_blank" rel="noopener noreferrer">5.1부터 GraalVM을 지원하기 위한 feature가 진행 중인 것</a>으로 알고 있다. 그리고 실제로 Twitter에서는 JVM을 바꾼 것만으로도 20%이상의 성능 개선이 되었다는 내용도 있다고 한다. </p><ul><li><a href="https://www.slideshare.net/TaewanKim/cloud-native-java-graalvm" target="_blank" rel="noopener noreferrer">https://www.slideshare.net/TaewanKim/cloud-native-java-graalvm</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="부종민님의-spring-websocket">부종민님의 "spring websocket"<a class="hash-link" href="#부종민님의-spring-websocket" title="Direct link to heading">​</a></h4><p>Spring 4.x로 넘어오면서 지원하기 시작한 WebSocket에 대한 내용이다. 보통 WebSocket은 node진영에서 <a href="https://socket.io/" target="_blank" rel="noopener noreferrer">socket.io</a>가 주로 언급되는데, Spring Camp에서 이 주제를 듣게되니 반갑기도 했다. 커넥션 횟수를 줄여 네트워크 비용을 줄일 수 있는 장점이 있는데 이 세션을 듣기 전까지 커넥션을 계속 유지하므로 비용이 클 수도 있지 않을까?라는 궁금증에 대한 해답도 얻을 수 있었다.</p><ul><li><a href="https://docs.google.com/presentation/d/1Y9q0rkgT9qIgjDXr_vILJUtlwmgc9Zj_BgNLBfyNBnU/edit" target="_blank" rel="noopener noreferrer">https://docs.google.com/presentation/d/1Y9q0rkgT9qIgjDXr_vILJUtlwmgc9Zj_BgNLBfyNBnU/edit</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="박성철님의-자바에서-null을-안전히-다루는-방법">박성철님의 "자바에서 null을 안전히 다루는 방법"<a class="hash-link" href="#박성철님의-자바에서-null을-안전히-다루는-방법" title="Direct link to heading">​</a></h4><p>역시 영향력 있으신 분이다. 다른 세션보다 짧은 세션 시간임에도 많은 분들이 참석해주셨고 개인적으로 내용도 너무 좋았다. 특히, 언급하셨던 <a href="https://checkerframework.org/" target="_blank" rel="noopener noreferrer">checker framework</a>는 시간내서라도 찾아봐야겠다. 슬라이드도 다시 봐야지...</p><p>[일꾼단 슬랙 상황]<!-- -->
<img loading="lazy" alt="alt image" src="/en/assets/images/nullnull-a4934cfd7faaf8c64dad72a91d6a70fa.png" width="1434" height="698" class="img_ev3q"></p><p><em>1 Track에 계신분이 43명이시면 나머지분들은 어디로...?</em></p><ul><li><a href="https://www.slideshare.net/gyumee/null-142590829" target="_blank" rel="noopener noreferrer">https://www.slideshare.net/gyumee/null-142590829</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="권용근님의-무엇을-테스트할-것인가-어떻게-테스트할-것인가">권용근님의 "무엇을 테스트할 것인가? 어떻게 테스트할 것인가?"<a class="hash-link" href="#권용근님의-무엇을-테스트할-것인가-어떻게-테스트할-것인가" title="Direct link to heading">​</a></h4><p>가장 인상 깊었던 말이 있다. "테스트할 수 없는 것으로 인해 테스트할 수 있는 것을 오염시키지말자" (맞나..?)</p><p>내용도 정말 좋았다. <strong>Test Double, 상호종속적이지 않은 테스트, Embedded System 사용, ...</strong> 하지만 나는 테스트를 잘 작성하지 않는다. 세션 내내 반성의 시간 그 자체인 듯하다. 반성하고 또 반성..</p><p><em>오늘부터 Test! 라면서 또 안하겠지..? 마치 오늘부터 다이어트! 라는 느낌이랄까...</em></p><ul><li><a href="https://www.slideshare.net/ssuser59a869/ksug-2019" target="_blank" rel="noopener noreferrer">https://www.slideshare.net/ssuser59a869/ksug-2019</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="이경일님의-당신도-할-수-있는-레거시-프로젝트-개선-이야기">이경일님의 "당신도 할 수 있는 레거시 프로젝트 개선 이야기"<a class="hash-link" href="#이경일님의-당신도-할-수-있는-레거시-프로젝트-개선-이야기" title="Direct link to heading">​</a></h4><p><code>Track 2</code> 중에서 가장 재밌던(?) 세션이 아니였나 싶다. 그 만큼 공감되고 현실적인 내용이 포인트였다.</p><p>Spring 3.x에서 Spring Boot로, 성능 튜닝, 코드 개선 등 흥미진진한 얘기가 많았다. 당장 대다수의 개발자들이 레거시에 마주하며 몸부림치는 상황이기 때문에 더더욱 그랬을지도 모른다는 생각이 든다. <strong>그 중 가장 으뜸은 replaceAll 6000개...</strong></p><ul><li><a href="https://github.com/LeeKyoungIl/SpringCamp2019" target="_blank" rel="noopener noreferrer">https://github.com/LeeKyoungIl/SpringCamp2019</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="정윤진님-김필중님의-멀티리전-가용성을-위한-글로벌-캐싱---hidden-micro-services">정윤진님, 김필중님의 "멀티리전 가용성을 위한 글로벌 캐싱 - Hidden micro services"<a class="hash-link" href="#정윤진님-김필중님의-멀티리전-가용성을-위한-글로벌-캐싱---hidden-micro-services" title="Direct link to heading">​</a></h4><p>회사에서 캐싱용도로 redis, ehcache를 사용하고 있어서 <a href="https://github.com/Netflix/EVCache" target="_blank" rel="noopener noreferrer">EVCache</a>는 무슨 장점이 있을까?라는 궁금증으로 세션을 듣게 되었다. EVCache는 Netflix에서 만든 분산 인메모리 데이터 저장소이다. 기억에 남는건 효율 극대화를 위해 hot data는 RAM(Memcached)에 cold data는 SSD(Mnemonic)에 유지시킨다고 한다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="김민규님의-local-cache와-invalidation-message-propagation-전략을-활용하여-api-성능-튜닝하기">김민규님의 "Local Cache와 Invalidation Message Propagation 전략을 활용하여 API 성능 튜닝하기"<a class="hash-link" href="#김민규님의-local-cache와-invalidation-message-propagation-전략을-활용하여-api-성능-튜닝하기" title="Direct link to heading">​</a></h4><p>종종 KSUG 페이스북에 작성하신 글을 공유해주시는 개발자분인데 최근에 작성하신 내용 관련해서 발표하신다. 앞서 말했듯 회사에서 사용하는 Redis, Ehcache와 무슨 차이가 있는지도 궁금했다. Hazelcast는 IMDG(In Memory Data Grid)이다. 이분이 Hazelcast를 선택한 결정적인 이유(?)는 <a href="https://pkgonan.github.io/2018/10/hazelcast-hibernate-second-level-cache" target="_blank" rel="noopener noreferrer">Invalidation Message Propagation 기능 제공</a>이라고 볼 수 있을 것 같다.</p><blockquote><p>사내에서 Local Cache로 Ehcache, Distributed Cache로 Redis를 사용하는데 이에 대한 복잡성을 HazelCast로 해결할 수 있지 않을까란 생각이 들기도 한다.</p></blockquote><p>Cluster 구성 시, 클라우드를 이용한다면 각각의 클라우드 기능을 활용한 <a href="https://hazelcast.org/plugins/?type=cloud-discovery#aws" target="_blank" rel="noopener noreferrer">플러그인</a>도 제공한다. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="마무리">마무리..<a class="hash-link" href="#마무리" title="Direct link to heading">​</a></h3><p>나에게 있어 들을 것도 배울 것도 참 많은 <strong>Spring Camp는 역시나 옳다.</strong> 일꾼단이라는 색다른 경험도 했다. 물론 참여가 저조하여 함께한 분들과 많은 대화를 하지 못해 아쉽고 미안한 점이 더 많지만, 내가 좋아하는 행사에 조금이나마 보탬이 되었다는 생각에 뿌듯하기도 하다.</p><p><em>배움의 끝은 어디인가... GraalVM, WebSocket, Testing, EVCache, Hazelcast, Kotlin, ...</em></p>]]></content:encoded>
            <category>review</category>
            <category>spring-camp</category>
        </item>
        <item>
            <title><![CDATA[MySQL - 큰 테이블을 다루는 jdbc 활용법 ②]]></title>
            <link>https://heowc.dev/en/2019/02/12/using-mysql-jdbc-to-handle-large-table-2</link>
            <guid>2019/02/12/using-mysql-jdbc-to-handle-large-table-2</guid>
            <pubDate>Tue, 12 Feb 2019 23:30:00 GMT</pubDate>
            <description><![CDATA[데이터베이스에 한 번에 많은 데이터 써야 한다면 어떻게 해야할까?]]></description>
            <content:encoded><![CDATA[<blockquote><p>데이터베이스에 한 번에 많은 데이터 써야 한다면 어떻게 해야할까?</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="왜-이런-작업이-필요로-하는가">왜 이런 작업이 필요로 하는가?<a class="hash-link" href="#왜-이런-작업이-필요로-하는가" title="Direct link to heading">​</a></h3><p>아마 주변에서 제일 간단하게 찾을 수 있는 상황은 <strong>엑셀 파일 업로드</strong>가 있을 수 있다. 많게는 수 만건, 수 십만건까지 데이터베이스에 삽입(<code>insert</code>)를 하는 것인데 열당 삽입하게 된다면 굉장히 오랜 작업이 될 수 있다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="batchinsert">BatchInsert<a class="hash-link" href="#batchinsert" title="Direct link to heading">​</a></h3><p>이를 보통 <code>BatchInsert</code> 또는 <code>BulkInsert</code> 라고 말하는데, 여러 Insert 구문을 하나로 하나의 Insert 구문으로 작업하도록 하는 것을 의미한다. 그와 더불어 속도도 빠르다.</p><p>예를 들면, 다음 쿼리들이</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> message </span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">content</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">status</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">created_by</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">created_at</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">last_modified_at</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">:content</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :</span><span class="token keyword" style="color:#00009f">status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_by</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :last_modified_at</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> message </span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">content</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">status</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">created_by</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">created_at</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">last_modified_at</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">:content</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :</span><span class="token keyword" style="color:#00009f">status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_by</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :last_modified_at</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> message </span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">content</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">status</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">created_by</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">created_at</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">last_modified_at</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">:content</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :</span><span class="token keyword" style="color:#00009f">status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_by</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :last_modified_at</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>아래의 쿼리로 대체될 수 있다.</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> message </span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">content</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">status</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">created_by</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">created_at</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">last_modified_at</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">:content</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :</span><span class="token keyword" style="color:#00009f">status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_by</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :last_modified_at</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">:content</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :</span><span class="token keyword" style="color:#00009f">status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_by</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :last_modified_at</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">:content</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :</span><span class="token keyword" style="color:#00009f">status</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_by</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :created_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> :last_modified_at</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예제">예제<a class="hash-link" href="#예제" title="Direct link to heading">​</a></h3><p>이전에 <a href="/en/2019/02/09/using-mysql-jdbc-to-handle-large-table-1/">MySQL - 큰 테이블을 다루는 jdbc 활용법 ①</a>를 분석하면서 작성했던 간단한 예제이다. 내용은 <strong>10만건의 데이터를 100개씩 <code>batchInsert</code> 하는 코드</strong> 이다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="springproperties">spring.properties<a class="hash-link" href="#springproperties" title="Direct link to heading">​</a></h4><p>MySQL Driver의 경우, <code>rewriteBatchedStatements=true</code> 옵션을 추가해야 한다.</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.url=jdbc:mysql://localhost:3306/test?rewriteBatchedStatements=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="applicationjava">Application.java<a class="hash-link" href="#applicationjava" title="Direct link to heading">​</a></h4><p><code>ApplicationRunner</code>는 애플리케이션 로딩 시에 최초 작업을 정의하는 인터페이스이다. 중점적으로 봐야한 곳은 <code>jdbcTemplate.batchUpdate(...)</code> 부분이다. 내부적으로 <code>batchList</code>를 <code>batchSize</code>만큼 처리해주고 있다. (<a href="https://github.com/spring-projects/spring-framework/blob/5.1.x/spring-jdbc/src/main/java/org/springframework/jdbc/core/JdbcTemplate.java#L1023" target="_blank" rel="noopener noreferrer">참고</a>)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">INSERT_SQL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"INSERT INTO push_message (`content`, `status`, `created_by`, `created_at`, `last_modified_at`) VALUES (?, ?, ?, ?, ?)"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">JdbcTemplate</span><span class="token plain"> jdbcTemplate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">ApplicationRunner</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">runner</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> args </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> insertCount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100_000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> batchSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">PushMessage</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> batchList </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">IntStream</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> insertCount</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">mapToObj</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">PushMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"content"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"wait"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"heowc"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">StopWatch</span><span class="token plain"> stopWatch </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">StopWatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stopWatch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jdbcTemplate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">batchUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">INSERT_SQL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> batchList</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> batchSize</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> arg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> arg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getContent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> arg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> arg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCreatedBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setTimestamp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Timestamp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">valueOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCreatedAt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ps</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setTimestamp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Timestamp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">valueOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLastModifiedAt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        stopWatch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stopWatch</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">prettyPrint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="소요시간-측정">소요시간 측정<a class="hash-link" href="#소요시간-측정" title="Direct link to heading">​</a></h3><table><thead><tr><th>rewriteBatchedStatements</th><th>batch size</th><th>time(ms)</th></tr></thead><tbody><tr><td>O</td><td>200</td><td>2500ms</td></tr><tr><td>O</td><td>100</td><td>5000ms</td></tr><tr><td>X</td><td>x</td><td>200000ms</td></tr></tbody></table><p>역시나 하드웨어 사양, 환경마다 다르겠지만 <code>rewriteBatchedStatements</code> 여부에 따라 <code>batch size</code>에 따라 속도 차이가 많이 났다.</p><blockquote><p>이것도 역시 패킷을 분석해보면, Length가 16388인 패킷을 볼 수 있는데 <code>net_buffer_length</code>의 기본값(16384)과 관련이 있다. 이를 적절히 늘리는 것도 속도 향상에 도움이 될 수 있다(?)</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/heowc/mysql-fetch-test" target="_blank" rel="noopener noreferrer">https://github.com/heowc/mysql-fetch-test</a></li><li><a href="https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-configuration-properties.html" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-configuration-properties.html</a></li></ul>]]></content:encoded>
            <category>mysql</category>
            <category>jdbc</category>
            <category>batch-insert</category>
        </item>
        <item>
            <title><![CDATA[MySQL - 큰 테이블을 다루는 jdbc 활용법 ①]]></title>
            <link>https://heowc.dev/en/2019/02/09/using-mysql-jdbc-to-handle-large-table-1</link>
            <guid>2019/02/09/using-mysql-jdbc-to-handle-large-table-1</guid>
            <pubDate>Sat, 09 Feb 2019 23:30:00 GMT</pubDate>
            <description><![CDATA[데이터베이스에서 한 번에 많은 데이터 읽어야 한다면 어떻게 해야할까?]]></description>
            <content:encoded><![CDATA[<blockquote><p>데이터베이스에서 한 번에 많은 데이터 읽어야 한다면 어떻게 해야할까?</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="왜-이런-작업이-필요로-하는가">왜 이런 작업이 필요로 하는가?<a class="hash-link" href="#왜-이런-작업이-필요로-하는가" title="Direct link to heading">​</a></h3><p><em>간단한 통계 자료를 생각해보자.</em></p><p>우선, 통계 자료를 만들기 위해서는 축적된 데이터가 필요하다. 축적된 데이터는 10만 row가 될 수 도 있고, 1000만 row가 될 수 있고, 1억 row가 될 수 있다. 그리고 데이터를 기반으로 여러가지 결과를 도출해낼 것 이다. 그런데 사용자가 요청할 때마다 매번 결과를 도출해낼 것인가? 아니다. 하루에 한번이던, 한 주에 한번이던 지정한 시간에 맞춰 주기적으로 작업을 수행할 것 이다. 물론 요즘에는 이를 해결하기 위한 다양한 메커니즘과 오픈소스를 제공하기 때문에 굳이 MySQL 같은 RDB를 활용하지 않고도 가능하다. 하지만, 오히려 배보다 배꼽이 더 커질 수 있기 때문에 RDB로 이와 같은 작업을 해결해 보고자 한다. <strong>보통 이를 <a href="https://ko.wikipedia.org/wiki/%EC%9D%BC%EA%B4%84_%EC%B2%98%EB%A6%AC" target="_blank" rel="noopener noreferrer">batch-processing</a>이라 한다.</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="벤치마킹--spring-batch">벤치마킹 : Spring Batch<a class="hash-link" href="#벤치마킹--spring-batch" title="Direct link to heading">​</a></h3><p><em>그나마 아는 Spring Framework를 참고해보자.</em></p><p>Spring Framework은 많은 노하우와 모범 사례가 녹아있는 자바 프레임워크 중 하나로, 그 중, <a href="https://spring.io/projects/spring-batch" target="_blank" rel="noopener noreferrer">Spring Batch</a>를 훑어보면 RDB를 활용하는 몇 가지 방법이 있다. 크게는 총 2가지를 지원하는데 <strong><a href="https://docs.spring.io/spring-batch/4.1.x/reference/html/readersAndWriters.html#cursorBasedItemReaders" target="_blank" rel="noopener noreferrer">Cursor를 활용하는 방법</a></strong>과 <strong><a href="https://docs.spring.io/spring-batch/4.1.x/reference/html/readersAndWriters.html#pagingItemReaders" target="_blank" rel="noopener noreferrer">Paging 처리하는 방법</a></strong>이다.</p><blockquote><p>글의 주제가 Spring이 아니기 때문에 'Cursor나 Paging을 활용하면 된다'정도 힌트만 가지고 다음 단계로 넘어가자. 또한 이 글에서는 Cursor만 활용해볼 것 이다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cursor-활용하기">Cursor 활용하기<a class="hash-link" href="#cursor-활용하기" title="Direct link to heading">​</a></h3><p>데이터베이스 커서(Cursor)는 일련의 데이터에 순차적으로 액세스할 때 검색 및 "현재 위치"를 포함하는 데이터 요소이다.  (<a href="https://ko.wikipedia.org/wiki/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%EC%BB%A4%EC%84%9C" target="_blank" rel="noopener noreferrer">참고: 데이터베이스 커서 - 위키백과</a>) </p><p>여기서 고려해야할 점은 적절한 갯수만큼 row(데이터 요소)를 가져오는 것이다. 한번에 그 많은 row를 가져온다고 생각해보자. 아마도 메모리 사용량이 초과하여 OOM(Out Of Memory)가 발생할 것이다. 반대로 적은 갯수 가져온다고 생각해보자. 아마도 굉장히 오래 걸릴 것이다. 이를 설정할 수 있는 방법은 <code>fetchSize</code>를 지정하는 것이다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetchsize-지정하기">fetchSize 지정하기<a class="hash-link" href="#fetchsize-지정하기" title="Direct link to heading">​</a></h3><p>순수 JDBC를 사용하면 다음과 같이 지정할 수 있다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Statement</span><span class="token plain"> stmt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"select ... from ..."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFetchSize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fetchSize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>그럼 이제 설정이 끝난걸까? 간단하게 테스트를 해보자. 여러 값을 적용하여 소요시간을 측정해보면 될 것 이다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="소요시간-측정">소요시간 측정<a class="hash-link" href="#소요시간-측정" title="Direct link to heading">​</a></h4><p>10만 row가 들어있는 간단한 테이블을 준비 해놓고 Integer.MIN_VALUE, 5, 10, 50, 100, 500, 1000, 2500, 5000 순으로 측정해 보았다. 결과는 이상하게도 <strong><code>fetchSize</code>와 무관하게 서로 비슷한 소요시간이 측정되었다. (약 320 ~ 400ms)</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="usecursorfetch">useCursorFetch<a class="hash-link" href="#usecursorfetch" title="Direct link to heading">​</a></h3><p>여러 삽질을 하고 결국 문서를 통해 해답을 얻을 수 있었는데, 이는 바로 <code>useCursorFetch=true</code>를 지정하는 것이다. (<a href="https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-implementation-notes.html" target="_blank" rel="noopener noreferrer">참고</a>)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">Connection</span><span class="token plain"> connection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">DriverManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"jdbc:mysql://localhost/?useCursorFetch=true"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"..."</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"..."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Statement</span><span class="token plain"> stmt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"select ... from ..."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFetchSize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fetchSize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><a href="https://github.com/mysql/mysql-connector-j/blob/release/8.0/src/main/protocol-impl/java/com/mysql/cj/protocol/a/result/ResultsetRowsCursor.java#L200" target="_blank" rel="noopener noreferrer">mysql-connector-java@8.0 - ResultsetRowsCursor.fetchMoreRows()</a>를 보면 fetch가 어떻게 동작하는지 이해할 수 있다.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="다시-시간-측정">다시 시간 측정<a class="hash-link" href="#다시-시간-측정" title="Direct link to heading">​</a></h4><table><thead><tr><th>fetch size</th><th>time(ms)</th></tr></thead><tbody><tr><td>Integer.MIN_VALUE</td><td>682</td></tr><tr><td>5</td><td>12367</td></tr><tr><td>10</td><td>6401</td></tr><tr><td>50</td><td>1632</td></tr><tr><td>100</td><td>1115</td></tr><tr><td>500</td><td>606</td></tr><tr><td>1000</td><td>527</td></tr><tr><td>2500</td><td>508</td></tr><tr><td>5000</td><td>464</td></tr></tbody></table><p>물론 하드웨어 사양, 환경마다 다르겠지만 <code>fetchSize</code>에 따라 서로 다른 소요시간이 나온 것을 볼 수 있다. 앞서 예상했던 것 같이 너무 작으면 굉장히 오랜 시간이 소요되므로 적절한 값을 지정해야 한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="보다-디테일하게-분석하기">보다 디테일하게 분석하기<a class="hash-link" href="#보다-디테일하게-분석하기" title="Direct link to heading">​</a></h3><p>앞에서 같이 삽질을 하지 않기 위해 소요시간 이외에 보다 디테일한 분석을 해보자. 메모리 사용량은? 패킷은?</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="메모리-사용량-feat-visualvm">메모리 사용량 (feat. VisualVM)<a class="hash-link" href="#메모리-사용량-feat-visualvm" title="Direct link to heading">​</a></h4><p>Java Profiling Tool 중 하나인 <a href="https://visualvm.github.io/" target="_blank" rel="noopener noreferrer">VisualVM</a>으로 대략적인 메모리 사용량을 측정해본 결과이다.</p><p><code>useCursorFetch=false</code> 경우
<img loading="lazy" alt="alt no-fetch-by-visualvm" src="/en/assets/images/no-fetch-by-visualvm-bd0c1ffa695bd13b2f3a18677d6e7dd5.png" width="1061" height="630" class="img_ev3q"></p><p><code>useCursorFetch=true</code> 경우
<img loading="lazy" alt="alt fetch-by-visualvm" src="/en/assets/images/fetch-by-visualvm-288b87985f737ad02358d1645c95cdc7.png" width="1060" height="630" class="img_ev3q"></p><blockquote><p><strong><code>useCursorFetch=true</code> 경우, 메모리 사용량이 더 적을 것을 볼 수 있다.</strong></p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="패킷-분석-feat-wireshark">패킷 분석 (feat. WireShark)<a class="hash-link" href="#패킷-분석-feat-wireshark" title="Direct link to heading">​</a></h4><p>jdbc 프로토콜 패킷을 분석하기 위해 <a href="https://www.wireshark.org/" target="_blank" rel="noopener noreferrer">WireShark</a>를 활용해본 결과이다.</p><p><code>useCursorFetch=false</code> 경우
<img loading="lazy" alt="alt no-fetch-by-wireshark" src="/en/assets/images/no-fetch-by-wireshark-4c08fd823a1130950522f5f3de423562.png" width="2260" height="1756" class="img_ev3q"></p><p><code>useCursorFetch=true</code>와 <code>fetchSize=5</code> 경우
<img loading="lazy" alt="alt fetch-by-visualvm" src="/en/assets/images/fetch-5-by-wireshark-b3d58e7a49eefc34e5c556c7a5d8d54f.png" width="2260" height="1756" class="img_ev3q"></p><blockquote><p><strong><code>useCursorFetch=true</code>와 <code>fetchSize=5</code> 경우, <code>fetchSize</code> 만큼 데이터를 전달하기 때문에 네트워크 통신이 보다 많은 것을 볼 수 있다.</strong></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="추가로-알게된-점">추가로 알게된 점<a class="hash-link" href="#추가로-알게된-점" title="Direct link to heading">​</a></h3><ul><li>초반에 MariaDB를 사용했었는데 해당 JDBC 드라이버에는 <code>useCursorFetch</code> 옵션이 없다. (다른 데이터베이스에도 없다.) 물론 fetchSize 적용 여부에 따라 메모리 사용량은 약간 다른 것을 볼 수 있는데, 이는 MariaDB JDBC 드라이버 자체에서 최적화 해주는 것이 아닐까 싶다.</li><li>패킷 분석을 하는데 기본적으로 Secure Layer가 존재하여 제대로 분석하기 어려웠고, <code>sslMode=DISABLED</code> 추가하여 해당 Layer를 제거할 수 있었다.</li><li><code>useCursorFetch=false</code> 경우의 WireShark 스크린샷을 보면 length가 16388인 패킷을 볼 수 있는데, 이는 <code>net_buffer_length</code>의 default(= 16384)와 유사한 것을 알 수 있다. 고로, 많은 데이터를 read하더라도 네트워크 통신 자체는 <code>net_buffer_length</code> 만큼 나눠서 하는 것을 알 수 있다.</li><li>이외에도 JDBC 드라이버 옵션으로 성능 튜닝할 부분이 상당히 많다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/heowc/mysql-fetch-test" target="_blank" rel="noopener noreferrer">https://github.com/heowc/mysql-fetch-test</a></li><li><a href="https://mariadb.com/kb/en/library/about-mariadb-connector-j/#streaming-result-sets" target="_blank" rel="noopener noreferrer">https://mariadb.com/kb/en/library/about-mariadb-connector-j/#streaming-result-sets</a></li><li><a href="https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-implementation-notes.html" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-implementation-notes.html</a></li></ul>]]></content:encoded>
            <category>mysql</category>
            <category>jdbc</category>
            <category>batch-processing</category>
        </item>
        <item>
            <title><![CDATA[GitHub Action을 활용한 GitHub Page 배포]]></title>
            <link>https://heowc.dev/en/2019/02/03/deploy-gh-page-with-github-action</link>
            <guid>2019/02/03/deploy-gh-page-with-github-action</guid>
            <pubDate>Sun, 03 Feb 2019 23:30:00 GMT</pubDate>
            <description><![CDATA[GitHub Action에 대한 간단한 소개와 이를 활용한 GitHub Page 배포 방법를 얘기해보려 한다.]]></description>
            <content:encoded><![CDATA[<blockquote><p><code>GitHub Action</code>에 대한 간단한 소개와 이를 활용한 GitHub Page 배포 방법를 얘기해보려 한다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-action이란"><a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">GitHub Action</a>이란?<a class="hash-link" href="#github-action이란" title="Direct link to heading">​</a></h3><p><strong>GitHub 이벤트(push, issue, release 등)를 트리거하여 개발 워크플로를 구성할 수 있는 GitHub 서비스</strong>이다. 기존에는 <a href="https://travis-ci.org/" target="_blank" rel="noopener noreferrer"><code>Travis CI</code></a>, <a href="https://circleci.com/" target="_blank" rel="noopener noreferrer"><code>Circle CI</code></a> 등이 대표적인 서드파티 서비스라고 할 수 있으며, 이를 연동하여 정적 분석, 테스트, 빌드하는 것이 보통 이였다. 하지만 이제는 GitHub에서 직접 지원하기 시작하였다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="목적">목적<a class="hash-link" href="#목적" title="Direct link to heading">​</a></h3><p>위에서 언급한 바와 같이 GitHub Action을 이용해서 배포 자동화(=지속적인 배포)를 해보려고 한다. push 한 번으로 GitHub Page에 게시물이 반영되는 것이 최종 목표이다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="준비">준비<a class="hash-link" href="#준비" title="Direct link to heading">​</a></h3><ul><li><p>GitHub Action를 사용하려면 해당 페이지에서 승인 과정을 거쳐야 한다. [<a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">click</a>]</p></li><li><p>블로그는 Hexo로 만들었다.</p></li><li><p>게시글을 보관하기 위한 아카이빙용 레포지토리(Private Repository)와 실제 <strong>{GitHub ID}.github.io</strong> 에 반영될 GitHub Page용 레포지토리(Public Repository)가 있다.</p><blockquote><p>아카이빙용 레포지토리를 Private Repository로 지정한 이유?</p><ol><li>민감한 정보가 설정에 포함되어있다.</li><li><del>아직 베타 수준인 GitHub Action은 Public Repository에 지원이 제한되어있다.</del></li></ol></blockquote><p>  ※ 2019년 1월 7일 기준으로, 일반 사용자도 무료로 private 레포지토리를 만들 수 있다. (<a href="https://github.blog/2019-01-07-new-year-new-github/" target="_blank" rel="noopener noreferrer">관련 기사</a>)</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="워크플로">워크플로<a class="hash-link" href="#워크플로" title="Direct link to heading">​</a></h3><p>간단하게 시퀀스 다이어그램으로 표현하면 아래와 같다.</p><div class="mermaid" data-mermaid-src="sequenceDiagram
  participant pr as Private Repository
  participant ga as GitHub Action
  participant pu as Public Repository
  pr-->>ga: ① trigger push event
  ga->>ga: ② execute GitHub Workflow
  opt Blog Deploy
  ga->>ga: npm build
  ga->>ga: hexo algolia
  ga->>ga: hexo clean
  ga->>ga: hexo generate
  ga->>ga: hexo deploy
  end
  ga->>pu: ③ push event">sequenceDiagram
  participant pr as Private Repository
  participant ga as GitHub Action
  participant pu as Public Repository
  pr--&gt;&gt;ga: ① trigger push event
  ga-&gt;&gt;ga: ② execute GitHub Workflow
  opt Blog Deploy
  ga-&gt;&gt;ga: npm build
  ga-&gt;&gt;ga: hexo algolia
  ga-&gt;&gt;ga: hexo clean
  ga-&gt;&gt;ga: hexo generate
  ga-&gt;&gt;ga: hexo deploy
  end
  ga-&gt;&gt;pu: ③ push event</div><p>① workflow를 push 이벤트에 트리거 될 수 있도록 설정한다. 보다 많은 이벤트를 설정할 수 있으니 <a href="https://developer.github.com/actions/creating-workflows/workflow-configuration-options/#events-supported-in-workflow-files" target="_blank" rel="noopener noreferrer">공식 문서</a>를 참고하면 좋다.</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">workflow "Blog Deploy" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on = "push"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resolves = "Hexo Deploy"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>② <code>resoleves</code> 으로 action을 지정할 수 있다. 그리고 <code>resoleves</code>에 지정한 action 이전에 필요한 action은 각 action에서 <code>needs</code>를 활용하면 된다.</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">workflow "Blog Deploy" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on = "push"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resolves = "Hexo Deploy"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action "Hexo Deploy" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    needs = ["Hexo Generate"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uses = "heowc/action-hexo@master"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args = "deploy"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>custom action을 활용하기 위해서 <code>uses</code>에 해당 action을 지정하면 된다.</li><li>hexo 관련 action이 없어서 간단하게 custom action을 만들어봤다. (<a href="https://github.com/heowc/action-hexo" target="_blank" rel="noopener noreferrer">https://github.com/heowc/action-hexo</a>)</li></ul><p>③ public repository에 deploy하는 방법은 기존과 동일하게 <code>hexo-deployer-git</code>를 사용하면 된다. 기존에는 직접 <code>hexo deploy</code> 했다면, 이제는 push 마다 GitHub Action이 동작하여 이를 자동화해줄 것 이다.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">repo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ACCESS TOKEN</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">@github.com/heowc/heowc.github.io.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> master</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="최종-형태">최종 형태<a class="hash-link" href="#최종-형태" title="Direct link to heading">​</a></h3><p><code>Build</code> → <code>Algolia</code> → <code>Hexo Clean</code> → <code>Hexo Generate</code> → <code>Hexo Deploy</code> 순차 처리된다.</p><div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">workflow "Blog Deploy" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on = "push"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resolves = "Hexo Deploy"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action "Build" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uses = "actions/npm@master"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args = "install"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action "Hexo Clean" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    needs = ["Build"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uses = "heowc/action-hexo@master"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args = "clean"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action "Hexo Generate" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    needs = ["Hexo Clean"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uses = "heowc/action-hexo@master"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args = "generate"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">action "Hexo Deploy" {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    needs = ["Hexo Generate"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uses = "heowc/action-hexo@master"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args = "deploy"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    env = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NAME  = "heowc"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        EMAIL = "heowc1992@gmail.com"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="결과">결과<a class="hash-link" href="#결과" title="Direct link to heading">​</a></h3><p>workflow에 대한 결과는 다음과 같이 확인해볼 수 있다.</p><p><img loading="lazy" alt="alt screenshot" src="/en/assets/images/screenshot-12f6771220c1d986ece73539c458c311.png" width="1352" height="1316" class="img_ev3q"></p>]]></content:encoded>
            <category>hexo</category>
            <category>github-action</category>
            <category>continuous-deployment</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot - testContainer를 활용한 AWS DynamoDB 테스트]]></title>
            <link>https://heowc.dev/en/2019/01/16/spring-boot-dynamodb-using-testcontainer</link>
            <guid>2019/01/16/spring-boot-dynamodb-using-testcontainer</guid>
            <pubDate>Wed, 16 Jan 2019 21:30:00 GMT</pubDate>
            <description><![CDATA[Amazon DynamoDB를 비용 지불없이 쉽게 테스트하는 방법을 소개하려고 한다.]]></description>
            <content:encoded><![CDATA[<blockquote><p><strong>Amazon DynamoDB</strong>를 비용 지불없이 쉽게 테스트하는 방법을 소개하려고 한다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="amazon-dynamodb란-무엇입니까">Amazon DynamoDB란 무엇입니까?<a class="hash-link" href="#amazon-dynamodb란-무엇입니까" title="Direct link to heading">​</a></h3><p>우선, <code>Amazon DynamoDB</code>가 무엇인지 찾아보자. 공식문서에는 다음과 같이 적혀있다.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>AWS 공식문서 - Amazon DynamoDB란 무엇입니까?</div><div class="admonitionContent_S0QG"><p>Amazon DynamoDB는 <strong>종합 관리형 NoSQL 데이터베이스 서비스</strong>로서 원활한 확장성과 함께 빠르고 예측 가능한 성능을 제공합니다. DynamoDB를 사용하면 분산 데이터베이스를 운영하고 조정하는 데 따른 관리 부담을 줄일 수 있으므로 하드웨어 프로비저닝, 설정 및 구성, 복제, 소프트웨어 패치 또는 클러스터 조정...</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="환경-구성하기">환경 구성하기<a class="hash-link" href="#환경-구성하기" title="Direct link to heading">​</a></h3><p>개발 프로세스상 <code>dev</code>, <code>qa</code>, <code>stage</code>, <code>test</code>, <code>prod</code> 같이 영역을 나누어 구성하는 것이 보통이다. 그러다보니 각 영역마다 별도의 인스턴스가 필요하게 되고 불가피하게 클라우드 비용이 늘어나게 상황에 직면하게 된다. 하지만, Amazon DynamoDB는 인스턴스를 만들지 않고도 테스트 가능하도록 제공한다. <strong>즉, 비용이 발생하지 않는다.</strong></p><ul><li>jar 파일을 제공하여 java가 있는 환경에서 실행 [<a href="https://docs.aws.amazon.com/ko_kr/amazondynamodb/latest/developerguide/DynamoDBLocal.DownloadingAndRunning.html" target="_blank" rel="noopener noreferrer">link</a>]</li><li><strong>docker container 실행</strong> [<a href="https://hub.docker.com/r/amazon/dynamodb-local/" target="_blank" rel="noopener noreferrer">link</a>]</li></ul><blockquote><p>여기서 <code>test</code> 정도는 데이터가 휘발성으로 있어도 되는 부분이라 생각한다.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker-container-실행">Docker Container 실행<a class="hash-link" href="#docker-container-실행" title="Direct link to heading">​</a></h4><p>DockerHub에 <a href="https://hub.docker.com/r/amazon/dynamodb-local/" target="_blank" rel="noopener noreferrer"><code>amazon/dynamodb-local</code></a> 퍼블릭 이미지로 제공되고 있다.</p><div id="demo-docker-run" style="min-height:240px"></div><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-boot-설정">Spring Boot 설정<a class="hash-link" href="#spring-boot-설정" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="디펜던시-추가">디펜던시 추가<a class="hash-link" href="#디펜던시-추가" title="Direct link to heading">​</a></h4><p>DynamoDB를 포함한 다른 서비스(ex. Amazon S3, Amazon RedShift, ...)를 쉽게 사용할 수 있도록 라이브러리를 제공한다. 이를 디펜던시로 추가한다.</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">compile('com.amazonaws:aws-java-sdk-dynamodb:1.11.466')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="amazondynamodb-빈-등록"><code>AmazonDynamoDB</code> 빈 등록<a class="hash-link" href="#amazondynamodb-빈-등록" title="Direct link to heading">​</a></h4><p>DynamoDB에 액세스할 클래스인 <code>AmazonDynamoDB</code>를 빈으로 등록해준다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">DynamoDBConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">AmazonDynamoDB</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">amazonDynamoDB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#393A34">@Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"${aws.region}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> region</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#393A34">@Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"${aws.dynamo.endpoint}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> dynamoEndpoint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#393A34">@Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"${aws.access-key}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> accessKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#393A34">@Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"${aws.secret-key}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> secretKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">AmazonDynamoDBClientBuilder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">standard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withEndpointConfiguration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AwsClientBuilder</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">EndpointConfiguration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dynamoEndpoint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> region</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withCredentials</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AWSStaticCredentialsProvider</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BasicAWSCredentials</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">accessKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> secretKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="테스트-작성하기">테스트 작성하기<a class="hash-link" href="#테스트-작성하기" title="Direct link to heading">​</a></h4><p>당연한 얘기지만 <code>AmazonDynamoDB</code>를 빈으로 등록해두었기 때문에 <code>@Autowired</code>를 활용하여 인스턴스를 주입받을 수 있다. 그리고 테스트를 작성하면 된다. 코드는 도커를 활용하든, 실제 AWS 인스턴스를 활용하든 동일하므로 AWS 공식문서의 예제를 참고하거나, <a href="https://github.com/heowc/SpringBootSample/blob/master/SpringBootDynamo/src/test/java/com/example/SpringBootDynamoApplicationTests.java" target="_blank" rel="noopener noreferrer">간단한 CRUD 예제</a>가 있으니 참고하자.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@RunWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@SpringBootTest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SpringBootDynamoApplicationTests</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">AmazonDynamoDB</span><span class="token plain"> dynamoDB</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>하지만, 테스트를 위해 매번 <code>docker run -p 8000:8000 amazon/dynamodb-local</code>를 치는 것은 귀찮기도 하고 약간(?) 수동적이다. <code>testcontainers</code>를 사용하면 이를 해결할 수 있다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="testcontainers-적용">testcontainers 적용<a class="hash-link" href="#testcontainers-적용" title="Direct link to heading">​</a></h3><p><a href="https://www.testcontainers.org/" target="_blank" rel="noopener noreferrer"><code>testcontainers</code></a>는 자바코드에서 docker container를 실행시켜주는 라이브러리이다. 직접 <code>run</code>을 실행시킬 수 도 있고, <code>Dockerfile</code>이나 <code>docker-compose.yml</code>을 활용할 수도 있다. 물론, docker가 설치되어 있어야 한다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="디펜던시-추가-1">디펜던시 추가<a class="hash-link" href="#디펜던시-추가-1" title="Direct link to heading">​</a></h4><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">testCompile('org.testcontainers:testcontainers:1.10.2')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="abstractintegrationtest-작성"><code>AbstractIntegrationTest</code> 작성<a class="hash-link" href="#abstractintegrationtest-작성" title="Direct link to heading">​</a></h4><p>다행히 Spring Boot에서 활용 가능한 예제 샘플을 제공한다. 아래 샘플을 참고하여 다음과 같이 작성해볼 수 있다.
<a href="https://github.com/testcontainers/testcontainers-java-examples/blob/master/spring-boot/src/test/java/com/example/AbstractIntegrationTest.java" target="_blank" rel="noopener noreferrer">testcontainers/testcontainers-java-examples - AbstractIntegrationTest</a></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">abstract</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">AbstractIntegrationTest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DOCKER_IMAGE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"amazon/dynamodb-local"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DOCKER_TAG</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"latest"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">EXPOSED_PORT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@ClassRule</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">GenericContainer</span><span class="token plain"> dynamodb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">GenericContainer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"%s:%s"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DOCKER_IMAGE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DOCKER_TAG</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withExposedPorts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">EXPOSED_PORT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Initializer</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">ApplicationContextInitializer</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">ConfigurableApplicationContext</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ConfigurableApplicationContext</span><span class="token plain"> configurableApplicationContext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">String</span><span class="token plain"> endpoint </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"aws.dynamo.endpoint=http://%s:%s"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    dynamodb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getContainerIpAddress</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    dynamodb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getMappedPort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">EXPOSED_PORT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>예제에도 나와있듯이, 다른 docker container도 활용 가능하다.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="테스트-작성하기-수정">테스트 작성하기 (수정)<a class="hash-link" href="#테스트-작성하기-수정" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SpringBootDynamoApplicationTests</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">AbstractIntegrationTest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><ul><li><a href="https://hub.docker.com/r/amazon/dynamodb-local/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/r/amazon/dynamodb-local/</a></li><li><a href="https://www.testcontainers.org/" target="_blank" rel="noopener noreferrer">https://www.testcontainers.org/</a></li><li><a href="https://github.com/heowc/SpringBootSample/tree/master/SpringBootDynamo" target="_blank" rel="noopener noreferrer">https://github.com/heowc/SpringBootSample/tree/master/SpringBootDynamo</a></li></ul>]]></content:encoded>
            <category>spring-boot</category>
            <category>test-container</category>
            <category>integration-test</category>
            <category>aws</category>
            <category>dynamodb</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot - 안전하게 종료시키기]]></title>
            <link>https://heowc.dev/en/2018/12/27/spring-boot-graceful-shutdown</link>
            <guid>2018/12/27/spring-boot-graceful-shutdown</guid>
            <pubDate>Fri, 28 Dec 2018 00:51:00 GMT</pubDate>
            <description><![CDATA[Spring Boot를 안전하게 종료시키는 방법에 대한 소개이다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>Spring Boot를 안전하게 종료시키는 방법에 대한 소개이다.</p></blockquote><blockquote><p>※ 읽기 전 참고!!
Spring Boot 2.3.0.RELEASE 이후에는 <code>server.shutdown=graceful</code> 속성을 추가하여 안전하게 종료시킬 수 있다.
<a href="https://docs.spring.io/spring-boot/docs/2.3.0.RELEASE/reference/html/spring-boot-features.html#boot-features-graceful-shutdown" target="_blank" rel="noopener noreferrer">spring-boot-features.html#boot-features-graceful-shutdown</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kill-명령어">kill 명령어<a class="hash-link" href="#kill-명령어" title="Direct link to heading">​</a></h3><p>우선, Spring Boot를 종료시키기 내용을 언급하기 이전에 <code>kill</code>이라는 리눅스 명령어에 대해 알아보자.</p><p><code>kill</code>은 의미하는 바와 같이 죽이는(?) 것과 연관이 있다. 이것은 <strong>프로세스를 죽이는 명령어</strong>으로 프로세스가 시작되면 부여되는 PID(프로세스 ID)를 활용하면 된다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> -9 PID</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위 명령어는 프로세스를 종료시킬 때 사용하는 명령어로 많은 블로그나 스택오버플로우에서 가장 많이 언급되는 명령어이자 나 또한 주로 사용하던 명령어이다. 하지만 위 명령어는 권장하지 않는 방법이다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="왜-권장하지-않을까">왜 권장하지 않을까?<a class="hash-link" href="#왜-권장하지-않을까" title="Direct link to heading">​</a></h4><p>여기서 <strong>숫자 9는 리소스를 정리하는 핸들러를 지정하지 않고 프로세스를 바로 죽이겠다</strong>는 의미이다. 만약, 실행 중인 쓰레드가 있더라도 이를 무시하고 중단하는데 혹시라도 굉장히 중요한 작업 중 이라면 최악의 상황이 일어날 수 있기 때문이다.</p><blockquote><p>숫자는 9 이외에도 다른 숫자도 존재하며 다른 의미를 갖고 있다.</p></blockquote><div id="demo-kill" style="min-height:300x"></div><br><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="그렇다면-안전하게-죽이는-방법은-뭘까">그렇다면 안전하게 죽이는 방법은 뭘까...?<a class="hash-link" href="#그렇다면-안전하게-죽이는-방법은-뭘까" title="Direct link to heading">​</a></h4><p>tomcat 종료 스크립트를 찾아보자.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">$TOMCAT_HOME</span><span class="token plain">/bin/shutdown.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token variable" style="color:#36acaa">$TOMCAT_HOME</span><span class="token plain">/bin/catalina.sh stop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># https://github.com/apache/tomcat/blob/ffc4b76e42fd39d88c9417d0ba2b3d697c16f5b5/bin/catalina.sh#L543</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> -15 </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable function" style="color:#d73a49">cat</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">"</span><span class="token variable string variable" style="color:#36acaa">$CATALINA_PID</span><span class="token variable string" style="color:#e3116c">"</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/dev/null </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>대부분의 애플리케이션은 1(INT), 2(HUP), 15(TERM)를 이용하여 리소스를 정리하는 핸들러 코드를 실행하고 안전하게 종료가 가능하다. <strong>일반적으로 15를 사용</strong>한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-boot-종료시키기">Spring Boot 종료시키기<a class="hash-link" href="#spring-boot-종료시키기" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="준비하기">준비하기<a class="hash-link" href="#준비하기" title="Direct link to heading">​</a></h4><p>우선 편리한 테스트를 위해 긴 작업 상태를 유지하기 위한 메소드를 작성해보자.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@GetMapping</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">pause</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">InterruptedException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5_000L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Process finished"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>그리고 긴 작업 중간에 Spring Boot 웹 애플리케이션을 종료시켜 보겠다. 추측으로는 5초를 기다렸다가 'Process finished'라는 문구가 표시될 것이라고 예상된다. 하지만, 예상대로 동작하지 않는다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://localhost:8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>5000ms 이내에 아래 명령어 실행하자.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> -15 PID</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Alt error 발생" src="/en/assets/images/error-c15c65cad09f19bd5c2936bc2319f709.png" width="1356" height="876" class="img_ev3q"></p><p>그 이유는 리소스를 정리할 핸들러는 주어졌지만 <strong>Spring Boot에서 리소스를 정리하는 핸들러 코드가 존재하지 않기 때문</strong>이다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="spring---contextclosedevent">Spring - ContextClosedEvent<a class="hash-link" href="#spring---contextclosedevent" title="Direct link to heading">​</a></h4><p><code>ContextClosedEvent</code>를 활용해서 리소스를 정리하는 핸들러 코드를 추가 할 수 있고, 이 방법은 '<a href="http://blog.marcosbarbero.com/graceful-shutdown-spring-boot-apps/" target="_blank" rel="noopener noreferrer">Marcos Barbero's Blog</a>'를 참고하였다. 간단히 설명하자면, request에 활용되는 ThreadPool를 리소스가 정리될 때까지 기다린 후 내린다. 그 이후에도 내려가지 않는다면 강제로 내려버리는 코드이다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onApplicationEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ContextClosedEvent</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">pause</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Executor</span><span class="token plain"> executor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connector</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getProtocolHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getExecutor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">executor </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">ThreadPoolExecutor</span><span class="token plain"> threadPoolExecutor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> executor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            threadPoolExecutor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shutdown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">threadPoolExecutor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">awaitTermination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">TIMEOUT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">TimeUnit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SECONDS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">warn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Tomcat thread pool did not shut down gracefully within "</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TIMEOUT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">" seconds. Proceeding with forceful shutdown"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                threadPoolExecutor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">shutdownNow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">threadPoolExecutor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">awaitTermination</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">TIMEOUT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">TimeUnit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SECONDS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Tomcat thread pool did not terminate"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> ex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">currentThread</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">interrupt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pid-구하기">PID 구하기<a class="hash-link" href="#pid-구하기" title="Direct link to heading">​</a></h4><p><em>PID는 어디서 얻을 수 있을까?</em></p><p>여러가지 방법이 있겠지만 Spring Boot에서는 <code>ApplicationPidFileWriter</code>라는 클래스를 제공해주고 있으며 이를 이용히여 pid가 담긴 파일을 만들어준다. 자세한 내용은 <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#deployment-install" target="_blank" rel="noopener noreferrer">공식 문서</a>를 참고하자.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">SpringApplication</span><span class="token plain"> application </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SpringApplicationBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sources</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SpringBootGracefulShutdownApplication</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">listeners</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ApplicationPidFileWriter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"./application.pid"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    application</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>application.pid</code>는 jar파일과 같은 경로에 만들어진다.</p><div id="demo-ls" style="min-height:80px"></div><br><br><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/heowc/SpringBootSample/tree/master/SpringBootGracefulShutdown" target="_blank" rel="noopener noreferrer">SpringBootSample - SpringBootGracefulShutdown</a></li><li><a href="http://blog.marcosbarbero.com/graceful-shutdown-spring-boot-apps/" target="_blank" rel="noopener noreferrer">http://blog.marcosbarbero.com/graceful-shutdown-spring-boot-apps/</a></li></ul>]]></content:encoded>
            <category>spring-boot</category>
            <category>graceful-shutdown</category>
            <category>shutdown</category>
        </item>
        <item>
            <title><![CDATA[2018년 개발 회고]]></title>
            <link>https://heowc.dev/en/2018/12/24/2018-develop-retrospection</link>
            <guid>2018/12/24/2018-develop-retrospection</guid>
            <pubDate>Mon, 24 Dec 2018 23:19:00 GMT</pubDate>
            <description><![CDATA[2018년 개발 회고를 적어보려고 한다.]]></description>
            <content:encoded><![CDATA[<p>2018년 개발 회고를 적어보려고 한다.</p><p>키워드를 나열해 보자면 <code>오픈소스</code>, <code>컨트리뷰터</code>, <code>아쉬움</code>가 될 수 있을 것 같다. 그리고 이 키워드를 가지고 간략하게 몇 자 적어보려 한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="오픈소스">오픈소스<a class="hash-link" href="#오픈소스" title="Direct link to heading">​</a></h3><p>처음으로 npm에 내 이름으로 오픈소스를 <code>publish</code> 했다!</p><p><img loading="lazy" alt="Alt npm 등록 인증 메일" src="/en/assets/images/first-publish-opensource-38f4027c9e69f43a4521ebb0055c66ae.png" width="633" height="301" class="img_ev3q"></p><p>간단히 설명하자면, 자바스크립트로 code demo를 만들어주는 라이브러리(<a href="https://github.com/glorious-codes/glorious-demo" target="_blank" rel="noopener noreferrer">glorious-demo</a>)를 이 블로그(<a href="https://heowc.dev/2018/01/08/spring-boot-start/" target="_blank" rel="noopener noreferrer">'Spring Boot - 시작하기'</a>)에서 손쉽게 사용할 수 있도록 만든 hexo 태그 라이브러리이다. 물론, hexo를 사용한다면 누구나 손쉽게 사용할 수 있다. (<a href="https://www.npmjs.com/package/hexo-tag-gdemo" target="_blank" rel="noopener noreferrer">링크</a>)</p><p>처음에는 실행 코드를 javascript를 직접 넣기도 했었다. 하지만 markdown에 javascript를 넣은 것도 보기 이상하고... <strong>너무 불편하다.</strong></p><p><img loading="lazy" alt="Alt 라이브러리 만들기 이전 작업" src="/en/assets/images/before-create-opensource-6fcdf4b23f4f8db2c76075e9cd42d9cd.png" width="922" height="555" class="img_ev3q">
(참고: <del><a href="https://github.com/heowc/heowc.github.io.repo/blob/c89e52e08efe933287ed30d3dd09f0af4c2a1f02/source/_posts/spring-boot-start.md" target="_blank" rel="noopener noreferrer">https://github.com/heowc/heowc.github.io.repo/blob/c89e52e08efe933287ed30d3dd09f0af4c2a1f02/source/_posts/spring-boot-start.md</a></del>)</p><p><em>'개발자는 약간의 귀차니즘이 있어야 한다.'라고 했던가...</em></p><p>그래서 끄적여 봤다.</p><p><code>Issue</code>을 처리할 겸 메인테이너에게 hexo 라이브러리를 만들어도 되는지 동의를 구했고 <strong>긍정적인 답변</strong>도 받을 수 있었다. <code>Issue</code>부터 <code>Pull Request</code>까지 몇 마디 못 보탰지만, <em>"지구 반대편에 사는 사람과 개발 관련 얘기를 다 해보는구나..!"</em>라는 생각에 너무 짜릿했다.</p><p><img loading="lazy" alt="Alt 이슈 인증" src="data:image/png;base64,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" width="787" height="273" class="img_ev3q">
(참고: <a href="https://github.com/glorious-codes/glorious-demo/issues/36" target="_blank" rel="noopener noreferrer">glorious-codes/glorious-demo/issues#36</a>)</p><p>하지만 200줄 정도 밖에 안되는 오픈소스임에도 <strong>사소한 우여곡절</strong>도 있었다. npm에 문서만 수정 하려다가 실수로 <code>unpublish</code>를 날려서 30분도 안되서 오픈소스가 내려가 버린 것 이다. 버전 사용도 못하는 상황을 경험했다. (심지어 24시간동안 <code>publish</code>도 안된다...)</p><p><img loading="lazy" alt="Alt npm 문의결과" src="data:image/png;base64,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" width="711" height="314" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="컨트리뷰터">컨트리뷰터<a class="hash-link" href="#컨트리뷰터" title="Direct link to heading">​</a></h3><p>올해, 2개의 문서 수정과 1개의 이슈 제보를 했다. 이슈 제보는 <a href="#%EC%98%A4%ED%94%88%EC%86%8C%EC%8A%A4">#오픈소스</a>에서 이미 언급을 했다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="문서-수정">문서 수정<a class="hash-link" href="#문서-수정" title="Direct link to heading">​</a></h4><ul><li>spring-guides/gs-spring-boot <ul><li><a href="https://github.com/spring-guides/gs-spring-boot/pull/44" target="_blank" rel="noopener noreferrer">Fix README.adoc for Spring Boot 2.0.0.RELEASE #44</a></li></ul></li><li>spring-projects/spring-data-commons <ul><li><a href="https://github.com/spring-projects/spring-data-commons/pull/321" target="_blank" rel="noopener noreferrer">DATACMNS-1403 - Fixed example source in reference documentation. #321</a></li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="이슈-제보">이슈 제보<a class="hash-link" href="#이슈-제보" title="Direct link to heading">​</a></h4><ul><li>glorious-codes/glorious-demo <ul><li><a href="https://github.com/glorious-codes/glorious-demo/issues/36" target="_blank" rel="noopener noreferrer">Improve white space on terminal application #36</a></li></ul></li></ul><p>하면서 느낀 점이 있다면 영어의 부족함이다. 정말 쉬운 영어를 쓰는 것도 구글의 힘을 의존할 수 밖에 없었고 나 자신이 너무 초라해 보였다. 물론 하는 동안 재미도 있었고, 프로젝트에 기여 할 수 있다는 것에 대한 기쁨도 느낄 수 있었다. 굉장히 좋은 경험이고 앞으로도 이런 경험을 많이 하고 싶다.</p><p>+) 구글 짱!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="아쉬움">아쉬움<a class="hash-link" href="#아쉬움" title="Direct link to heading">​</a></h3><p>2018년 목표가 있었다. Hashicorp 제품을 훑어보는 것 이였고, 결과로만 보자면 그 중 절반도 보지 못했다. (Vagrant, Terraform, ...) 너무 막연하고 계획도 없었다고 생각한다.</p><p><em>역시 회고는 나를 까는 맛에 하는... 음?</em></p><p><img loading="lazy" alt="Alt 공부 내역" src="/en/assets/images/study-history-f4e4156f8e51cb824b2f4cb367129bf4.png" width="1958" height="266" class="img_ev3q"></p><p>2018년 말 임에도 불구하고 <em>'<!-- -->[devops]<!-- --> hashicorp 제품 맛보기'</em>는 아직 <code>closed</code> 하지 못했다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="많은-욕심은-화를-부른다">많은 욕심은 화를 부른다.<a class="hash-link" href="#많은-욕심은-화를-부른다" title="Direct link to heading">​</a></h4><p>관심있다고 다 할 수 있는 것이 아니다. 적당한 선에서 포기할 줄도 알아야 한다고 생각한다. 아직 주니어인 나는 <strong>영어</strong>와 <strong>애플리케이션 아키텍처</strong>, <strong>클린 코드</strong>, ... 마지막으로 업무에 주로 사용하는 <strong>Spring</strong>만 해도 벅찰 것 이다. 그런 의미에서 Hashicorp 제품은 2019년에도 업무상 필요하지 않고선 볼 일이 없을 듯 싶다. (언젠간 <code>closed</code> 하겠지..?)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="그리고-2019년-계획"><em>그리고 2019년 계획...</em><a class="hash-link" href="#그리고-2019년-계획" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="컨트리뷰터-되기">컨트리뷰터 되기<a class="hash-link" href="#컨트리뷰터-되기" title="Direct link to heading">​</a></h4><p>진짜 컨트리뷰터가 되는 것은 어쩌면 소스 코드에 내 이름 한 줄을 추가하는 것이 아닐까 싶다. 요즘 주니어 또는 예비 개발자들이 오픈소스를 참여하려고 많이 노력한다. 나 또한 이제 걸음마를 떼고 있고 지속적인 관심과 노력할 것 이다.</p><p><em>Spring 프로젝트에 내 이름이 들어가는 그 날까지...</em></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="일주일에-하나씩-영어-기술-블로그-정독하기">일주일에 하나씩 영어 기술 블로그 정독하기<a class="hash-link" href="#일주일에-하나씩-영어-기술-블로그-정독하기" title="Direct link to heading">​</a></h4><p><a href="https://feedly.com" target="_blank" rel="noopener noreferrer">feedly</a>를 이용하여 관심 기술 내용을 훑어보는데 요즘은 너무 대강 보는게 아닌가 싶다. 그래서 영어공부도 할 겸 "일주일에 하나 정도는 제대로 읽어보자"라는 생각이 들었고 이를 실천해보려 한다. (가끔은 번역도 좀 해보고...)</p><p><img loading="lazy" alt="Alt feedly 목록" src="data:image/png;base64,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" width="253" height="674" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="기술-서적-6권-이상-읽기">기술 서적 6권 이상 읽기<a class="hash-link" href="#기술-서적-6권-이상-읽기" title="Direct link to heading">​</a></h4><p>2018년에는 여러 기회를 통해 나름 책을 많이 읽었다고 생각한다. 그리고 2019년에도 어떤 방법으로든 총 6권 이상을 목표로 꾸준히 읽어나갈 예정이다.</p><p><em>이펙티브 자바 3rd</em>,
<em>엔터프라이즈 애플리케이션 아키텍처 패턴</em>,
<em>도메인 주도 설계</em>,
...</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="꾸준히-공부하기">꾸준히 공부하기<a class="hash-link" href="#꾸준히-공부하기" title="Direct link to heading">​</a></h4><p>2018년 초, <strong>15분 공부 오픈채팅방</strong>을 우연히 들어가서 좋은 습관을 가지게 되었다. 각자 공부를 하고 (양심적으로) 인증을 하는 방식인데 나름 자극도 되고 여러 분야의 정보도 얻을 수 있었다. Android, Web, ... 요즘은 Flutter 얘기가 핫하다. 현재 3기가 진행 중 이고, 1기를 제외하곤 제대로 하지 못 해서 2019년에는 다시 열심히 성실히 해봐야겠다.</p><p>같이 진행했던 요콩님의 1기 후기(<a href="http://ykyh.tistory.com/9" target="_blank" rel="noopener noreferrer">http://ykyh.tistory.com/9</a>)</p>]]></content:encoded>
            <category>2018</category>
            <category>develop</category>
            <category>retrospection</category>
        </item>
        <item>
            <title><![CDATA[hexo-tag-gdemo 소개]]></title>
            <link>https://heowc.dev/en/2018/11/14/introduction-hexo-tag-gdemo</link>
            <guid>2018/11/14/introduction-hexo-tag-gdemo</guid>
            <pubDate>Wed, 14 Nov 2018 18:00:00 GMT</pubDate>
            <description><![CDATA[소개]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="소개">소개<a class="hash-link" href="#소개" title="Direct link to heading">​</a></h3><p><strong><a href="https://www.npmjs.com/package/@heowc/hexo-tag-gdemo" target="_blank" rel="noopener noreferrer">hexo-tag-gdemo</a>는 glorious-demo를 hexo에서 손쉽게 사용할 수 있도록 작성한 태그 플러그인</strong>이며, <a href="https://github.com/glorious-codes/glorious-demo" target="_blank" rel="noopener noreferrer">glorious-demo</a>는 터미널이나 에디터에 코드를 타이핑하는 일련의 동작을 시연하는 자바스크립트 라이브러리이다.</p><blockquote><p>Hexo가 뭔지 모르신다면? <a href="https://hexo.io/ko/index.html" target="_blank" rel="noopener noreferrer">클릭</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설치">설치<a class="hash-link" href="#설치" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> @heowc/hexo-tag-gdemo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="사용법">사용법<a class="hash-link" href="#사용법" title="Direct link to heading">​</a></h3><p>최대한 단순하게 만들기 위해 2가지 타입(<code>gdemo_terminal</code>, <code>gdemo_editor</code>)과 기본적인 옵션만 넣을 수 있도록 구성했다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-gdemo_terminal-태그">1. <code>gdemo_terminal</code> 태그<a class="hash-link" href="#1-gdemo_terminal-태그" title="Direct link to heading">​</a></h4><div id="demo-terminal" style="min-height:250px"></div><br><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="코드">코드<a class="hash-link" href="#코드" title="Direct link to heading">​</a></h4><blockquote><p><code>'250px' 'bash' '500' '$' 'demo-teriminal'</code>는 생략 가능하다.</p></blockquote><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{% gdemo_terminal 'node ./demo' '250px' 'bash' '500' '$' 'demo-teriminal' %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello World!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% endgdemo_terminal %}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-gdemo_terminal-태그">2. <code>gdemo_terminal</code> 태그<a class="hash-link" href="#2-gdemo_terminal-태그" title="Direct link to heading">​</a></h4><div id="demo-teriminal2" style="min-height:250px"></div><br><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="코드-1">코드<a class="hash-link" href="#코드-1" title="Direct link to heading">​</a></h4><blockquote><p>[command]<!-- -->는 ';'을 기준으로 여러 <!-- -->[command]<!-- -->로 나눠서 표현할 수 있다.</p></blockquote><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{% gdemo_terminal 'cd /usr/bin;node ./demo' '250px' 'bash' '500' '$' 'demo-teriminal' %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Hello World!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% endgdemo_terminal %}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-gdemo_editor-태그">3. <code>gdemo_editor</code> 태그<a class="hash-link" href="#3-gdemo_editor-태그" title="Direct link to heading">​</a></h4><div id="demo-editor" style="min-height:250px"></div><br><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="코드-2">코드<a class="hash-link" href="#코드-2" title="Direct link to heading">​</a></h4><blockquote><p><code>'250px' 'bash' '500' 'demo-editor'</code>는 생략 가능하다.</p></blockquote><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{% gdemo_editor '250px' 'bash' '500' 'demo-editor' %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function greet(){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log("Hello World!");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">greet();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% endgdemo_editor %}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="예외">예외<a class="hash-link" href="#예외" title="Direct link to heading">​</a></h3><p><a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank" rel="noopener noreferrer">테마</a>로 인해 CSS가 깨져서 예외적인 스타일를 추가했다.</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.desktop {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  height: 250px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  width: 600px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  margin: 0 auto 50px;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/heowc/hexo-tag-gdemo" target="_blank" rel="noopener noreferrer">https://github.com/heowc/hexo-tag-gdemo</a></li><li><a href="https://github.com/glorious-codes/glorious-demo" target="_blank" rel="noopener noreferrer">https://github.com/glorious-codes/glorious-demo</a></li></ul>]]></content:encoded>
            <category>hexo</category>
            <category>tag</category>
            <category>demo</category>
            <category>glorious-demo</category>
        </item>
        <item>
            <title><![CDATA[Spring Camp 2018 후기]]></title>
            <link>https://heowc.dev/en/2018/04/25/spring-camp-2018-review</link>
            <guid>2018/04/25/spring-camp-2018-review</guid>
            <pubDate>Wed, 25 Apr 2018 20:00:00 GMT</pubDate>
            <description><![CDATA[Spring Camp 2018 후기이다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>Spring Camp 2018 후기이다.</p></blockquote><p>작년에 이어 Spring Camp를 다녀왔다. 올해는 MSA가 주된 주제이다.</p><p>의도치 않게 지금 회사에서는 업무로 자바를 사용하고 있지 않지만, 회사에서 관심을 갖고 있는 영역(Java, MSA 등)이기에 공유할 겸 참여하게 되었다. 물론, 나 또한 아직 관심을 갖고 있다.</p><p>사실 후기랄 건 없고, 회사에서 발표한 자료를 공유하고자 한다. 앞서 말했듯이, 회사에서는 아직 자바나 Spring, Spring Cloud을 쓰고 있지 않기 때문에 간단하게 작성할 목적도 있었지만 관련 레퍼런스를 가기 3~4주 정도 밖에 못 보고 참여했던터라 내용이 많이 부족하다.</p><p>주로 <code>Spring Cloud</code> 관련 내용을 공유했다. 보다 많은 자료를 원한다면, 약 3개월 뒤에 자료가 오픈된다고 하니 참고하길 바란다.</p><embed width="80%" height="400px" style="display:flex;margin:0 auto" src="/file/spring-camp-2018-review.pdf"><p><a target="_blank" href="/en/assets/files/spring-camp-2018-review-bce7edd8d5aad4858bb828579ea31217.pdf">spring-camp-2018-review.pdf</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="발표자료">발표자료<a class="hash-link" href="#발표자료" title="Direct link to heading">​</a></h4><ul><li><a href="https://www.slideshare.net/mobile/arawnkr/ss-94475606" target="_blank" rel="noopener noreferrer">https://www.slideshare.net/mobile/arawnkr/ss-94475606</a></li></ul>]]></content:encoded>
            <category>review</category>
            <category>spring-camp</category>
        </item>
        <item>
            <title><![CDATA[Java 8 - Time API]]></title>
            <link>https://heowc.dev/en/2018/03/18/java8-time-package</link>
            <guid>2018/03/18/java8-time-package</guid>
            <pubDate>Sun, 18 Mar 2018 19:55:41 GMT</pubDate>
            <description><![CDATA[Java 8에서는 새로운 날짜 API가 추가되었다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>Java 8에서는 새로운 날짜 API가 추가되었다.</p></blockquote><p>기존 레거시 코드 중, <code>Date</code>가 있다. 물론 <code>Calender</code>를 사용하면 되지만 Java 8에서 새로운 <strong>Time API</strong>가 나왔으니 이를 써보도록 하자. 핵심 클래스는 다음과 같다.</p><ul><li><code>LocalTime</code></li><li><code>LocalDate</code></li><li><code>LocalDateTime</code></li><li><code>ZoneDateTIme</code></li><li><code>...</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="api-맛보기">API 맛보기<a class="hash-link" href="#api-맛보기" title="Direct link to heading">​</a></h3><p>간단히 API를 살펴보기로 하자. 개인적인 생각이지만 기존 관련 API보다 다양한 메소드를 제공하고 사용하기 편하다는 느낌을 받았다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="현재시간">현재시간<a class="hash-link" href="#현재시간" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">LocalTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ex) 20:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">LocalDate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  ex) 2018-03-18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2017-03-18T20:00:00</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="초기화">초기화<a class="hash-link" href="#초기화" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">LocalTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 20:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">LocalDate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2018</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2017-02-07</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">LocalDate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2018</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">LocalTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2017-02-07T20:00:00</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="변경">변경<a class="hash-link" href="#변경" title="Direct link to heading">​</a></h4><p><code>withXXXX()</code>를 이용하여 값을 변경할 수 있다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">LocalDateTime</span><span class="token plain"> localDateTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  2018-03-18T20:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withYear</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2016</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2016-03-18T20:00:00</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="연산">연산<a class="hash-link" href="#연산" title="Direct link to heading">​</a></h4><p><code>plusXXXX()</code>, <code>minusXXXX()</code>를 이용하여 연산이 가능하다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">LocalDateTime</span><span class="token plain"> localDateTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  2018-03-18T20:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">plusDays</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  2018-03-19T20:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">minusDays</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  2018-03-17T20:00:00</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="비교">비교<a class="hash-link" href="#비교" title="Direct link to heading">​</a></h4><p><code>isAfter()</code>, <code>isBefore()</code>, <code>isEqual()</code> 등 이 있다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">LocalDateTime</span><span class="token plain"> localDateTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  2018-03-18T20:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">LocalDateTIme</span><span class="token plain"> compareDateTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">plusDays</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  2018-03-19T20:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isBefore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">compareDateTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="etc">etc<a class="hash-link" href="#etc" title="Direct link to heading">​</a></h4><p>그 외에도 간단한 메소드들을 제공한다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">LocalDateTime</span><span class="token plain"> localDateTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 2017-02-07T20:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getYear</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2017</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDayOfYear</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 38 (년 기준으로 38일째)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDayOfMonth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 7 (달 기준으로 7일째)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDayOfWeek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// TUSEDAY (주 기준으로 화 요일)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getMonth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// FEBRUARY </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getMonthValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isLeapYear</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// false (윤년 여부)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="period와-duration"><code>Period</code>와 <code>Duration</code><a class="hash-link" href="#period와-duration" title="Direct link to heading">​</a></h4><p><code>Period</code>와 <code>Duration</code>는 날짜의 차이를 표현해주는 클래스이다. 차이가 있다면, <code>Period</code>는 기간(년,월,일)을 구할 때 사용 할 수 있고, <code>Duration</code>은 <code>Period</code>보다 세세하게 시간, 분, 초 단위까지 가능하다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">LocalDate</span><span class="token plain"> localDate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  2017-02-07</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">LocalDate</span><span class="token plain"> compareDate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> localDate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">plusDays</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  2017-02-08</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 1.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Period</span><span class="token plain"> period </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">until</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">compareDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">period</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDays</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 2.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Period</span><span class="token plain"> period </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Period</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">between</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">locaDate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> compareDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">period</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDays</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">LocalDateTime</span><span class="token plain"> localDateTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  2017-02-07T20:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">LocalDateTime</span><span class="token plain"> compareDateTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">plusDays</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  2017-02-08T20:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Duration</span><span class="token plain"> duration </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Duration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">between</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> compareDateTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">duration</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toMinutes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// -1 * (24 * 60) -&gt; 하루 차이를 분 단위로 표시</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="query">Query<a class="hash-link" href="#query" title="Direct link to heading">​</a></h4><p><code>TemporalQuery&lt;R&gt;</code>를 이용하여 사용자 정의 기능을 사용할 수 있다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ex) 2월이라면 참, 아니면 거짓</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">TemporalQuery</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Boolean</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> t </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ChronoField</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">MONTH_OF_YEAR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token class-name">Month</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FEBRUARY</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">LocalDateTime</span><span class="token plain"> localDateTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//  2018-03-18T20:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="format">format<a class="hash-link" href="#format" title="Direct link to heading">​</a></h4><p>기존(<code>Date</code>, <code>Calender</code>) 클래스에서는 형식 클래스인 <code>SimpleDateFormat</code>로 패턴을 변경했지만, <code>DateTimeFormatter</code>로 패턴을 변경할 수 있습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">LocalDate</span><span class="token plain"> localDate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LocalDate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2017</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2017-02-07</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">DateTimeFormatter</span><span class="token plain"> formatter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofPattern</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"yyyy년 MM월 dd일"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localDate</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">format</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">formatter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2017년 02월 07년</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><p>이외에도 <code>TemporalAdjusters</code>를 이용하여 보다 세부적인 날짜 처리를 해볼 수 있다.
<a href="https://github.com/heowc/Java8Sample/tree/master/Java8TimeAPI/src/sample" target="_blank" rel="noopener noreferrer">Java8Sample - Java8TimeAPI</a></p>]]></content:encoded>
            <category>java8</category>
            <category>time</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot - CORS]]></title>
            <link>https://heowc.dev/en/2018/03/13/spring-boot-cors</link>
            <guid>2018/03/13/spring-boot-cors</guid>
            <pubDate>Tue, 13 Mar 2018 20:02:00 GMT</pubDate>
            <description><![CDATA[브라우저 초기에 보안상의 이유로 스크립트 내에서 시작된 교착 출처 HTTP 요청을 제한하는데, 이를 SOP(Same-Origin Policy, 동일 출처 정책)라 한다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>브라우저 초기에 보안상의 이유로 스크립트 내에서 시작된 교착 출처 HTTP 요청을 제한하는데, 이를 <strong>SOP(Same-Origin Policy, 동일 출처 정책)</strong>라 한다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="동일-출처">동일 출처?<a class="hash-link" href="#동일-출처" title="Direct link to heading">​</a></h3><p>SOP는 두 Origin 간에 프로토콜, 포트, 호스트가 같아야 동일 Origin라고 할 수 있다.</p><p>예를 들어, <a href="#"><code>http://www.heowc.com</code></a> 이라는 URL이 있다면 다음과 같은 상황이 발생한다.</p><div class="mermaid" data-mermaid-src="    graph LR
        H1[http://www.heowc.com/user] -->|성공| H[http://www.heowc.com]
        H2[https://www.heowc.com] -.->|실패 - 프로토콜 상이|H[http://www.heowc.com]
        H3[http://www.heowc.com:8080] -.->|실패 - 포트 상이| H[http://www.heowc.com]
        H4[http://blog.heowc.com] -.->|실패 - 호스트 상이| H[http://www.heowc.com]">    graph LR
        H1[http://www.heowc.com/user] --&gt;|성공| H[http://www.heowc.com]
        H2[https://www.heowc.com] -.-&gt;|실패 - 프로토콜 상이|H[http://www.heowc.com]
        H3[http://www.heowc.com:8080] -.-&gt;|실패 - 포트 상이| H[http://www.heowc.com]
        H4[http://blog.heowc.com] -.-&gt;|실패 - 호스트 상이| H[http://www.heowc.com]</div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cors">CORS<a class="hash-link" href="#cors" title="Direct link to heading">​</a></h3><p>그래서 이를 보완하기 위해 브라우저측에서 JSONP를 사용하거나, 서버측에서 <strong>CORS</strong>를 이용하여 해결할 수 있다. 여기서 <strong>CORS(Cross-Origin Resource Sharing)</strong> 란, 웹 서버 도메인간 액세스 제어 기능을 제공하여 보안 도메인간 데이터 전송을 가능하게 해준다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cors-동작과정">CORS 동작과정<a class="hash-link" href="#cors-동작과정" title="Direct link to heading">​</a></h4><ol><li>pre-flight : 실제 요청하려는 경로와 같은 URL에 대해 OPTIONS로 요청을 날려보고 요청가능한지 확인</li><li>실제 요청</li></ol><p><img loading="lazy" alt="Alt CORS 동작과정" src="data:image/jpeg;base64,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" width="400" height="295" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-boot에서-활용-해보기">Spring Boot에서 활용 해보기<a class="hash-link" href="#spring-boot에서-활용-해보기" title="Direct link to heading">​</a></h3><p>우선, 서버에서는 브라우저에 다음과 같은 키를 <strong>header</strong>에 보내줘야 한다.</p><ul><li><code>Access-Control-Allow-Orgin</code> : 요청을 보내는 페이지의 출처 (*, 도메인)</li><li><code>Access-Control-Allow-Methods</code> : 요청을 허용하는 메소드 (Default : GET, POST, HEAD)</li><li><code>Access-Control-Max-Age</code> : 클라이언트에서 pre-flight의 요청 결과를 저장할 시간 지정. 해당 시간 동안은 pre-flight를 다시 요청하지 않는다.</li><li><code>Access-Control-Allow-Headers</code> : 요청을 허용하는 헤더</li></ul><p>그리고 Spring과 Spring Boot에서는 아래의 2가지 방법으로 <strong>CORS</strong>를 해결할 수 있다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="controller-지정">Controller 지정<a class="hash-link" href="#controller-지정" title="Direct link to heading">​</a></h4><p>개별적으로 허용하는 방법으로는 <code>@CrossOrigin</code>를 사용하는 것이다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@CrossOrigin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"*"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@GetMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"{value}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token annotation punctuation" style="color:#393A34">@PathVariable</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="global하게-지정">Global하게 지정<a class="hash-link" href="#global하게-지정" title="Direct link to heading">​</a></h4><p><code>WebMvcConfigurer</code>를 구현하거나 다음과 같이 <code>@Bean</code>으로 등록하여 <code>addCorsMappings</code>에 원하는 path를 추가하면 된다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">WebMvcConfigurer</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">webMvcConfigurer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">WebMvcConfigurer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addCorsMappings</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">CorsRegistry</span><span class="token plain"> registry</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/message/**"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">allowedOrigins</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"*"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">allowedMethods</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpMethod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">POST</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">allowCredentials</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">maxAge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3600</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><p><a href="https://github.com/heowc/SpringBootSample/tree/master/SpringBootCors" target="_blank" rel="noopener noreferrer">SpringBootSample / SpringBootCors</a></p>]]></content:encoded>
            <category>spring</category>
            <category>spring-boot</category>
            <category>cors</category>
        </item>
        <item>
            <title><![CDATA[개발 속도를 높여주는 소소한 팁 (Chrome)]]></title>
            <link>https://heowc.dev/en/2018/02/13/tip-chrome-extension</link>
            <guid>2018/02/13/tip-chrome-extension</guid>
            <pubDate>Tue, 13 Feb 2018 21:17:48 GMT</pubDate>
            <description><![CDATA[개발을 하다보면 사소한 불편한이 존재하기도 한다. 가령, URL을 저장해두기 애매하여 수 많은 TAB이 방치해두는 것이 대표적인 예가 될 수 있다. 이외에도 더 많은 예가 있지만, 아래에 그 상황에 따라 충족할 만한 Chrome Extension을 나열해 보았다.]]></description>
            <content:encoded><![CDATA[<p>개발을 하다보면 사소한 불편한이 존재하기도 한다. 가령, URL을 저장해두기 애매하여 수 많은 TAB이 방치해두는 것이 대표적인 예가 될 수 있다. 이외에도 더 많은 예가 있지만, 아래에 그 상황에 따라 충족할 만한 <strong>Chrome Extension</strong>을 나열해 보았다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="url-클립보드">URL 클립보드<a class="hash-link" href="#url-클립보드" title="Direct link to heading">​</a></h3><p><a href="https://chrome.google.com/webstore/detail/google-keep-chrome-extens/lpcaedmchfhocbbapmcbpinfpgnhiddi?hl=en-US" target="_blank" rel="noopener noreferrer">Google Keep</a>: 구글 Extension. URL만 별도로 모아둘 수 있는 서비스이다.</p><p><a href="https://chrome.google.com/webstore/detail/save-to-pocket/niloccemoadcdkdjlinkgdfekeahmflj?hl=en-US" target="_blank" rel="noopener noreferrer">Pocket</a>: Google Keep과 유사한 서비스이다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="formatter-view">Formatter View<a class="hash-link" href="#formatter-view" title="Direct link to heading">​</a></h3><p><a href="https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa?hl=en-US" target="_blank" rel="noopener noreferrer">Json Formatter</a>: JSON 데이터를 브라우저상에서 깔끔하게 보여준다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="front-end-devtool">Front-end DevTool<a class="hash-link" href="#front-end-devtool" title="Direct link to heading">​</a></h3><p><a href="https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei?hl=en-US" target="_blank" rel="noopener noreferrer">LiveReload</a>: IDE와 브라우저간의 HTML 수정시 동기화 해준다.</p><p><a href="https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd" target="_blank" rel="noopener noreferrer">Vue.js devtools</a>: Vue 개발 Extension</p><p><a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi" target="_blank" rel="noopener noreferrer">React Developer Tools</a>: React 개발 Extension</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mail">Mail<a class="hash-link" href="#mail" title="Direct link to heading">​</a></h3><p><a href="https://chrome.google.com/webstore/detail/checker-plus-for-gmail/oeopbcgkkoapgobdbedcemjljbihmemj?hl=en-US" target="_blank" rel="noopener noreferrer">Gmail Checker</a>: Gmail 메일 알람을 노티로 띄워준다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="git">Git<a class="hash-link" href="#git" title="Direct link to heading">​</a></h3><p><a href="https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc?hl=en-US" target="_blank" rel="noopener noreferrer">octotree</a>: GitHub 관련 Extension. 좌측 사이드바 메뉴가 생기며 해당 repository 구조를 볼 수 있다.</p><p><a href="https://chrome.google.com/webstore/detail/gitlab-tree/dllpphhnoanpcnlnipopibigdoeignbb?hl=en-US" target="_blank" rel="noopener noreferrer">gitlab tree</a>: GitLab 관련 Extension. 좌측 사이드바 메뉴가 생기며 해당 repository 구조를 볼 수 있다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="etc">etc<a class="hash-link" href="#etc" title="Direct link to heading">​</a></h3><p><a href="https://chrome.google.com/webstore/detail/colorpick-eyedropper/ohcpnigalekghcmgcdcenkpelffpdolg?hl=en-US" target="_blank" rel="noopener noreferrer">Color Picker</a>: 색상코드를 알려준다</p><p><a href="https://chrome.google.com/webstore/detail/wappalyzer/gppongmhjkpfnbhagpmjfkannfbllamg" target="_blank" rel="noopener noreferrer">Wappalyzer</a>: 해당 URL에서 사용하는 spec을 보여준다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test">Test<a class="hash-link" href="#test" title="Direct link to heading">​</a></h3><p><a href="http://troy.labs.daum.net/" target="_blank" rel="noopener noreferrer">http://troy.labs.daum.net/</a>: 모바일 기기의 해상도를 한번에 테스트해볼 수 있는 페이지</p><p><a href="https://www.ssllabs.com/" target="_blank" rel="noopener noreferrer">https://www.ssllabs.com/</a>: SSL 확인</p>]]></content:encoded>
            <category>chrome</category>
            <category>chrome-extension</category>
            <category>tip</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot - Async 심화]]></title>
            <link>https://heowc.dev/en/2018/02/13/spring-boot-async-advanced</link>
            <guid>2018/02/13/spring-boot-async-advanced</guid>
            <pubDate>Tue, 13 Feb 2018 20:14:33 GMT</pubDate>
            <description><![CDATA[SimpleAsyncTaskExecutor는 Thread Pool이 아니다.]]></description>
            <content:encoded><![CDATA[<blockquote><p><code>SimpleAsyncTaskExecutor</code>는 Thread Pool이 아니다.</p></blockquote><p><code>SimpleAsyncTaskExecutor</code>는 단순히 Thread를 계속 만들어내는 객체이다. Thread는 자원이 많이 들기 때문에 가급적이면 Thread Pool 관리하에 사용이 되어야 한다.</p><p>그렇다면, 이를 확인해보자. 일단 가시화를 해보기 위해 <strong><a href="https://visualvm.github.io/" target="_blank" rel="noopener noreferrer">VisualVM</a></strong>을 사용해보고자 한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설정">설정<a class="hash-link" href="#설정" title="Direct link to heading">​</a></h3><p>기본적인 설정은 <a href="https://heowc.dev/2018/02/10/spring-boot-async" target="_blank" rel="noopener noreferrer">Spring Boot - Async</a>에서 간략하게 다뤄봤다. 보다 자세한 내용을 원한다면 공식 문서나 <a href="https://spring.io/guides/gs/async-method/" target="_blank" rel="noopener noreferrer">가이드</a>를 참고하기를 권장한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="simpleasynctaskexecutor">SimpleAsyncTaskExecutor<a class="hash-link" href="#simpleasynctaskexecutor" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bean-등록">Bean 등록<a class="hash-link" href="#bean-등록" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Executor</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAsyncExecutor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SimpleAsyncTaskExecutor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"heowc-async-"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="가시화">가시화<a class="hash-link" href="#가시화" title="Direct link to heading">​</a></h4><p>테스트는 10번의 HTTP 호출해본다. 당연한 결과이지만 앞서 말한바와 같이 10개의 Thread가 생성된 것을 볼 수 있다. </p><p><img loading="lazy" alt="Alt SimpleAsyncTaskExecutor 결과" src="data:image/png;base64,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" width="622" height="623" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-thread-pool">Custom Thread Pool<a class="hash-link" href="#custom-thread-pool" title="Direct link to heading">​</a></h3><p>그렇다면 Thread Pool을 만들면 어떤 결과가 나오게 될까?</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bean-등록-1">Bean 등록<a class="hash-link" href="#bean-등록-1" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Executor</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAsyncExecutor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">ThreadPoolTaskExecutor</span><span class="token plain"> executor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ThreadPoolTaskExecutor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setCorePoolSize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setMaxPoolSize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setQueueCapacity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setThreadNamePrefix</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"heowc-async-"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> executor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="가시화-1">가시화<a class="hash-link" href="#가시화-1" title="Direct link to heading">​</a></h4><p>앞서 했던 테스트와 동일하게 진행 했다. 결과는 10개 보다 작은 Thread를 생성하게 된다.</p><p><img loading="lazy" alt="Alt Custom Thread Pool 결과" src="data:image/png;base64,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" width="621" height="618" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="asyncresttemplate">AsyncRestTemplate<a class="hash-link" href="#asyncresttemplate" title="Direct link to heading">​</a></h3><p><code>AsyncRestTemplate</code>는 <code>RestTemplate</code>를 비동기로 처리하기 위한 방법이다. (Spring 5에서는 <strong>deprecated</strong>되었고 <code>WebClient</code>를 사용해야 한다.)</p><p><code>AsyncRestTemplate</code> 또한 Async와 동일하게 <code>SimpleAsyncTaskExecutor</code>를 기본적으로 사용한다. 물론 Thread Pool를 만들어주는 것도 좋지만, <code>AsyncRestTemplate</code>를 보다 효율적으로 사용하기 위해서는 <strong>NIO 라이브러리</strong>를  사용하는 것이 좋다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="dependency">Dependency<a class="hash-link" href="#dependency" title="Direct link to heading">​</a></h4><p>NIO 라이브러리는 <a href="https://hc.apache.org/httpcomponents-asyncclient-dev/index.html" target="_blank" rel="noopener noreferrer">Apache</a>와 <a href="http://netty.io/wiki/" target="_blank" rel="noopener noreferrer">Netty</a>에서 제공한다.</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile('org.apache.httpcomponents:httpasyncclient:4.1.3')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile('io.netty:netty-all:4.1.11.Final')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="config">Config<a class="hash-link" href="#config" title="Direct link to heading">​</a></h4><p>Apache에서 제공해주는 것은 <code>HttpCoponentsAsyncClientHttpRequestFactory</code>를 사용하면 되고, Netty에서 제공해주는 것은 <code>Netty4ClientHttpRequestFactory</code>를 이용하면 된다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">AsyncRestTemplate</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">asyncRestTemplate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//    return new AsyncRestTemplate(new Netty4ClientHttpRequestFactory());</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AsyncRestTemplate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HttpComponentsAsyncClientHttpRequestFactory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="가시화-2">가시화<a class="hash-link" href="#가시화-2" title="Direct link to heading">​</a></h4><p><code>SimpleAsyncTaskExecutor</code> 사용
<img loading="lazy" alt="Alt SimpleAsyncTaskExecutor" src="data:image/png;base64,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" width="618" height="595" class="img_ev3q"></p><p><code>HttpCoponentsAsyncClientHttpRequestFactory</code> 사용
<img loading="lazy" alt="Alt HttpCoponentsAsyncClientHttpRequestFactory" src="data:image/png;base64,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" width="622" height="614" class="img_ev3q"></p>]]></content:encoded>
            <category>spring</category>
            <category>spring-boot</category>
            <category>async</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot - Async]]></title>
            <link>https://heowc.dev/en/2018/02/10/spring-boot-async</link>
            <guid>2018/02/10/spring-boot-async</guid>
            <pubDate>Sat, 10 Feb 2018 15:35:41 GMT</pubDate>
            <description><![CDATA[비동기 통신 비동기 전송방식)]]></description>
            <content:encoded><![CDATA[<blockquote><p><strong>비동기 통신</strong>: 자료를 일정한 크기로 정하여 순서대로 전송하는 자료의 전송방식(참고 : <a href="https://ko.wikipedia.org/wiki/%EB%B9%84%EB%8F%99%EA%B8%B0_%EC%A0%84%EC%86%A1_%EB%B0%A9%EC%8B%9D" target="_blank" rel="noopener noreferrer">비동기 전송방식</a>)</p></blockquote><div class="mermaid" data-mermaid-src="    graph LR
        subgraph Sync
        C1[Client 1]-->|Request|T1[Thread 1]
        T1[Thread 1]-->|Response|C1[Client 1]
        end
        subgraph Async
        C2[Client 2]-->|Request|T2[Thread 2]
        T2[Thread 2]-->|Response|C2[Client 2]
        T2[Thread2]-.->|<b>Async</b>|T3[Thread3]
        end">    graph LR
        subgraph Sync
        C1[Client 1]--&gt;|Request|T1[Thread 1]
        T1[Thread 1]--&gt;|Response|C1[Client 1]
        end
        subgraph Async
        C2[Client 2]--&gt;|Request|T2[Thread 2]
        T2[Thread 2]--&gt;|Response|C2[Client 2]
        T2[Thread2]-.-&gt;|&lt;b&gt;Async&lt;/b&gt;|T3[Thread3]
        end</div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="언제-사용하면-좋을까">언제 사용하면 좋을까?<a class="hash-link" href="#언제-사용하면-좋을까" title="Direct link to heading">​</a></h3><ul><li>요청이 긴 경우</li><li>로그 처리</li><li>푸시 처리</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dependency">Dependency<a class="hash-link" href="#dependency" title="Direct link to heading">​</a></h3><p>Spring 3.1 이후에 사용 가능 하다. (<code>spring-context</code>에 포함되어 있다.)</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile('org.springframework.boot:spring-boot-starter-web')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testCompile('org.springframework.boot:spring-boot-starter-test')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="config">Config<a class="hash-link" href="#config" title="Direct link to heading">​</a></h3><p><code>@EnableAsync</code>만 추가하면 기본적인 설정은 끝이다.
하지만, 기본값인 <code>SimpleAsyncTaskExecutor</code> 클래스는 매번 Thread를 만들어내는 객체이기 때문에 <strong>Thread Pool이 아니다.</strong> Thread Pool을 설정해기 위해 <code>AsyncConfigurerSupport</code>를 상속받아 재구현하자.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@EnableAsync</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">AsyncConfig</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">AsyncConfigurerSupport</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Executor</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAsyncExecutor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">ThreadPoolTaskExecutor</span><span class="token plain"> executor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ThreadPoolTaskExecutor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setCorePoolSize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setMaxPoolSize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setQueueCapacity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setThreadNamePrefix</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"heowc-async-"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> executor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service--controller">Service &amp; Controller<a class="hash-link" href="#service--controller" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="service">Service<a class="hash-link" href="#service" title="Direct link to heading">​</a></h4><p>비동기 작업을 하기 위한 메소드에 <code>@Async</code>를 추가하면 된다. 만약 <strong>callback</strong>이 필요하다면, <code>Future</code> 클래스 등의 객체로 감싸서 반환하면 된다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">BasicServiceImpl</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">BasicService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BasicServiceImpl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Async</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"onAsync"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"onSync"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="controller">Controller<a class="hash-link" href="#controller" title="Direct link to heading">​</a></h4><p><strong>Test Case</strong>로는 비동기를 확인할 수 없기 때문에(?) HTTP 요청으로 이를 확인해보자.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@RestController</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">BasicController</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">BasicService</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BasicController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@GetMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/async"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">goAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">onAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> str </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Hello Spring Boot Async!!"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"=================================="</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> str</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@GetMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/sync"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">goSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">onSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> str </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Hello Spring Boot Sync!!"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"=================================="</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> str</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="결과">결과<a class="hash-link" href="#결과" title="Direct link to heading">​</a></h4><div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:8080/async</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">~ : Hello Spring Boot Async!!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~ : ==================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~ : onAsync</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:8080/sync</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">~ : onSync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~ : Hello Spring Boot Sync!!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~ : ==================================</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/heowc/SpringBootSample/tree/master/SpringBootAsync" target="_blank" rel="noopener noreferrer">SpringBootSample / SpringBootAsync</a></li></ul>]]></content:encoded>
            <category>spring</category>
            <category>spring-boot</category>
            <category>async</category>
        </item>
        <item>
            <title><![CDATA[Thread Pool 이해하기]]></title>
            <link>https://heowc.dev/en/2018/02/08/thread-pool</link>
            <guid>2018/02/08/thread-pool</guid>
            <pubDate>Thu, 08 Feb 2018 21:57:49 GMT</pubDate>
            <description><![CDATA[Process: 운영체제에서 하나의 어플리케이션]]></description>
            <content:encoded><![CDATA[<blockquote><p><strong>Process</strong>: 운영체제에서 하나의 어플리케이션
<strong>Thread</strong>: Process에서 하나의 작업</p></blockquote><p>여러 Thread를 동시에 만들어 실행(병렬처리)할 수 있다. Java에 경우, <code>Thread</code>, <code>Runnable</code>를 이용해야 한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="동시성concurrency-와-병렬성parallelism">동시성(Concurrency) 와 병렬성(Parallelism)<a class="hash-link" href="#동시성concurrency-와-병렬성parallelism" title="Direct link to heading">​</a></h3><p>동시성은 싱글 코어에서 멀티 스레드를 동작시키기 위한 방식으로 멀티 태스킹을 위해 여러 개의 스레드가 번갈아가면서 실행되는 성질을 말한다. 동시성을 이용한 싱글 코어의 멀티 태스킹은 각 스레드들이 병렬적으로 실행되는 것처럼 보이지만 사실은 번갈아가면서 조금씩 실행되고 있는 것이다.</p><p>병렬성은 멀티 코어에서 멀티 스레드를 동작시키는 방식으로, 한 개 이상의 스레드를 포함하는 각 코어들이 동시에 실행되는 성질을 말한다. 병렬성은 데이터 병렬성(Data parallelism)과 작업 병렬성(Task parallelism)으로 구분된다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="데이터-병렬성">데이터 병렬성<a class="hash-link" href="#데이터-병렬성" title="Direct link to heading">​</a></h4><p>데이터 병렬성은 전체 데이터를 쪼개 서브 데이터들로 만든 뒤, 서브 데이터들을 병렬 처리하여 작업을 빠르게 수행하는 것을 말한다. 자바 8에서 지원하는 병렬 스트림이 데이터 병렬성을 구현한 것이다. 서브 데이터는 멀티 코어의 수만큼 쪼개어 각각의 데이터들을 분리된 스레드에서 병렬 처리한다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="작업-병렬성">작업 병렬성<a class="hash-link" href="#작업-병렬성" title="Direct link to heading">​</a></h4><p>작업 병렬성은 서로 다른 작업을 병렬 처리하는 것을 말한다. 대표적인 예는 웹 서버로, 각각의 브라우저에서 요청한 내용을 개별 스레드에서 병렬로 처리한다.</p><p><em>≪신용권 - ‘이것이 자바다’≫</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="thread-pool은-무엇인가">Thread Pool은 무엇인가..?<a class="hash-link" href="#thread-pool은-무엇인가" title="Direct link to heading">​</a></h3><p>그렇다고 해서 Thread를 계속 늘려가는 건 좋은 것 일까? 당연히 아니다. 하드웨어의 제한적인 사항(CPU, Memory 등)이 있기 때문에 관리할 필요가 있다. 그래서 Thread Pool이라는 개념을 이용한다. </p><p>Thread Pool은 <strong>작업 처리에 사용되는 스레드를 제한된 개수만큼 정해 놓고 작업 큐(Queue)에 들어오는 작업들을 하나씩 스레드가 맡아 처리하는 것</strong>을 말한다. Java에 경우, 기본적으로 <code>Executors</code>, <code>ExecutorService</code>를 이용하여 Thread Pool를 만들 수 있습니다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="single-thread-pool">Single Thread Pool<a class="hash-link" href="#single-thread-pool" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ExecutorService</span><span class="token plain"> executorService </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Executors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newSingleThreadExecutor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>단일 Worker Thread.</li><li>실패 시, 새로운 Thread를 생성하지 않음.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-thread-pool">Fixed Thread Pool<a class="hash-link" href="#fixed-thread-pool" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ExecutorService</span><span class="token plain"> executorService </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Executors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newFixedThreadPool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> nThreads</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>고정된 Worker Thread를 사용하며, 모든 Thread를 사용 중 이라면 Queue에 쌓여 대기.</li><li>실패 시, 새로운 Thread를 생성하여 대체.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cached-thread-pool">Cached Thread Pool<a class="hash-link" href="#cached-thread-pool" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ExecutorService</span><span class="token plain"> executorService </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Executors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newCachedThreadPool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>필요에 따라서 새로운 Thread를 생성하며, 이전에 생성된 Thread가 존재하면 재사용.</li><li>기본적으로 60초 정도 Thread가 유지.</li><li>비동기 작업에 사용하는데 합리적.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="scheduler-thread-pool">Scheduler Thread Pool<a class="hash-link" href="#scheduler-thread-pool" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ScheduledExecutorService</span><span class="token plain"> scheduledExecutorService </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Executors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newScheduledThreadPool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> corePoolSize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>지정된 delay 후에 실행하거나 주기적으로 실행하도록 명령을 예약.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="work-stealing-thread-pool">Work Stealing Thread Pool<a class="hash-link" href="#work-stealing-thread-pool" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ExecutorService</span><span class="token plain"> executorService </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Executors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newWorkStealingPool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> parallelism</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>자바 8에서 새로 생긴 Thread Pool.</li><li>지정된 parallelism을 지원할만큼 충분한 Thread를 유지하고 여러 Queue을 사용하여 경합을 줄임.</li><li>Thread를 동적으로 늘리고 줄임.</li><li>작업이 실행되는 순서를 보장하지 않음.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/heowc/JavaBasePractice/tree/master/ThreadPool/src/main/java/com/tistory/heowc/threadpool" target="_blank" rel="noopener noreferrer">ThreadPool</a></li></ul>]]></content:encoded>
            <category>thread-pool</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot - AOP]]></title>
            <link>https://heowc.dev/en/2018/02/07/spring-boot-aop</link>
            <guid>2018/02/07/spring-boot-aop</guid>
            <pubDate>Wed, 07 Feb 2018 23:48:38 GMT</pubDate>
            <description><![CDATA[AOP는 Aspect Orient Programming 관점 지향 프로그래밍으로, 기능을 비지니스 로직과 공통 모듈로 구분한 후에 필요한 시점에 비지니스 로직에 삽입하여 실행되게끔 도와준다.]]></description>
            <content:encoded><![CDATA[<blockquote><p><strong>AOP</strong>는 Aspect Orient Programming 관점 지향 프로그래밍으로, 기능을 비지니스 로직과 공통 모듈로 구분한 후에 필요한 시점에 비지니스 로직에 삽입하여 실행되게끔 도와준다. </p></blockquote><p><img loading="lazy" alt="Alt intro" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAEvCAMAAABc/WdeAAAC8VBMVEVHcEwyfZEyfZIzgJQ1e401Xoszf5QzfZQyfpI1YIsyfZEyfZExfZE0gZU9k6lCnrY8k6kyfZEzgJRBm7M4jaMyfJEyf5MyfZEzf5RCn7dKrshKrcgzgZZDoblJq8U5jaNKrcdBnLM1XYs+cII0Y4w0XIk2X441XIo0XIk4YpI3YI81XIpBbqM5YpJKe7RFdq1Ogr5Ogr9Ngb1Ngr04Y5M2Xos0XIo0Xoo1XIo0Yos0fpMyc440fZE1XIo/a548a5w1dJRKgbhJgbY3gJs2gZk/f6VMgLw8f6E/nLNLgrlhj8V6oM6BpdFPg75QhL/a5fG4zeXA0ujI2OuIqtRYicKeutxThsCOr9ZvmcqxyOOqw+CVtNhCb6U2X441XYpKfLVGfLAxfZE1XYuIRjSNNTKMNDKNNTOMNTKONTONNTKYOjeUODanQj+3SkezSUXCT0zBT0ycJyGNNTNMaXg0fY5xiTlJeHWMNTKMNDKMNTN7Q0ZAdodAoLhAm7M7gYpQZXM/nbWNNDKNNTOMNTOcTU5GeotNd4dBfI50aHKmQj9lbXo5k6q8TUrDTkupV1ezVFLBTkunWFi9UE5Od4ewVVXATUrJZWLal5XdnZzRfnvEVlPYkI7gpaPMbmvViIbx2Nfiq6rsycjCUk/nubjGXVrqwsHPd3TksrCNNTKwSEWiQD6PNjSONjSRNzWCQkRWY2+LNDJYeGFnUlo9eYOFOztyijxxiTxziz1viTp0jT5yiz18lkN7lUOSsVKBnEaXtlWdvVicvFhyiTxtiUFviDxyij1yij13j0BsjU1Bnrg+h5BKg3Q/m7VxiT2UslJ/o1lCiY1GiomLq1VdknRXk36bu1aGokucvViLsWKStV+JsGRjmXibu1qZuluPtGCdvVecvFeevlygv2CiwWOlwmevyXnY5b3T4rXJ2qS0zYLO3qyqxnC80o7k7dHe6cenxGvC1plyiTyKpk1SjXuLpkxyijxyijxkiFBpiUpyij1dhldV5BoWAAAA+3RSTlMAI8T/uBTQ/HoGixsu2f///zHl//8CC6XO////5v//////DzxyTuOOSe32jP/z////////9gRLZZeo7dDcsf///f/////////////////////////////////////lYv//idACFUuRIOik++7//////wkMJpMWLlJ2tcH2///44v/GELH///////////////////////////////////////////////8o///V1+br9TNcS6U9OmfDQvbM/ff//////ylLjhCt6+///+//sf//////////////////////////////////////////////Jv///wyIzsrbIK2F1hgAAA3cSURBVHgB7NYFroQwAIThdXd3d3f3vf+ZnjuzXlJeMv8FhuYLUJ2Q9AYjzGTWiU9vgVtWm/Alu8OKj+XUaTyX2+MF+SxqPLk/gMaCIUdY9FIkGoLHium1DxJPJBOKguqApNKKsWQik1UDxJNLJBRT+f8BklOmHohySy0QZQQhCEEIQhBxEYQgBCEIQQhCEIIQhCAEIQhBCEIQghCEIAQhCEEIQhCCEIQghYKmQAhSLJm1BEKQcqVq1hAIQWr1RtOsJRCCtNpYhCCSQDpdLEIQWSA9LEIQWSD9ARYhiCyQHhYhiDQQLEIQeSBYhCDyQHpDLEIQOSBvIiMsQhAJIOAdkQlCEPCOyAQhCHhHJIIQBIhIBSEIEJEPQpA3kVHVLB2EIFe+I+OHC/tPgoyFFz4JYhc9VTgBYtGHb3zmyTfIxbtWZDp7uPkCgyzmM/HNrRhkKX5qhUFuP9a68QZy1TtSWI82j7Y1YhDrdiO+rRGD7MRP7XwQxHj7sVr7NwbwjgCQ1uDRDkcMctwPxHd4ZsdOVNyGgTAAcxUIfY3SQjk6mQXaB2jVVmM7knVYx3bf/zEaO2xNYAJLV0EszA9EyOEKH79G8Xce5Ae2jvrJgvz6n58Fe/aOfHrHg8Arc7wJ8hua53gTBFrn4SbIERqEObXeIgjcBHl4EyDM7bcTiIDwHekPIiB8R/qDCAjgNtm7gQgI35F+IALCd6Q/iIDwHekPIiCAm0hPEAFh/rN3BREQ5tTqDCIg/GTfQZRSCC8NKhSQ5h25AtE0kB7hZZk0aQG5Q0d2EBxOxs7Dv6+vljWIl481o7MnhwLSviM7iHJW+zDraYoRwPsJATD6OK6b1eD8aHu+FYQGswhI4+AmsoMYr9KsKYSgl2yCxpGKKTq6nF30NWeK5+eXDuGUBeQuHXl/3RDr66mmainlHJOtibwzNFhylkjTTJRgSxSQe+TL5287yMlaS6paH82gVJpTzVFh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" width="400" height="303" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="언제-사용되는가">언제 사용되는가?<a class="hash-link" href="#언제-사용되는가" title="Direct link to heading">​</a></h3><ul><li>성능 검사</li><li>트랜잭션 처리</li><li>로깅</li><li>예외 반환</li><li>검증</li><li>...</li></ul><p>실 예로, <code>@Transactional</code>, <code>@Cache</code>같은 애노테이션들은 AOP를 활용하여 동작하게 된다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구성요소">구성요소<a class="hash-link" href="#구성요소" title="Direct link to heading">​</a></h3><ul><li><code>JoinPoint</code>: 모듈의 기능이 삽입되어 동작할 수 있는 실행 가능한 특정 위치</li><li><code>PointCut</code>: 어떤 클래스의 어느 JoinPoint를 사용할 것인지를 결정</li><li><code>Advice</code>: 각 JoinPoint에 삽입되어져 동작할 수 있는 코드</li><li><code>Interceptor</code>: InterceptorChain 방식의 AOP 툴에서 사용하는 용어로 주로 한개의 호출 메소드를 가지는 Advice</li><li><code>Weaving</code>: PointCut에 의해서 결정된 JoinPoint에 지정된 Advice를 삽입하는 과정(CrossCutting) </li><li><code>Introduction</code>: 정적인 방식의 AOP 기술</li><li><code>Aspect</code>: PointCut + Advice + (Introduction)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dependency">Dependency<a class="hash-link" href="#dependency" title="Direct link to heading">​</a></h3><p><strong>JDK DynamicProxy</strong>를 이용하여 AOP 기능을 사용할 수 있지만 가장 많이 사용되는 <code>AspectJ</code>를 사용해보도록 한다.</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile('org.springframework.boot:spring-boot-starter-web')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile('org.springframework.boot:spring-boot-starter-aop') </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testCompile('org.springframework.boot:spring-boot-starter-test') </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="config">Config<a class="hash-link" href="#config" title="Direct link to heading">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@EnableAspectJAutoProxy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">AspectJConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aspect">Aspect<a class="hash-link" href="#aspect" title="Direct link to heading">​</a></h3><p>구성요소들을 적절히 활용하여 로그를 찍어볼 수 있도록 <code>Aspect</code>를 만든다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Aspect</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">TestAspect</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LoggerFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">TestAspect</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Before</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"execution(* com.example.service.*.*Aop(..))"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onBeforeHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">JoinPoint</span><span class="token plain"> joinPoint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"=============== onBeforeThing"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@After</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"execution(* com.example.service.*.*Aop(..))"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onAfterHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">JoinPoint</span><span class="token plain"> joinPoint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"=============== onAfterHandler"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@AfterReturning</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pointcut </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"execution(* com.example.service.*.*Aop(..))"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    returning </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"str"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onAfterReturningHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">JoinPoint</span><span class="token plain"> joinPoint</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token plain"> str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"@AfterReturning : "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"=============== onAfterReturningHandler"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Pointcut</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"execution(* com.example.service.*.*Aop(..))"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onPointcut</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">JoinPoint</span><span class="token plain"> joinPoint</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"=============== onPointcut"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="controller-service">Controller, Service<a class="hash-link" href="#controller-service" title="Direct link to heading">​</a></h3><p>딱히 <code>Controller</code>와 <code>Service</code>가 필요한 것은 아니지만, 로그 결과를 보기 위해서 간단하게 만들어 보자.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="controller">Controller<a class="hash-link" href="#controller" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@RestController</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">TestController</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">TestService</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@GetMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/noAop"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">noAop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@GetMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/aop"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">aop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> service</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">testAop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="service">Service<a class="hash-link" href="#service" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">TestServiceImpl</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">TestService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LoggerFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">TestServiceImpl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> msg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Hello, Spring Boot No AOP"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">testAop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> msg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Hello, Spring Boot AOP"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="결과">결과<a class="hash-link" href="#결과" title="Direct link to heading">​</a></h4><div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:8080/aop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">~: =============== onBeforeThing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~ : Hello, Spring Boot AOP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~ : =============== onAfterHandler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~ : @AfterReturning : Hello, Spring Boot AOP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~ : =============== onAfterReturningHandler</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:8080/noAop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">~ : Hello, Spring Boot No AOP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/heowc/SpringBootSample/tree/master/SpringBootAOP" target="_blank" rel="noopener noreferrer">SpringBootSample / SpringBootAop</a></li></ul>]]></content:encoded>
            <category>spring</category>
            <category>spring-boot</category>
            <category>aop</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot - Interceptor]]></title>
            <link>https://heowc.dev/en/2018/02/06/spring-boot-interceptor</link>
            <guid>2018/02/06/spring-boot-interceptor</guid>
            <pubDate>Tue, 06 Feb 2018 21:04:21 GMT</pubDate>
            <description><![CDATA[Interceptor는 가로채는 것, 요격기 라는 뜻이다.]]></description>
            <content:encoded><![CDATA[<blockquote><p><strong>Interceptor</strong>는 가로채는 것, 요격기 라는 뜻이다.</p></blockquote><div class="mermaid" data-mermaid-src="    graph LR
        V[View] --> C[Controller]
        V[View] --> I[Interceptor]
        I[Interceptor] --> C[Controller]  ">    graph LR
        V[View] --&gt; C[Controller]
        V[View] --&gt; I[Interceptor]
        I[Interceptor] --&gt; C[Controller]  </div><p>다시 말해서, Url Mapping된 Controller를 거치는 전, 후 처리를 할 수 있도록 도와주는 요소를 말하며 세션 검증, 로그 처리 같은 행위가 간단한 예시가 될 수 있다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dependency">Dependency<a class="hash-link" href="#dependency" title="Direct link to heading">​</a></h3><p>Interceptor는 <code>spring-webmvc</code>에 포함되어 있다. Spring Boot에서는 <code>spring-boot-starter-web</code>을 가져옴으로 해결할 수 있다.</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile('org.springframework.boot:spring-boot-starter-web') </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testCompile('org.springframework.boot:spring-boot-starter-test') </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="interceptor">Interceptor<a class="hash-link" href="#interceptor" title="Direct link to heading">​</a></h3><p>기본 인터페이스는 <code>HandlerInterceptor</code>이고, 이를 구현할 수 해도 되지만, 추상 클래스인 <code>HandlerInterceptorAdapter</code>를 구현할 수도 있다. Java 1.8 부터는 굳이 <code>HandlerInterceptorAdapter</code>를 이용하지 않아도 된다. 하지만, 예시를 위해 모두 구현 해본다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">HttpInterceptor</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">HandlerInterceptor</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpInterceptor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">preHandle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpServletRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             </span><span class="token class-name">HttpServletResponse</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             </span><span class="token class-name">Object</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"================ Before Method"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">postHandle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token class-name">HttpServletRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token class-name">HttpServletResponse</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token class-name">Object</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token class-name">ModelAndView</span><span class="token plain"> modelAndView</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"================ Method Executed"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">afterCompletion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpServletRequest</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token class-name">HttpServletResponse</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token class-name">Object</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token class-name">Exception</span><span class="token plain"> ex</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"================ Method Completed"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>preHandle()</code> : 맵핑되기 전 처리를 해주면 됩니다.</li><li><code>postHandle()</code> : 맵핑되고난 후 처리를 해주면 됩니다.</li><li><code>afterCompletion()</code> : 모든 작업이 완료된 후 실행 됩니다.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="config">Config<a class="hash-link" href="#config" title="Direct link to heading">​</a></h3><p>Interceptor를 등록하기 위해서 <code>WebMvcConfigurer</code>를 이용한다. Interceptor를 등록한 후 적용할 경로, 제외할 경로를 지정해줄 수 있다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">WebMvcConfig</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">WebMvcConfigurer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Qualifier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"httpInterceptor"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">HandlerInterceptor</span><span class="token plain"> interceptor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addInterceptors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterceptorRegistry</span><span class="token plain"> registry</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addInterceptor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">interceptor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addPathPatterns</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/**"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">excludePathPatterns</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/user/**"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="controller">Controller<a class="hash-link" href="#controller" title="Direct link to heading">​</a></h3><p>Test를 위해 콘솔에 해당 로그를 찍어보자.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="indexcontroller-참고">IndexController (<a href="https://github.com/heowc/SpringBootSample/blob/master/SpringBootInterceptor/src/main/java/com/example/controller/IndexController.java" target="_blank" rel="noopener noreferrer">참고</a>)<a class="hash-link" href="#indexcontroller-참고" title="Direct link to heading">​</a></h4><div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="usercontroller-참고">UserController (<a href="https://github.com/heowc/SpringBootSample/blob/master/SpringBootInterceptor/src/main/java/com/example/controller/UserController.java" target="_blank" rel="noopener noreferrer">참고</a>)<a class="hash-link" href="#usercontroller-참고" title="Direct link to heading">​</a></h4><div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:8080/user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="결과">결과<a class="hash-link" href="#결과" title="Direct link to heading">​</a></h4><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">~~ : Hello, User!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">~~ : ================ Before Method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~~ : Hello, Spring Boot Interceptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~~ : ================ Method Executed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~~ : ================ Method Completed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="그-외">그 외<a class="hash-link" href="#그-외" title="Direct link to heading">​</a></h3><p>Interceptor 후처리를 이용하여 값을 가공하거나 header에 키값을 추가하는 등의 작업을 할 수 없다. (해도 header에서 해당 키값을 찾아볼 수 없다.) 이런 경우에는 <code>ResponseBodyAdvice</code>를 구현해야 한다.(<a href="https://github.com/heowc/SpringBootSample/blob/master/SpringBootInterceptor/src/main/java/com/example/advice/HttpResponseAdvice.java" target="_blank" rel="noopener noreferrer">참고</a>)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><p><a href="https://github.com/heowc/SpringBootSample/tree/master/SpringBootInterceptor" target="_blank" rel="noopener noreferrer">SpringBootSample / SpringBootInterceptor</a></p>]]></content:encoded>
            <category>spring</category>
            <category>spring-boot</category>
            <category>interceptor</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot - Cache]]></title>
            <link>https://heowc.dev/en/2018/02/05/spring-boot-cache</link>
            <guid>2018/02/05/spring-boot-cache</guid>
            <pubDate>Mon, 05 Feb 2018 20:04:01 GMT</pubDate>
            <description><![CDATA[캐시(cache, 문화어: 캐쉬, 고속완충기, 고속완충기억기)는 컴퓨터 과학에서 데이터나 값을 미리 복사해 놓는 임시 장소를 가리킨다.]]></description>
            <content:encoded><![CDATA[<blockquote><p><strong>캐시(cache, 문화어: 캐쉬, 고속완충기, 고속완충기억기)</strong>는 컴퓨터 과학에서 데이터나 값을 미리 복사해 놓는 임시 장소를 가리킨다.</p></blockquote><div class="mermaid" data-mermaid-src="    graph LR
        C1[Client] --> App[Spring Boot Application]
        C2[Client] --> App[Spring Boot Application]
        C3[Client] --> App[Spring Boot Application]
        C4[Client] --> App[Spring Boot Application]
        App[Spring Boot Application] -->|Connection| D[DB]
        App[Spring Boot Application] -.->|No Connection| D[DB]
        App[Spring Boot Application] -.->|No Connection| D[DB]
        App[Spring Boot Application] -.->|No Connection| D[DB]">    graph LR
        C1[Client] --&gt; App[Spring Boot Application]
        C2[Client] --&gt; App[Spring Boot Application]
        C3[Client] --&gt; App[Spring Boot Application]
        C4[Client] --&gt; App[Spring Boot Application]
        App[Spring Boot Application] --&gt;|Connection| D[DB]
        App[Spring Boot Application] -.-&gt;|No Connection| D[DB]
        App[Spring Boot Application] -.-&gt;|No Connection| D[DB]
        App[Spring Boot Application] -.-&gt;|No Connection| D[DB]</div><p>Spring의 장점 중 PSA(Portable Service Abstractions)라는 것이 있다. 이는 쉬운 서비스 추상화라고 하는데, 각각의 외부 서비스를 간단한 인터페이스만으로 쉽게 사용할 수 있도록 설계되어있다. Cache에서는 Redis, Ehcache, ConcurrentMap 등을 <code>CacheManager</code> 인터페이스로 추상화되어 있고, <code>CacheManager</code> 인터페이스를 이용하여 또 다른 cache 라이브러리를 사용할 수도 있다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="언제-사용하면-좋을까">언제 사용하면 좋을까?<a class="hash-link" href="#언제-사용하면-좋을까" title="Direct link to heading">​</a></h3><p>아래 그림과 같은 메뉴가 단적인 예시가 될 수 있다.</p><p><img loading="lazy" alt="Alt example" src="/en/assets/images/example-87f7a6d9fe888a6b71b063f6ddd3dcbd.png" width="636" height="288" class="img_ev3q"></p><ul><li>무거운 비즈니즈 로직을 수행할 떄</li><li>주기적으로나 언제나 동일한 데이터를 가질 떄</li><li>RDB에 대한 부하를 분산하고자 할 때</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dependency">Dependency<a class="hash-link" href="#dependency" title="Direct link to heading">​</a></h3><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile('org.springframework.boot:spring-boot-starter-cache')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testCompile('org.springframework.boot:spring-boot-starter-test') </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="config">Config<a class="hash-link" href="#config" title="Direct link to heading">​</a></h3><p><code>@EnableCaching</code>을 명시해주면 바로 사용할 수 있고 추가적인 설정이 없다면 <code>ConcurrentMap</code>를 사용하여 Caching하게 된다. 또한 <strong>Redis</strong>나 <strong>Ehcache</strong> 라이브러리를 추가하면 Spring Boot의 <strong>Auto Detect</strong> 기능으로 인해 해당 라이브러리를 자동적으로 이용하게 된다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@EnableCaching</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">CacheConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="component">Component<a class="hash-link" href="#component" title="Direct link to heading">​</a></h3><p>무거운 비즈니스 로직이 있다고 가정하고 약 3초의 sleep을 주도록 해보자.
아래 코드를 간단히 설명하자면, book이라는 캐시 영역에 isbn을 키로 갖는 데이터를 Caching 해두는 것이다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Component</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SimpleBookRepository</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">BookRepository</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LoggerFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SimpleBookRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Cacheable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"book"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"#isbn"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Book</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getByIsbn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> isbn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">simulateSlowService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Book</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">isbn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Some book"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">simulateSlowService</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000L</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Thread</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">InterruptedException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">IllegalStateException</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@CacheEvict</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"book"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"#isbn"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">refresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> isbn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"cache clear =&gt; "</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> isbn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>@Cacheable</code>: 캐시 생성</p><ul><li>value: 캐시 이름</li><li>key: 키</li></ul><p><code>@CacheEvict</code>: 캐기 초기화</p><ul><li>value: 캐시 이름</li><li>key: 키</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-code">Test Code<a class="hash-link" href="#test-code" title="Direct link to heading">​</a></h3><p>로직에 대한 소요시간을 측정해 보았다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@RunWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@SpringBootTest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SpringBootCacheApplicationTests</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">BookRepository</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> startTime</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> endTime</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">LoggerFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SpringBootCacheApplicationTests</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onBefore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        startTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">currentTimeMillis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onAfter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        endTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">currentTimeMillis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"소요시간: {}ms"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> endTime </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> startTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getByIsbn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getByIsbn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test3</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getByIsbn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"b"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test4</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getByIsbn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test5</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">refresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getByIsbn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="결과">결과<a class="hash-link" href="#결과" title="Direct link to heading">​</a></h4><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">소요시간: 3215ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">소요시간: 10ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">소요시간: 3006ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">소요시간: 8ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cache clear =&gt; a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">소요시간: 3017ms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><p><a href="https://github.com/heowc/SpringBootSample/tree/master/SpringBootCache" target="_blank" rel="noopener noreferrer">SpringBootSample / SpringBootCache</a></p>]]></content:encoded>
            <category>spring</category>
            <category>spring-boot</category>
            <category>cache</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot - Validation]]></title>
            <link>https://heowc.dev/en/2018/01/14/spring-boot-hibernate-validation</link>
            <guid>2018/01/14/spring-boot-hibernate-validation</guid>
            <pubDate>Sun, 14 Jan 2018 22:26:30 GMT</pubDate>
            <description><![CDATA[데이터에 대한 유효성 검증을 효과적으로 도와줄 수 있다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>데이터에 대한 유효성 검증을 효과적으로 도와줄 수 있다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bean-validation-hibernate-validator">bean-validation? hibernate-validator?<a class="hash-link" href="#bean-validation-hibernate-validator" title="Direct link to heading">​</a></h3><p><strong>Bean-validation</strong>: <a href="https://jcp.org/en/jsr/detail?id=380" target="_blank" rel="noopener noreferrer">JSR-380</a>, 애노테이션을 이용하여 bean 유효성 검사를 위한 Java API 스펙</p><p><strong>Hibernate-validator</strong>: Bean Validation을 구현한 Java API</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dependency">Dependency<a class="hash-link" href="#dependency" title="Direct link to heading">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">compile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">'org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">boot</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">spring</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">boot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">starter</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">web'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">compile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">'org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">boot</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">spring</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">boot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">starter</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">validation'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">compile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">'org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">projectlombok</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">lombok'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">runtime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">'com</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">h2database</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">h2'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">testCompile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">'org</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">springframework</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">boot</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">spring</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">boot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">starter</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">test'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entity">Entity<a class="hash-link" href="#entity" title="Direct link to heading">​</a></h3><p>애노테이션을 사용하면 쉽게 Entity에 대한 유효성 검사를 할 수 있다. 해당 애노테이션은 javax.validation.constraints패키지에 정의되어 있으며, 이를 아래와 같이 활용할 수 있다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Member</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> idx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@NotNull</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"name null"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"min 14"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Integer</span><span class="token plain"> age</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@NotNull</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"tel null"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> tel</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>@NotNull</code>: null 검증
<code>@Min</code>, <code>@Max</code>: 최소값, 최대값 검증
<code>@Size</code>: 범위 검증
<code>@Email</code>: e-mail 검증
<code>@AssertTrue</code>: true 검증</p><p><code>@NotEmpty</code>: null이나 size가 0 검증 (String, Collection)
<code>@NotBlank</code>: null이나 whitespace 검증 (String)
<code>@Positive</code>, <code>@PositiveOrZero</code>: 숫자 검증
<code>@Negative</code>, <code>@NegativeOrZero</code>: 숫자 검증
<code>@Past</code>, <code>@PastOrPresent</code>: 날짜 검증
<code>@Future</code>, <code>@FutureOrPresent</code>: 날짜 검증</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="controller">Controller<a class="hash-link" href="#controller" title="Direct link to heading">​</a></h3><p>검증하고자 하는 Entity에 @Valid를 붙이며, 이에 대한 결과를 받기 위해 BindingResult를 추가하여 사용할 수 있다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@RestController</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@RequestMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"member"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MemberController</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token plain"> logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLogger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MemberController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ZERO</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@PostMapping</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">ResponseEntity</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token annotation punctuation" style="color:#393A34">@Valid</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@RequestBody</span><span class="token plain"> </span><span class="token class-name">Member</span><span class="token plain"> member</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">BindingResult</span><span class="token plain"> bindingResult</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bindingResult</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">hasErrors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">String</span><span class="token plain"> errorMessage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> bindingResult</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAllErrors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">ZERO</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDefaultMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ResponseEntity</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">errorMessage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">BAD_REQUEST</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ResponseEntity</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">member</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">HttpStatus</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-validation">Custom Validation<a class="hash-link" href="#custom-validation" title="Direct link to heading">​</a></h3><p>제공해주는 애노테이션도 많지만 사용자 정의 검증 애노테이션을 만들어야 하는 상황이 있을 수 있다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="interface-정의">@interface 정의<a class="hash-link" href="#interface-정의" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Documented</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Constraint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">validatedBy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">PhoneValidator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Target</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token class-name">ElementType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">METHOD</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">ElementType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">FIELD</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Retention</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">RUNTIME</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@interface</span><span class="token plain"> </span><span class="token class-name">Phone</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Invalid phone number"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Class</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">groups</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Class</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics"> </span><span class="token generics keyword" style="color:#00009f">extends</span><span class="token generics"> </span><span class="token generics class-name">Payload</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">payload</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="constraintvalidator-구현">ConstraintValidator 구현<a class="hash-link" href="#constraintvalidator-구현" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">PhoneValidator</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">ConstraintValidator</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Phone</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Phone</span><span class="token plain"> phone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isValid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> field</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">ConstraintValidatorContext</span><span class="token plain"> cxt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> field </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">matches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"[0-9]+"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">length</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">length</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="활용">활용<a class="hash-link" href="#활용" title="Direct link to heading">​</a></h4><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Phone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> phone</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-code">Test Code<a class="hash-link" href="#test-code" title="Direct link to heading">​</a></h3><p>자세한 코드는 <a href="https://github.com/heowc/SpringBootSample/blob/master/SpringBootValidator/src/test/java/com/example/web/MemberControllerTest.java" target="_blank" rel="noopener noreferrer">GitHub</a>을 참고</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@RunWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@WebMvcTest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MemberController</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MemberControllerTest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">MockMvc</span><span class="token plain"> mvc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">ObjectMapper</span><span class="token plain"> objectMapper</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test_success</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Member</span><span class="token plain"> member </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Member</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">TEST_NAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TEST_AGE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TEST_PHONE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> memberToJson </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> objectMapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">writeValueAsString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">member</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">mockRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">memberToJson</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isOk</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> memberToJson</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mockRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> memberToJson</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">ResultMatcher</span><span class="token plain"> matcher</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mvc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">perform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">TEST_END_POINT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">content</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">memberToJson</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">contentType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MediaType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">APPLICATION_JSON_UTF8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">accept</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MediaType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">APPLICATION_JSON_UTF8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">andExpect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">matcher</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">andExpect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">content</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="참고">참고<a class="hash-link" href="#참고" title="Direct link to heading">​</a></h3><p><a href="https://github.com/heowc/SpringBootSample/tree/master/SpringBootValidator" target="_blank" rel="noopener noreferrer">SpringBootSample / SpringBootValidator</a>
<a href="http://www.baeldung.com/spring-mvc-custom-validator" target="_blank" rel="noopener noreferrer">Baeldung / spring-mvc-custom-validator</a></p>]]></content:encoded>
            <category>spring</category>
            <category>spring-boot</category>
            <category>hibernate-validation</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot - Data JPA]]></title>
            <link>https://heowc.dev/en/2018/01/09/spring-boot-data-jpa</link>
            <guid>2018/01/09/spring-boot-data-jpa</guid>
            <pubDate>Tue, 09 Jan 2018 23:52:42 GMT</pubDate>
            <description><![CDATA[Spring Boot에서 간단한 설정으로 Hibernate를 사용할 수 있다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>Spring Boot에서 간단한 설정으로 Hibernate를 사용할 수 있다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jpa-hibernate">JPA? Hibernate?<a class="hash-link" href="#jpa-hibernate" title="Direct link to heading">​</a></h3><p><strong>JPA</strong>: Java Persistence API의 줄임말로, 관계형 데이터베이스의 관리를 표현하는 자바 API이다.</p><p><strong>Hibernate</strong>: 자바를 위한 오픈소스 ORM(Object-relational mapping) 프레임워크를 제공한다. 버전 3.2와 그 이후 버전에서는 JPA를 위한 구현을 제공한다.</p><p><strong>Data JPA</strong>: JPA기반의 Repository를 쉽게 구현할 수 있도록 Spring Data에서 제공한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dependency">Dependency<a class="hash-link" href="#dependency" title="Direct link to heading">​</a></h3><p>간단한 예제를 만들기 위해 h2를 사용하겠다.</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile('org.springframework.boot:spring-boot-starter-data-jpa')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compile('org.projectlombok:lombok')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    runtime('com.h2database:h2')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testCompile('org.springframework.boot:spring-boot-starter-test')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="properties">Properties<a class="hash-link" href="#properties" title="Direct link to heading">​</a></h3><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spring.jpa.database=H2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.driver-class-name=org.h2.Driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entity">Entity<a class="hash-link" href="#entity" title="Direct link to heading">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Entity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@AllArgsConstructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Customer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@GeneratedValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">strategy</span><span class="token operator" style="color:#393A34">=</span><span class="token class-name">GenerationType</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">AUTO</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token plain"> idx</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Column</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">length</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Column</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">length</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> tel</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> etc</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token class-name">Customer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>@Entity</code>는 해당 클래스가 JPA의 Entity임을 나타낸다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="repository">Repository<a class="hash-link" href="#repository" title="Direct link to heading">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">CustomerRepository</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">JpaRepository</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Customer</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Long</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>JpaRepository</code>를 상속받는 것 만으로도 기본적인 CRUD가 가능하다. 또한, <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation" target="_blank" rel="noopener noreferrer">query-creation</a>을 이용하여 쿼리를 작성할 수 있다.`</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-code">Test Code<a class="hash-link" href="#test-code" title="Direct link to heading">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@RunWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@DataJpaTest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CustomerRepositoryTests</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Autowired</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">CustomerRepository</span><span class="token plain"> repository</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Customer</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">customer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Customer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"heo won chul"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"010-xxxx-xxxx"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"developer"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test_insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">assertEquals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">customer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getIdx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">customer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getIdx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test_select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">assertNull</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">repository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">findOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1L</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>spring</category>
            <category>spring-boot</category>
            <category>data-jpa</category>
        </item>
        <item>
            <title><![CDATA[Spring Boot - 시작하기]]></title>
            <link>https://heowc.dev/en/2018/01/08/spring-boot-start</link>
            <guid>2018/01/08/spring-boot-start</guid>
            <pubDate>Mon, 08 Jan 2018 21:51:59 GMT</pubDate>
            <description><![CDATA[Spring Boot는 적은 설정만으로 독립 실행형 Spring 애플리케이션을 쉽게 만들 수 있다.]]></description>
            <content:encoded><![CDATA[<blockquote><p>Spring Boot는 적은 설정만으로 독립 실행형 Spring 애플리케이션을 쉽게 만들 수 있다.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="기능">기능<a class="hash-link" href="#기능" title="Direct link to heading">​</a></h3><ul><li>독립 실행형 Spring 애플리케이션</li><li>Tomcat, Jetty 또는 Undertow을 내장</li><li>Maven 구성을 단순화하기 위한 ‘starter’ POM 제공</li><li>가능한 경우, 자동으로 Spring 설정</li><li>Metric, Health check 및 Externalized 구성과 같은 프로덕션 기능을 제공</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="준비사항">준비사항<a class="hash-link" href="#준비사항" title="Direct link to heading">​</a></h3><ul><li>JDK 1.8 이상</li><li>IDE(Eclipse, STS, Intellij)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설치하기">설치하기<a class="hash-link" href="#설치하기" title="Direct link to heading">​</a></h3><ul><li><a href="https://start.spring.io/" target="_blank" rel="noopener noreferrer">Spring Initializr</a> 접속 (빌드 툴, 언어, 버전, 디펜던시)</li><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#getting-started-installing-the-cli" target="_blank" rel="noopener noreferrer">Spring Boot CLI</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="설정">설정<a class="hash-link" href="#설정" title="Direct link to heading">​</a></h3><ul><li><code>application.properties</code>이나 <code>application.yml</code>를 이용하여 다양한 설정을 할 수 있다.</li><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html" target="_blank" rel="noopener noreferrer">common-application-properties</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="실행">실행<a class="hash-link" href="#실행" title="Direct link to heading">​</a></h3><p>  .   _<strong>_          _            </strong> _ _
/<!-- -->\<!-- --> / <strong><em>'</em> </strong> _ <em>(</em>)<em> __  __ </em> \ \ \ \
( ( )<!-- -->_<strong> | '<em> | '</em>| | '<em> \/ </em>` | \ \ \ \
<!-- -->\<!-- -->/  _</strong>)| |<em>)| | | | | || (</em>| |  ) ) ) )
'  |_<strong>_| .</strong>|<em>| |</em>|<em>| |</em>_<em>, | / / / /
=========|</em>|==============|<em>__/=/</em>/<em>/</em>/
:: Spring Boot ::        (v2.1.0.RELEASE)</p>]]></content:encoded>
            <category>spring</category>
            <category>spring-boot</category>
        </item>
    </channel>
</rss>