"use strict";(self.webpackChunkdocusaurus_blog=self.webpackChunkdocusaurus_blog||[]).push([[4397],{23024:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var o=t(74848),a=t(28453),i=t(72143);const s={title:"Spring Boot - testContainer\ub97c \ud65c\uc6a9\ud55c AWS DynamoDB \ud14c\uc2a4\ud2b8",slug:"2019/01/16/spring-boot-dynamodb-using-testcontainer",date:new Date("2019-01-16T21:30:00.000Z"),category:["spring-boot"],tags:["spring-boot","test-container","integration-test","aws","dynamodb"]},r=void 0,l={permalink:"/2019/01/16/spring-boot-dynamodb-using-testcontainer",source:"@site/blog/spring-boot-dynamodb-using-testcontainer.mdx",title:"Spring Boot - testContainer\ub97c \ud65c\uc6a9\ud55c AWS DynamoDB \ud14c\uc2a4\ud2b8",description:"Amazon DynamoDB\ub97c \ube44\uc6a9 \uc9c0\ubd88\uc5c6\uc774 \uc27d\uac8c \ud14c\uc2a4\ud2b8\ud558\ub294 \ubc29\ubc95\uc744 \uc18c\uac1c\ud558\ub824\uace0 \ud55c\ub2e4.",date:"2019-01-16T21:30:00.000Z",tags:[{inline:!0,label:"spring-boot",permalink:"/tags/spring-boot"},{inline:!0,label:"test-container",permalink:"/tags/test-container"},{inline:!0,label:"integration-test",permalink:"/tags/integration-test"},{inline:!0,label:"aws",permalink:"/tags/aws"},{inline:!0,label:"dynamodb",permalink:"/tags/dynamodb"}],readingTime:4.835,hasTruncateMarker:!0,authors:[],frontMatter:{title:"Spring Boot - testContainer\ub97c \ud65c\uc6a9\ud55c AWS DynamoDB \ud14c\uc2a4\ud2b8",slug:"2019/01/16/spring-boot-dynamodb-using-testcontainer",date:"2019-01-16T21:30:00.000Z",category:["spring-boot"],tags:["spring-boot","test-container","integration-test","aws","dynamodb"]},unlisted:!1,prevItem:{title:"GitHub Action\uc744 \ud65c\uc6a9\ud55c GitHub Page \ubc30\ud3ec",permalink:"/2019/02/03/deploy-gh-page-with-github-action"},nextItem:{title:"Spring Boot - \uc548\uc804\ud558\uac8c \uc885\ub8cc\uc2dc\ud0a4\uae30",permalink:"/2018/12/27/spring-boot-graceful-shutdown"}},c={authorsImageUrls:[]},d=[{value:"Amazon DynamoDB\ub780 \ubb34\uc5c7\uc785\ub2c8\uae4c?",id:"amazon-dynamodb\ub780-\ubb34\uc5c7\uc785\ub2c8\uae4c",level:3},{value:"\ud658\uacbd \uad6c\uc131\ud558\uae30",id:"\ud658\uacbd-\uad6c\uc131\ud558\uae30",level:3},{value:"Docker Container \uc2e4\ud589",id:"docker-container-\uc2e4\ud589",level:4},{value:"Spring Boot \uc124\uc815",id:"spring-boot-\uc124\uc815",level:3},{value:"\ub514\ud39c\ub358\uc2dc \ucd94\uac00",id:"\ub514\ud39c\ub358\uc2dc-\ucd94\uac00",level:4},{value:"<code>AmazonDynamoDB</code> \ube48 \ub4f1\ub85d",id:"amazondynamodb-\ube48-\ub4f1\ub85d",level:4},{value:"\ud14c\uc2a4\ud2b8 \uc791\uc131\ud558\uae30",id:"\ud14c\uc2a4\ud2b8-\uc791\uc131\ud558\uae30",level:4},{value:"testcontainers \uc801\uc6a9",id:"testcontainers-\uc801\uc6a9",level:3},{value:"\ub514\ud39c\ub358\uc2dc \ucd94\uac00",id:"\ub514\ud39c\ub358\uc2dc-\ucd94\uac00-1",level:4},{value:"<code>AbstractIntegrationTest</code> \uc791\uc131",id:"abstractintegrationtest-\uc791\uc131",level:4},{value:"\ud14c\uc2a4\ud2b8 \uc791\uc131\ud558\uae30 (\uc218\uc815)",id:"\ud14c\uc2a4\ud2b8-\uc791\uc131\ud558\uae30-\uc218\uc815",level:4},{value:"\ucc38\uace0",id:"\ucc38\uace0",level:3}];function m(n){const e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Amazon DynamoDB"}),"\ub97c \ube44\uc6a9 \uc9c0\ubd88\uc5c6\uc774 \uc27d\uac8c \ud14c\uc2a4\ud2b8\ud558\ub294 \ubc29\ubc95\uc744 \uc18c\uac1c\ud558\ub824\uace0 \ud55c\ub2e4."]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"amazon-dynamodb\ub780-\ubb34\uc5c7\uc785\ub2c8\uae4c",children:"Amazon DynamoDB\ub780 \ubb34\uc5c7\uc785\ub2c8\uae4c?"}),"\n",(0,o.jsxs)(e.p,{children:["\uc6b0\uc120, ",(0,o.jsx)(e.code,{children:"Amazon DynamoDB"}),"\uac00 \ubb34\uc5c7\uc778\uc9c0 \ucc3e\uc544\ubcf4\uc790. \uacf5\uc2dd\ubb38\uc11c\uc5d0\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \uc801\ud600\uc788\ub2e4."]}),"\n",(0,o.jsx)(e.admonition,{title:"AWS \uacf5\uc2dd\ubb38\uc11c - Amazon DynamoDB\ub780 \ubb34\uc5c7\uc785\ub2c8\uae4c?",type:"note",children:(0,o.jsxs)(e.p,{children:["Amazon DynamoDB\ub294 ",(0,o.jsx)(e.strong,{children:"\uc885\ud569 \uad00\ub9ac\ud615 NoSQL \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc11c\ube44\uc2a4"}),"\ub85c\uc11c \uc6d0\ud65c\ud55c \ud655\uc7a5\uc131\uacfc \ud568\uaed8 \ube60\ub974\uace0 \uc608\uce21 \uac00\ub2a5\ud55c \uc131\ub2a5\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4. DynamoDB\ub97c \uc0ac\uc6a9\ud558\uba74 \ubd84\uc0b0 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc6b4\uc601\ud558\uace0 \uc870\uc815\ud558\ub294 \ub370 \ub530\ub978 \uad00\ub9ac \ubd80\ub2f4\uc744 \uc904\uc77c \uc218 \uc788\uc73c\ubbc0\ub85c \ud558\ub4dc\uc6e8\uc5b4 \ud504\ub85c\ube44\uc800\ub2dd, \uc124\uc815 \ubc0f \uad6c\uc131, \ubcf5\uc81c, \uc18c\ud504\ud2b8\uc6e8\uc5b4 \ud328\uce58 \ub610\ub294 \ud074\ub7ec\uc2a4\ud130 \uc870\uc815..."]})}),"\n",(0,o.jsx)(e.h3,{id:"\ud658\uacbd-\uad6c\uc131\ud558\uae30",children:"\ud658\uacbd \uad6c\uc131\ud558\uae30"}),"\n",(0,o.jsxs)(e.p,{children:["\uac1c\ubc1c \ud504\ub85c\uc138\uc2a4\uc0c1 ",(0,o.jsx)(e.code,{children:"dev"}),", ",(0,o.jsx)(e.code,{children:"qa"}),", ",(0,o.jsx)(e.code,{children:"stage"}),", ",(0,o.jsx)(e.code,{children:"test"}),", ",(0,o.jsx)(e.code,{children:"prod"})," \uac19\uc774 \uc601\uc5ed\uc744 \ub098\ub204\uc5b4 \uad6c\uc131\ud558\ub294 \uac83\uc774 \ubcf4\ud1b5\uc774\ub2e4. \uadf8\ub7ec\ub2e4\ubcf4\ub2c8 \uac01 \uc601\uc5ed\ub9c8\ub2e4 \ubcc4\ub3c4\uc758 \uc778\uc2a4\ud134\uc2a4\uac00 \ud544\uc694\ud558\uac8c \ub418\uace0 \ubd88\uac00\ud53c\ud558\uac8c \ud074\ub77c\uc6b0\ub4dc \ube44\uc6a9\uc774 \ub298\uc5b4\ub098\uac8c \uc0c1\ud669\uc5d0 \uc9c1\uba74\ud558\uac8c \ub41c\ub2e4. \ud558\uc9c0\ub9cc, Amazon DynamoDB\ub294 \uc778\uc2a4\ud134\uc2a4\ub97c \ub9cc\ub4e4\uc9c0 \uc54a\uace0\ub3c4 \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud558\ub3c4\ub85d \uc81c\uacf5\ud55c\ub2e4. ",(0,o.jsx)(e.strong,{children:"\uc989, \ube44\uc6a9\uc774 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4."})]}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["jar \ud30c\uc77c\uc744 \uc81c\uacf5\ud558\uc5ec java\uac00 \uc788\ub294 \ud658\uacbd\uc5d0\uc11c \uc2e4\ud589 [",(0,o.jsx)(e.a,{href:"https://docs.aws.amazon.com/ko_kr/amazondynamodb/latest/developerguide/DynamoDBLocal.DownloadingAndRunning.html",children:"link"}),"]"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"docker container \uc2e4\ud589"})," [",(0,o.jsx)(e.a,{href:"https://hub.docker.com/r/amazon/dynamodb-local/",children:"link"}),"]"]}),"\n"]}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsxs)(e.p,{children:["\uc5ec\uae30\uc11c ",(0,o.jsx)(e.code,{children:"test"})," \uc815\ub3c4\ub294 \ub370\uc774\ud130\uac00 \ud718\ubc1c\uc131\uc73c\ub85c \uc788\uc5b4\ub3c4 \ub418\ub294 \ubd80\ubd84\uc774\ub77c \uc0dd\uac01\ud55c\ub2e4."]}),"\n"]}),"\n",(0,o.jsx)(e.h4,{id:"docker-container-\uc2e4\ud589",children:"Docker Container \uc2e4\ud589"}),"\n",(0,o.jsxs)(e.p,{children:["DockerHub\uc5d0 ",(0,o.jsx)(e.a,{href:"https://hub.docker.com/r/amazon/dynamodb-local/",children:(0,o.jsx)(e.code,{children:"amazon/dynamodb-local"})})," \ud37c\ube14\ub9ad \uc774\ubbf8\uc9c0\ub85c \uc81c\uacf5\ub418\uace0 \uc788\ub2e4."]}),"\n",(0,o.jsx)(i.A,{id:"demo-docker-run",command:"docker run -p 8000:8000 amazon/dynamodb-local",respond:"Initializing DynamoDB Local with the following configuration:\nPort:\t8000\nInMemory:\ttrue\nDbPath:\tnull\nSharedDb:\tfalse\nshouldDelayTransientStatuses:\tfalse\nCorsParams:\t*",minHeight:"240px",onCompleteDelay:100}),"\n",(0,o.jsx)(e.h3,{id:"spring-boot-\uc124\uc815",children:"Spring Boot \uc124\uc815"}),"\n",(0,o.jsx)(e.h4,{id:"\ub514\ud39c\ub358\uc2dc-\ucd94\uac00",children:"\ub514\ud39c\ub358\uc2dc \ucd94\uac00"}),"\n",(0,o.jsx)(e.p,{children:"DynamoDB\ub97c \ud3ec\ud568\ud55c \ub2e4\ub978 \uc11c\ube44\uc2a4(ex. Amazon S3, Amazon RedShift, ...)\ub97c \uc27d\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc81c\uacf5\ud55c\ub2e4. \uc774\ub97c \ub514\ud39c\ub358\uc2dc\ub85c \ucd94\uac00\ud55c\ub2e4."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-groovy",children:"compile('com.amazonaws:aws-java-sdk-dynamodb:1.11.466')\n// ...\n"})}),"\n",(0,o.jsxs)(e.h4,{id:"amazondynamodb-\ube48-\ub4f1\ub85d",children:[(0,o.jsx)(e.code,{children:"AmazonDynamoDB"})," \ube48 \ub4f1\ub85d"]}),"\n",(0,o.jsxs)(e.p,{children:["DynamoDB\uc5d0 \uc561\uc138\uc2a4\ud560 \ud074\ub798\uc2a4\uc778 ",(0,o.jsx)(e.code,{children:"AmazonDynamoDB"}),"\ub97c \ube48\uc73c\ub85c \ub4f1\ub85d\ud574\uc900\ub2e4."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class DynamoDBConfig {\n\n    @Bean\n    public AmazonDynamoDB amazonDynamoDB(\n            @Value("${aws.region}") String region,\n            @Value("${aws.dynamo.endpoint}") String dynamoEndpoint,\n            @Value("${aws.access-key}") String accessKey,\n            @Value("${aws.secret-key}") String secretKey) {\n        return AmazonDynamoDBClientBuilder.standard()\n                .withEndpointConfiguration(new AwsClientBuilder.EndpointConfiguration(dynamoEndpoint, region))\n                .withCredentials(new AWSStaticCredentialsProvider(new BasicAWSCredentials(accessKey, secretKey)))\n                .build();\n    }\n}\n'})}),"\n",(0,o.jsx)(e.h4,{id:"\ud14c\uc2a4\ud2b8-\uc791\uc131\ud558\uae30",children:"\ud14c\uc2a4\ud2b8 \uc791\uc131\ud558\uae30"}),"\n",(0,o.jsxs)(e.p,{children:["\ub2f9\uc5f0\ud55c \uc598\uae30\uc9c0\ub9cc ",(0,o.jsx)(e.code,{children:"AmazonDynamoDB"}),"\ub97c \ube48\uc73c\ub85c \ub4f1\ub85d\ud574\ub450\uc5c8\uae30 \ub54c\ubb38\uc5d0 ",(0,o.jsx)(e.code,{children:"@Autowired"}),"\ub97c \ud65c\uc6a9\ud558\uc5ec \uc778\uc2a4\ud134\uc2a4\ub97c \uc8fc\uc785\ubc1b\uc744 \uc218 \uc788\ub2e4. \uadf8\ub9ac\uace0 \ud14c\uc2a4\ud2b8\ub97c \uc791\uc131\ud558\uba74 \ub41c\ub2e4. \ucf54\ub4dc\ub294 \ub3c4\ucee4\ub97c \ud65c\uc6a9\ud558\ub4e0, \uc2e4\uc81c AWS \uc778\uc2a4\ud134\uc2a4\ub97c \ud65c\uc6a9\ud558\ub4e0 \ub3d9\uc77c\ud558\ubbc0\ub85c AWS \uacf5\uc2dd\ubb38\uc11c\uc758 \uc608\uc81c\ub97c \ucc38\uace0\ud558\uac70\ub098, ",(0,o.jsx)(e.a,{href:"https://github.com/heowc/SpringBootSample/blob/master/SpringBootDynamo/src/test/java/com/example/SpringBootDynamoApplicationTests.java",children:"\uac04\ub2e8\ud55c CRUD \uc608\uc81c"}),"\uac00 \uc788\uc73c\ub2c8 \ucc38\uace0\ud558\uc790."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:"@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class SpringBootDynamoApplicationTests {\n\n    // ...\n\n    @Autowired\n    private AmazonDynamoDB dynamoDB;\n\n    // ...\n}\n"})}),"\n",(0,o.jsxs)(e.p,{children:["\ud558\uc9c0\ub9cc, \ud14c\uc2a4\ud2b8\ub97c \uc704\ud574 \ub9e4\ubc88 ",(0,o.jsx)(e.code,{children:"docker run -p 8000:8000 amazon/dynamodb-local"}),"\ub97c \uce58\ub294 \uac83\uc740 \uadc0\ucc2e\uae30\ub3c4 \ud558\uace0 \uc57d\uac04(?) \uc218\ub3d9\uc801\uc774\ub2e4. ",(0,o.jsx)(e.code,{children:"testcontainers"}),"\ub97c \uc0ac\uc6a9\ud558\uba74 \uc774\ub97c \ud574\uacb0\ud560 \uc218 \uc788\ub2e4."]}),"\n",(0,o.jsx)(e.h3,{id:"testcontainers-\uc801\uc6a9",children:"testcontainers \uc801\uc6a9"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.a,{href:"https://www.testcontainers.org/",children:(0,o.jsx)(e.code,{children:"testcontainers"})}),"\ub294 \uc790\ubc14\ucf54\ub4dc\uc5d0\uc11c docker container\ub97c \uc2e4\ud589\uc2dc\ucf1c\uc8fc\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc774\ub2e4. \uc9c1\uc811 ",(0,o.jsx)(e.code,{children:"run"}),"\uc744 \uc2e4\ud589\uc2dc\ud0ac \uc218 \ub3c4 \uc788\uace0, ",(0,o.jsx)(e.code,{children:"Dockerfile"}),"\uc774\ub098 ",(0,o.jsx)(e.code,{children:"docker-compose.yml"}),"\uc744 \ud65c\uc6a9\ud560 \uc218\ub3c4 \uc788\ub2e4. \ubb3c\ub860, docker\uac00 \uc124\uce58\ub418\uc5b4 \uc788\uc5b4\uc57c \ud55c\ub2e4."]}),"\n",(0,o.jsx)(e.h4,{id:"\ub514\ud39c\ub358\uc2dc-\ucd94\uac00-1",children:"\ub514\ud39c\ub358\uc2dc \ucd94\uac00"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-groovy",children:"testCompile('org.testcontainers:testcontainers:1.10.2')\n// ...\n"})}),"\n",(0,o.jsxs)(e.h4,{id:"abstractintegrationtest-\uc791\uc131",children:[(0,o.jsx)(e.code,{children:"AbstractIntegrationTest"})," \uc791\uc131"]}),"\n",(0,o.jsxs)(e.p,{children:["\ub2e4\ud589\ud788 Spring Boot\uc5d0\uc11c \ud65c\uc6a9 \uac00\ub2a5\ud55c \uc608\uc81c \uc0d8\ud50c\uc744 \uc81c\uacf5\ud55c\ub2e4. \uc544\ub798 \uc0d8\ud50c\uc744 \ucc38\uace0\ud558\uc5ec \ub2e4\uc74c\uacfc \uac19\uc774 \uc791\uc131\ud574\ubcfc \uc218 \uc788\ub2e4.\n",(0,o.jsx)(e.a,{href:"https://github.com/testcontainers/testcontainers-java-examples/blob/master/spring-boot/src/test/java/com/example/AbstractIntegrationTest.java",children:"testcontainers/testcontainers-java-examples - AbstractIntegrationTest"})]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:'// ...\npublic abstract class AbstractIntegrationTest {\n\n    private static final String DOCKER_IMAGE = "amazon/dynamodb-local";\n    private static final String DOCKER_TAG = "latest";\n    private static final int EXPOSED_PORT = 8000;\n\n    @ClassRule\n    public static GenericContainer dynamodb =\n            new GenericContainer(String.format("%s:%s", DOCKER_IMAGE, DOCKER_TAG)).withExposedPorts(EXPOSED_PORT);\n\n    public static class Initializer implements ApplicationContextInitializer<ConfigurableApplicationContext> {\n        @Override\n        public void initialize(ConfigurableApplicationContext configurableApplicationContext) {\n            String endpoint = String.format("aws.dynamo.endpoint=http://%s:%s",\n                    dynamodb.getContainerIpAddress(),\n                    dynamodb.getMappedPort(EXPOSED_PORT));\n\n        // ...\n'})}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"\uc608\uc81c\uc5d0\ub3c4 \ub098\uc640\uc788\ub4ef\uc774, \ub2e4\ub978 docker container\ub3c4 \ud65c\uc6a9 \uac00\ub2a5\ud558\ub2e4."}),"\n"]}),"\n",(0,o.jsx)(e.h4,{id:"\ud14c\uc2a4\ud2b8-\uc791\uc131\ud558\uae30-\uc218\uc815",children:"\ud14c\uc2a4\ud2b8 \uc791\uc131\ud558\uae30 (\uc218\uc815)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-java",children:"// ...\npublic class SpringBootDynamoApplicationTests extends AbstractIntegrationTest {\n    // ...\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\ucc38\uace0",children:"\ucc38\uace0"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://hub.docker.com/r/amazon/dynamodb-local/",children:"https://hub.docker.com/r/amazon/dynamodb-local/"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://www.testcontainers.org/",children:"https://www.testcontainers.org/"})}),"\n",(0,o.jsx)(e.li,{children:(0,o.jsx)(e.a,{href:"https://github.com/heowc/SpringBootSample/tree/master/SpringBootDynamo",children:"https://github.com/heowc/SpringBootSample/tree/master/SpringBootDynamo"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(m,{...n})}):m(n)}},72143:(n,e,t)=>{t.d(e,{A:()=>i});var o=t(96540),a=t(74848);const i=n=>{let{id:e="demo-terminal",command:i,respond:s,prompt:r="$",windowTitle:l="bash",minHeight:c="100px",onCompleteDelay:d=0}=n;return(0,o.useEffect)((()=>{const n=t(85310);t(26994),t(77156);let o=new n(`#${e}`);o.openApp("terminal",{minHeight:c,windowTitle:l,promptString:r});let a=i.split(";");for(let e=0;e<a.length;e++)o.command(a[e],{onCompleteDelay:d});o.respond(s),o.end()})),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{id:e,style:{minHeight:c}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]})}},77156:(n,e,t)=>{t.r(e)}}]);