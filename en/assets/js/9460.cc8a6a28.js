"use strict";(self.webpackChunkdocusaurus_blog=self.webpackChunkdocusaurus_blog||[]).push([[9460],{99460:(e,t,s)=>{s.r(t),s.d(t,{diagram:()=>z});var o=s(1213),r=s(45625),a=s(59373),i=s(9419),n=s(73841),d=s(48003),l=s(85408);s(27856),s(27484),s(70277),s(39354),s(17967);const c="rect",p="rectWithTitle",g="statediagram",b=`${g}-state`,u="transition",h=`${u} note-edge`,y=`${g}-note`,f=`${g}-cluster`,w=`${g}-cluster-alt`,x="parent",$="note",m="----",T=`${m}${$}`,S=`${m}${x}`,k="fill:none",D="fill: #333",v="text",A="normal";let B={},E=0;function C(e="",t=0,s="",o=m){return`state-${e}${null!==s&&s.length>0?`${o}${s}`:""}-${t}`}const R=(e,t,s,r,a,n)=>{const d=s.id,l=null==(g=r[d])?"":g.classes?g.classes.join(" "):"";var g;if("root"!==d){let t=c;!0===s.start&&(t="start"),!1===s.start&&(t="end"),s.type!==o.a&&(t=s.type),B[d]||(B[d]={id:d,shape:t,description:i.d.sanitizeText(d,(0,i.g)()),classes:`${l} ${b}`});const r=B[d];s.description&&(Array.isArray(r.description)?(r.shape=p,r.description.push(s.description)):r.description.length>0?(r.shape=p,r.description===d?r.description=[s.description]:r.description=[r.description,s.description]):(r.shape=c,r.description=s.description),r.description=i.d.sanitizeTextOrArray(r.description,(0,i.g)())),1===r.description.length&&r.shape===p&&(r.shape=c),!r.type&&s.doc&&(i.l.info("Setting cluster for ",d,N(s)),r.type="group",r.dir=N(s),r.shape=s.type===o.b?"divider":"roundedWithTitle",r.classes=r.classes+" "+f+" "+(n?w:""));const a={labelStyle:"",shape:r.shape,labelText:r.description,classes:r.classes,style:"",id:d,dir:r.dir,domId:C(d,E),type:r.type,padding:15};if(s.note){const t={labelStyle:"",shape:"note",labelText:s.note.text,classes:y,style:"",id:d+T+"-"+E,domId:C(d,E,$),type:r.type,padding:15},o={labelStyle:"",shape:"noteGroup",labelText:s.note.text,classes:r.classes,style:"",id:d+S,domId:C(d,E,x),type:"group",padding:0};E++;const i=d+S;e.setNode(i,o),e.setNode(t.id,t),e.setNode(d,a),e.setParent(d,i),e.setParent(t.id,i);let n=d,l=t.id;"left of"===s.note.position&&(n=t.id,l=d),e.setEdge(n,l,{arrowhead:"none",arrowType:"",style:k,labelStyle:"",classes:h,arrowheadStyle:D,labelpos:"c",labelType:v,thickness:A})}else e.setNode(d,a)}t&&"root"!==t.id&&(i.l.trace("Setting node ",d," to be child of its parent ",t.id),e.setParent(d,t.id)),s.doc&&(i.l.trace("Adding nodes children "),V(e,s,s.doc,r,a,!n))},V=(e,t,s,r,a,n)=>{i.l.trace("items",s),s.forEach((s=>{switch(s.stmt){case o.c:case o.a:R(e,t,s,r,a,n);break;case o.S:{R(e,t,s.state1,r,a,n),R(e,t,s.state2,r,a,n);const o={id:"edge"+E,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:k,labelStyle:"",label:i.d.sanitizeText(s.description,(0,i.g)()),arrowheadStyle:D,labelpos:"c",labelType:v,thickness:A,classes:u};e.setEdge(s.state1.id,s.state2.id,o,E),E++}}}))},N=(e,t=o.e)=>{let s=t;if(e.doc)for(let o=0;o<e.doc.length;o++){const t=e.doc[o];"dir"===t.stmt&&(s=t.value)}return s},M={setConf:function(e){const t=Object.keys(e);for(const s of t)e[s]},getClasses:function(e,t){i.l.trace("Extracting classes"),t.db.clear();try{return t.parser.parse(e),t.db.extract(t.db.getRootDocV2()),t.db.getClasses()}catch(s){return s}},draw:function(e,t,s,p){i.l.info("Drawing state diagram (v2)",t),B={};let b=p.db.getDirection();void 0===b&&(b=o.D);const{securityLevel:u,state:h}=(0,i.g)(),y=h.nodeSpacing||50,f=h.rankSpacing||50;i.l.info(p.db.getRootDocV2()),p.db.extract(p.db.getRootDocV2()),i.l.info(p.db.getRootDocV2());const w=p.db.getStates(),x=new r.k({multigraph:!0,compound:!0}).setGraph({rankdir:N(p.db.getRootDocV2()),nodesep:y,ranksep:f,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));let $;R(x,void 0,p.db.getRootDocV2(),w,p.db,!0),"sandbox"===u&&($=(0,a.Ys)("#i"+t));const m="sandbox"===u?(0,a.Ys)($.nodes()[0].contentDocument.body):(0,a.Ys)("body"),T=m.select(`[id="${t}"]`),S=m.select("#"+t+" g");(0,n.r)(S,x,["barb"],g,t);l.u.insertTitle(T,"statediagramTitleText",h.titleTopMargin,p.db.getDiagramTitle());const k=T.node().getBBox(),D=k.width+16,v=k.height+16;T.attr("class",g);const A=T.node().getBBox();(0,d.c)(T,v,D,h.useMaxWidth);const E=`${A.x-8} ${A.y-8} ${D} ${v}`;i.l.debug(`viewBox ${E}`),T.attr("viewBox",E);const C=document.querySelectorAll('[id="'+t+'"] .edgeLabel .label');for(const o of C){const e=o.getBBox(),t=document.createElementNS("http://www.w3.org/2000/svg",c);t.setAttribute("rx",0),t.setAttribute("ry",0),t.setAttribute("width",e.width),t.setAttribute("height",e.height),o.insertBefore(t,o.firstChild)}}},z={parser:o.p,db:o.d,renderer:M,styles:o.s,init:e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,o.d.clear()}}}}]);